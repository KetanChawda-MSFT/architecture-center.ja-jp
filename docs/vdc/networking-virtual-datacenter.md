---
title: 'Azure 仮想データセンター: ネットワークの観点'
description: Azure で仮想データ センターを構築する方法について説明します
author: tracsman
manager: rossort
tags: azure-resource-manager
ms.service: virtual-network
ms.date: 04/3/2018
ms.author: jonor
ms.openlocfilehash: 2dbbad3dd8d1a45b94bb4e265d306815d1f5242c
ms.sourcegitcommit: f1dcc388c8b4fc983549c36d7e6b009fa1f072ba
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/19/2018
ms.locfileid: "46329914"
---
# <a name="azure-virtual-datacenter-a-network-perspective"></a><span data-ttu-id="ef949-103">Azure 仮想データセンター: ネットワークの観点</span><span class="sxs-lookup"><span data-stu-id="ef949-103">Azure Virtual Datacenter: A network perspective</span></span>

## <a name="overview"></a><span data-ttu-id="ef949-104">概要</span><span class="sxs-lookup"><span data-stu-id="ef949-104">Overview</span></span>
<span data-ttu-id="ef949-105">オンプレミスのアプリケーションを Azure に移行すると、重要な変更がない場合であっても ("リフト アンド シフト" と呼ばれるアプローチ)、組織にはセキュリティで保護されたコスト効率の高いインフラストラクチャが得られるというメリットがあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-105">Migrating on-premises applications to Azure, even without any significant changes (an approach known as “lift and shift”), provides organizations the benefits of a secured and cost-efficient infrastructure.</span></span> <span data-ttu-id="ef949-106">ただし、クラウド コンピューティングで可能な俊敏性を最大限に活用するには、Azure の機能を利用するように企業のアーキテクチャを進化させる必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-106">However, to make the most of the agility possible with cloud computing, enterprises should evolve their architectures to take advantage of Azure capabilities.</span></span> <span data-ttu-id="ef949-107">Microsoft Azure では、ハイパースケールのサービスとインフラストラクチャ、エンタープライズ レベルの機能と信頼性、ハイブリッド接続のための多くの選択肢が提供されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-107">Microsoft Azure delivers hyper-scale services and infrastructure, enterprise-grade capabilities and reliability, and many choices for hybrid connectivity.</span></span> <span data-ttu-id="ef949-108">お客様は、これらのクラウド サービスにインターネット経由でアクセスするか、プライベート ネットワーク接続を提供する Azure ExpressRoute を使ってアクセスするかを選ぶことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-108">Customers can choose to access these cloud services either via the Internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="ef949-109">Microsoft Azure Platform により、顧客は自身のインフラストラクチャをシームレスにクラウドに拡張し、多層アーキテクチャを構築できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-109">The Microsoft Azure platform allows customers to seamlessly extend their infrastructure into the cloud and build multi-tier architectures.</span></span> <span data-ttu-id="ef949-110">さらに、Microsoft のパートナーからは、Azure での実行用に最適化されたセキュリティ サービスと仮想アプライアンスにより、強化された機能が提供されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-110">Additionally, Microsoft partners provide enhanced capabilities by offering security services and virtual appliances that are optimized to run in Azure.</span></span>

<span data-ttu-id="ef949-111">この記事では、多くのお客様がクラウドへの一括移行を検討するときに直面するアーキテクチャのスケール、パフォーマンス、セキュリティに関する問題の解決に使うことができるパターンと設計の概要について説明します。</span><span class="sxs-lookup"><span data-stu-id="ef949-111">This article provides an overview of patterns and designs that can be used to solve the architectural scale, performance, and security concerns many customers face when thinking about moving en masse to the cloud.</span></span> <span data-ttu-id="ef949-112">組織のさまざまな IT ロールをシステムの管理とガバナンスに適合させる方法の概要についても説明し、セキュリティ要件とコストの最適化に注目します。</span><span class="sxs-lookup"><span data-stu-id="ef949-112">An overview of how to fit different organizational IT roles into the management and governance of the system is also discussed, with emphasis to security requirements and cost optimization.</span></span>

## <a name="what-is-a-virtual-data-center"></a><span data-ttu-id="ef949-113">仮想データ センターとは</span><span class="sxs-lookup"><span data-stu-id="ef949-113">What is a Virtual Data Center?</span></span>
<span data-ttu-id="ef949-114">当初、クラウド ソリューションは、パブリック領域において単一の比較的独立したアプリケーションをホストするために設計されていました。</span><span class="sxs-lookup"><span data-stu-id="ef949-114">In the early days, cloud solutions were designed to host single, relatively isolated, applications, in the public spectrum.</span></span> <span data-ttu-id="ef949-115">この方法は、数年間はうまくいっていました。</span><span class="sxs-lookup"><span data-stu-id="ef949-115">This approach worked well for a few years.</span></span> <span data-ttu-id="ef949-116">しかし、クラウド ソリューションの利点が明らかになり、複数の大規模なワークロードがクラウドでホストされるようになると、1 つまたは複数のリージョンでのデプロイのセキュリティ、信頼性、パフォーマンス、コストの問題に対処することが、クラウド サービスのライフサイクル全体を通して重要になりました。</span><span class="sxs-lookup"><span data-stu-id="ef949-116">However, as the benefits of cloud solutions became apparent and multiple large-scale workloads were hosted on the cloud, addressing security, reliability, performance, and cost concerns of deployments in one or more regions became vital throughout the life cycle of the cloud service.</span></span>

<span data-ttu-id="ef949-117">次のクラウド配置ダイアグラムは、セキュリティ ギャップ (赤いボックス) と、ワークロード間での最適化ネットワーク仮想アプライアンスの余地 (黄色のボックス) の例を示したものです。</span><span class="sxs-lookup"><span data-stu-id="ef949-117">The following cloud deployment diagram illustrates some examples of security gaps (red box) and room for optimization network virtual appliances across workloads (yellow box).</span></span>

<span data-ttu-id="ef949-118">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="ef949-118">[![0]][0]</span></span>

<span data-ttu-id="ef949-119">仮想データ センター (VDC) は、エンタープライズ ワークロードをサポートするためのこのようなスケーリングの必要性と、パブリック クラウドで大規模なアプリケーションをサポートするときに発生する問題に対処する必要性から生まれました。</span><span class="sxs-lookup"><span data-stu-id="ef949-119">The Virtual Data Center (VDC) was born from this necessity for scaling to support enterprise workloads, and the need to deal with the problems introduced when supporting large-scale applications in the public cloud.</span></span>

<span data-ttu-id="ef949-120">VDC は、クラウドのアプリケーション ワークロードであるだけでなく、ネットワーク、セキュリティ、管理、インフラストラクチャ (DNS やディレクトリ サービスなど) でもあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-120">A VDC is not just the application workloads in the cloud, but also the network, security, management, and infrastructure (for example, DNS and Directory Services).</span></span> <span data-ttu-id="ef949-121">また、通常は、オンプレミスのネットワークまたはデータ センターへのプライベート接続も提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-121">It usually also provides a private connection back to an on-premises network or data center.</span></span> <span data-ttu-id="ef949-122">Azure に移行するワークロードが多くなればなるほど、これらのワークロードが配置されるサポート インフラストラクチャおよびオブジェクトについて考えることが重要になります。</span><span class="sxs-lookup"><span data-stu-id="ef949-122">As more and more workloads move to Azure, it is important to think about the supporting infrastructure and objects that these workloads are placed in.</span></span> <span data-ttu-id="ef949-123">リソースの構成方法について慎重に考えることで、データ フロー、セキュリティ モデル、コンプライアンスに関する課題が異なり個別に管理する必要のある多数の "ワークロード アイランド" が増殖するのを防ぐことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-123">Thinking carefully about how resources are structured can avoid the proliferation of hundreds of "workload islands" that must be managed separately with independent data flow, security models, and compliance challenges.</span></span>

<span data-ttu-id="ef949-124">仮想データ センターは、基本的に、共通のサポート機能とインフラストラクチャを備えた、独立してはいても関連性のあるエンティティのコレクションです。</span><span class="sxs-lookup"><span data-stu-id="ef949-124">A Virtual Data Center is essentially a collection of separate but related entities with common supporting functions, features, and infrastructure.</span></span> <span data-ttu-id="ef949-125">ワークロードを統合された VDC と見なすことにより、運用、管理、コンプライアンス監査が容易になるだけでなく、スケールの経済性およびコンポーネントとデータ フローの一元化によるセキュリティの最適化によってコスト削減を実現できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-125">By viewing your workloads as an integrated VDC, you can realize reduced cost due to economies of scale, optimized security through component and data flow centralization, along with easier operations, management, and compliance audits.</span></span>

> [!NOTE]
> <span data-ttu-id="ef949-126">VDC は Azure の独立した製品では**なく**、厳しい要件を満たすためのさまざまな機能の組み合わせであることを理解しておくことが重要です。</span><span class="sxs-lookup"><span data-stu-id="ef949-126">It's important to understand that the VDC is **NOT** a discrete Azure product, but the combination of various features and capabilities to  meet your exact requirements.</span></span> <span data-ttu-id="ef949-127">VDC は、クラウドのリソースと能力を最大限にするための、ワークロードと Azure の使用方法についての考え方です。</span><span class="sxs-lookup"><span data-stu-id="ef949-127">VDC is a way of thinking about your workloads and Azure usage to maximize your resources and abilities in the cloud.</span></span> <span data-ttu-id="ef949-128">したがって、仮想 DC では、組織のロールと責任範囲を考慮した Azure での IT サービスの構築方法について、モジュール方式が採用されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-128">The virtual DC is therefore a modular approach on how to build up IT services in the Azure, respecting organizational roles and responsibilities.</span></span>

<span data-ttu-id="ef949-129">VDC は、企業が次のシナリオでワークロードとアプリケーションを Azure に移行する際に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ef949-129">The VDC can help enterprises get workloads and applications into Azure for the following scenarios:</span></span>

-   <span data-ttu-id="ef949-130">複数の関連するワークロードをホストする</span><span class="sxs-lookup"><span data-stu-id="ef949-130">Hosting multiple related workloads</span></span>
-   <span data-ttu-id="ef949-131">オンプレミスの環境から Azure にワークロードを移行する</span><span class="sxs-lookup"><span data-stu-id="ef949-131">Migrating workloads from an on-premises environment to Azure</span></span>
-   <span data-ttu-id="ef949-132">複数のワークロード間に共有または集中されたセキュリティとアクセスの要件を実装する</span><span class="sxs-lookup"><span data-stu-id="ef949-132">Implementing shared or centralized security and access requirements across workloads</span></span>
-   <span data-ttu-id="ef949-133">大企業向けに DevOps と一元的 IT を適切に組み合わせる</span><span class="sxs-lookup"><span data-stu-id="ef949-133">Mixing DevOps and Centralized IT appropriately for a large enterprise</span></span>

<span data-ttu-id="ef949-134">VDC の利点を実現する鍵となるのは、[Azure VNet][VNet]、[NSG][NSG]、[VNet ピアリング][VNetPeering]、[ユーザー定義ルート (UDR)][UDR]、[ロールベースのアクセス制御 (RBAC)][RBAC] を使用する Azure Identity などの Azure の機能を組み合わせた集中型トポロジ (ハブとスポーク) です。</span><span class="sxs-lookup"><span data-stu-id="ef949-134">The key to unlock the advantages of VDC, is a centralized topology (hub and spokes) with a mix of Azure features: [Azure VNet][VNet], [NSGs][NSG], [VNet Peering][VNetPeering], [User-Defined Routes (UDR)][UDR], and Azure Identity with [Role Base Access Control (RBAC)][RBAC].</span></span>

## <a name="who-needs-a-virtual-data-center"></a><span data-ttu-id="ef949-135">仮想データ センターが必要なユーザー</span><span class="sxs-lookup"><span data-stu-id="ef949-135">Who Needs a Virtual Data Center?</span></span>
<span data-ttu-id="ef949-136">3 つ以上のワークロードを Azure に移行する必要があるすべての Azure ユーザーは、共通リソースの使用について考えるとメリットがあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-136">Any Azure customer that needs to move more than a couple of workloads into Azure can benefit from thinking about using common resources.</span></span> <span data-ttu-id="ef949-137">規模によっては、単一のアプリケーションであっても、VDC の構築に使用されるパターンとコンポーネントを利用することでメリットが得られます。</span><span class="sxs-lookup"><span data-stu-id="ef949-137">Depending on the magnitude, even single applications can benefit from using the patterns and components used to build a VDC.</span></span>

<span data-ttu-id="ef949-138">組織に一元化された IT、ネットワーク、セキュリティ、コンプライアンスのチーム/部門がある場合、VDC を使用することで、ポリシー ポイントの適用、職務の分離、基になる共通コンポーネントの統一性の確保を実現しながら、要件に適した最大限の自由と制御をアプリケーション チームに提供することができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-138">If your organization has a centralized IT, Network, Security, and/or Compliance team/department, a VDC can help enforce policy points, segregation of duty, and ensure uniformity of the underlying common components while giving application teams as much freedom and control as is appropriate for your requirements.</span></span>

<span data-ttu-id="ef949-139">DevOps を検討している組織では、VDC の概念を利用して、Azure リソースの承認されたポケットを提供し、そのグループ (サブスクリプションまたは共通サブスクリプション内のリソース グループ) 内での完全な制御を確保できます。その一方で、ネットワークとセキュリティの境界は、ハブの VNet とリソース グループの一元的ポリシーによる定義に従って準拠を維持します。</span><span class="sxs-lookup"><span data-stu-id="ef949-139">Organizations that are looking to DevOps can utilize the VDC concepts to provide authorized pockets of Azure resources and ensure they have total control within that group (either subscription or resource group in a common subscription), but the network and security boundaries stay compliant as defined by a centralized policy in a hub VNet and Resource Group.</span></span>

## <a name="considerations-on-implementing-a-virtual-data-center"></a><span data-ttu-id="ef949-140">仮想データ センターの実装に関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="ef949-140">Considerations on Implementing a Virtual Data Center</span></span>
<span data-ttu-id="ef949-141">VDC を設計するときは、考慮すべき非常に重要な問題がいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-141">When designing a VDC, there are several pivotal issues to consider:</span></span>

-   <span data-ttu-id="ef949-142">ID とディレクトリ サービス</span><span class="sxs-lookup"><span data-stu-id="ef949-142">Identity and Directory Services</span></span>
-   <span data-ttu-id="ef949-143">セキュリティ インフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="ef949-143">Security infrastructure</span></span>
-   <span data-ttu-id="ef949-144">クラウドへの接続</span><span class="sxs-lookup"><span data-stu-id="ef949-144">Connectivity to the cloud</span></span>
-   <span data-ttu-id="ef949-145">クラウド内の接続</span><span class="sxs-lookup"><span data-stu-id="ef949-145">Connectivity within the cloud</span></span>

### <a name="identity-and-directory-service"></a><span data-ttu-id="ef949-146">ID とディレクトリ サービス</span><span class="sxs-lookup"><span data-stu-id="ef949-146">Identity and Directory Service</span></span>
<span data-ttu-id="ef949-147">ID とディレクトリ サービスは、オンプレミスとクラウド両方のすべてのデータ センターの重要な側面です。</span><span class="sxs-lookup"><span data-stu-id="ef949-147">Identity and Directory services are a key aspect of all data centers, both on-premises and in the cloud.</span></span> <span data-ttu-id="ef949-148">ID は、VDC 内のサービスへのアクセスと承認のすべての側面に関連しています。</span><span class="sxs-lookup"><span data-stu-id="ef949-148">Identity is related to all aspects of access and authorization to services within the VDC.</span></span> <span data-ttu-id="ef949-149">承認されたユーザーおよびプロセスのみが Azure アカウントとリソースにアクセスできるようにするため、Azure は複数の種類の資格情報を認証に使います。</span><span class="sxs-lookup"><span data-stu-id="ef949-149">To help ensure that only authorized users and processes access your Azure Account and resources, Azure uses several types of credentials for authentication.</span></span> <span data-ttu-id="ef949-150">これには、パスワード (Azure アカウントへのアクセス)、暗号化キー、デジタル署名、および証明書が含まれます。</span><span class="sxs-lookup"><span data-stu-id="ef949-150">These include passwords (to access the Azure account), cryptographic keys, digital signatures, and certificates.</span></span> <span data-ttu-id="ef949-151">[*Azure Multi-Factor Authentication* (MFA)][MFA] は、Azure サービスへのアクセスに対する追加セキュリティ レイヤーです。</span><span class="sxs-lookup"><span data-stu-id="ef949-151">[*Azure Multi-Factor Authentication* (MFA)][MFA] is an additional layer of security for accessing Azure services.</span></span> <span data-ttu-id="ef949-152">Azure MFA は、電話、テキスト メッセージ、モバイル アプリ通知などの各種の簡単な確認オプションにより認証を強化し、顧客に最も合った方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-152">Azure MFA provides strong authentication with a range of easy verification options—phone call, text message, or mobile app notification—and allow customers to choose the method they prefer.</span></span>

<span data-ttu-id="ef949-153">大規模な企業では、VDC 内または VDC 間での個々の ID とその認証、承認、ロール、権限の管理について説明する ID 管理プロセスを定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-153">Any large enterprise needs to define an identity management process that describes the management of individual identities, their authentication, authorization, roles, and privileges within or across the VDC.</span></span> <span data-ttu-id="ef949-154">このプロセスの目的は、コスト、ダウンタイム、および手作業の反復を減らしながら、セキュリティと生産性を向上させることです。</span><span class="sxs-lookup"><span data-stu-id="ef949-154">The goals of this process should be to increase security and productivity while decreasing cost, downtime, and repetitive manual tasks.</span></span>

<span data-ttu-id="ef949-155">企業/組織ではさまざまな基幹業務 (LOB) に必要なサービスの組み合わせに対する要求が厳しい場合があり、従業員は異なるプロジェクトに異なるロールで関係することがよくあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-155">Enterprise/organizations can require a demanding mix of services for different Line-of-Businesses (LOBs), and employees often have different roles when involved with different projects.</span></span> <span data-ttu-id="ef949-156">VDC では、適切なガバナンスでシステムを実行するために、それぞれが特定のロール定義を持つさまざまなチーム間の良好な協力が必要です。</span><span class="sxs-lookup"><span data-stu-id="ef949-156">A VDC requires good cooperation between different teams, each with specific role definitions, to get systems running with good governance.</span></span> <span data-ttu-id="ef949-157">責任、アクセス、権限のマトリックスは非常に複雑になることがあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-157">The matrix of responsibilities, access, and rights can be extremely complex.</span></span> <span data-ttu-id="ef949-158">VDC の ID 管理は、[*Azure Active Directory* (AAD)][AAD] とロールベースのアクセス制御 (RBAC) によって実装されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-158">Identity management in VDC is implemented through [*Azure Active Directory* (AAD)][AAD] and Role-Based Access Control (RBAC).</span></span>

<span data-ttu-id="ef949-159">ディレクトリ サービスは、日常的な項目とネットワーク リソースを検索、管理、および整理するための共有情報インフラストラクチャです。</span><span class="sxs-lookup"><span data-stu-id="ef949-159">A Directory Service is a shared information infrastructure for locating, managing, administering, and organizing everyday items and network resources.</span></span> <span data-ttu-id="ef949-160">これらのリソースには、ボリューム、フォルダー、ファイル、プリンター、ユーザー、グループ、デバイス、その他のオブジェクトが含まれます。</span><span class="sxs-lookup"><span data-stu-id="ef949-160">These resources can include volumes, folders, files, printers, users, groups, devices, and other objects.</span></span> <span data-ttu-id="ef949-161">ネットワーク上の各リソースは、ディレクトリ サーバーによってオブジェクトと見なされます。</span><span class="sxs-lookup"><span data-stu-id="ef949-161">Each resource on the network is considered an object by the directory server.</span></span> <span data-ttu-id="ef949-162">リソースに関する情報は、そのリソースまたはオブジェクトに関連付けられた属性のコレクションとして格納されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-162">Information about a resource is stored as a collection of attributes associated with that resource or object.</span></span>

<span data-ttu-id="ef949-163">すべての Microsoft Online ビジネス サービスは、サインオンや他の ID のニーズに対応するために、Azure Active Directory (AAD) に依存しています。</span><span class="sxs-lookup"><span data-stu-id="ef949-163">All Microsoft online business services rely on Azure Active Directory (AAD) for sign-in and other identity needs.</span></span> <span data-ttu-id="ef949-164">Azure Active Directory は、統合的で可用性の高い ID とアクセス管理のクラウド ソリューションであり、コアのディレクトリ サービス、高度な ID ガバナンス、およびアプリケーション アクセス管理を組み合わせたものです。</span><span class="sxs-lookup"><span data-stu-id="ef949-164">Azure Active Directory is a comprehensive, highly available identity and access management cloud solution that combines core directory services, advanced identity governance, and application access management.</span></span> <span data-ttu-id="ef949-165">AAD は、オンプレミスの Active Directory と統合して、すべてのクラウド ベースのアプリケーションとローカルにホストされた (オンプレミスの) アプリケーションに対してシングル サインオンを有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-165">AAD can be integrated with on-premises Active Directory to enable single sign-on for all cloud-based and locally hosted (on-premises) applications.</span></span> <span data-ttu-id="ef949-166">オンプレミスの Active Directory のユーザー属性は、AAD に自動的に同期できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-166">The user attributes of on-premises Active Directory can be automatically synchronized to AAD.</span></span>

<span data-ttu-id="ef949-167">1 人のグローバル管理者が VDC のすべての権限の割り当てを行う必要はありません。</span><span class="sxs-lookup"><span data-stu-id="ef949-167">A single global administrator is not required to assign all permissions in a VDC.</span></span> <span data-ttu-id="ef949-168">代わりに、特定の各部門 (または、ディレクトリ サービス内のユーザーやサービスのグループ) が、VDC 内の各自のリソースを管理するために必要なアクセス許可を持つことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-168">Instead each specific department (or group of users or services in the Directory Service) can have the permissions required to manage their own resources within a VDC.</span></span> <span data-ttu-id="ef949-169">アクセス許可を構成するにはバランスが必要です。</span><span class="sxs-lookup"><span data-stu-id="ef949-169">Structuring permissions requires balancing.</span></span> <span data-ttu-id="ef949-170">アクセス許可が多すぎるとパフォーマンス効率が妨げられ、アクセス許可が少なすぎたり緩すぎたりするとセキュリティ リスクが高まります。</span><span class="sxs-lookup"><span data-stu-id="ef949-170">Too many permissions can impede performance efficiency, and too few or loose permissions can increase security risks.</span></span> <span data-ttu-id="ef949-171">Azure のロールベースのアクセス制御 (RBAC) は、VDC リソースのきめ細かいアクセス管理を実現することで、この問題への対処を支援します。</span><span class="sxs-lookup"><span data-stu-id="ef949-171">Azure Role-Based Access Control (RBAC) helps to address this problem, by offering fine-grained access management for VDC resources.</span></span>

#### <a name="security-infrastructure"></a><span data-ttu-id="ef949-172">セキュリティ インフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="ef949-172">Security infrastructure</span></span>
<span data-ttu-id="ef949-173">VDC のコンテキストでのセキュリティ インフラストラクチャは、主に、VDC 固有の仮想ネットワーク セグメントのトラフィックの分離と、VDC 全体にわたる受信および送信フローの制御方法に関係します。</span><span class="sxs-lookup"><span data-stu-id="ef949-173">Security infrastructure, in the context of a VDC, is mainly related to the segregation of traffic in the VDC's specific virtual network segment, and how to control ingress and egress flows throughout the VDC.</span></span> <span data-ttu-id="ef949-174">Azure の基になっているマルチ テナント アーキテクチャは、Virtual Network (VNet) の分離、アクセス制御リスト (ACL)、ロード バランサー、IP フィルター、トラフィック フロー ポリシーを使って、デプロイ間の許可されていない非意図的なトラフィックを防止します。</span><span class="sxs-lookup"><span data-stu-id="ef949-174">Azure is based on multi-tenant architecture that prevents unauthorized and unintentional traffic between deployments, using Virtual Network (VNet) isolation, access control lists (ACLs), load balancers, and IP filters, along with traffic flow policies.</span></span> <span data-ttu-id="ef949-175">ネットワーク アドレス変換 (NAT) は、内部ネットワーク トラフィックを外部トラフィックから分離します。</span><span class="sxs-lookup"><span data-stu-id="ef949-175">Network address translation (NAT) separates internal network traffic from external traffic.</span></span>

<span data-ttu-id="ef949-176">Azure ファブリックは、テナントのワークロードにインフラストラクチャ リソースを割り当て、仮想マシン (VM) との間の通信を管理します。</span><span class="sxs-lookup"><span data-stu-id="ef949-176">The Azure fabric allocates infrastructure resources to tenant workloads and manages communications to and from virtual machines (VMs).</span></span> <span data-ttu-id="ef949-177">Azure ハイパーバイザーは、VM 間のメモリおよびプロセスの分離を強制し、ネットワーク トラフィックをゲスト OS テナントに安全にルーティングします。</span><span class="sxs-lookup"><span data-stu-id="ef949-177">The Azure hypervisor enforces memory and process separation between VMs and securely routes network traffic to guest OS tenants.</span></span>

#### <a name="connectivity-to-the-cloud"></a><span data-ttu-id="ef949-178">クラウドへの接続</span><span class="sxs-lookup"><span data-stu-id="ef949-178">Connectivity to the cloud</span></span>
<span data-ttu-id="ef949-179">VDC では、お客様、パートナー、社内ユーザーにサービスを提供するために、外部ネットワークとの接続が必要です。</span><span class="sxs-lookup"><span data-stu-id="ef949-179">The VDC needs connectivity with external networks to offer services to customers, partners and/or internal users.</span></span> <span data-ttu-id="ef949-180">これは通常、インターネットへの接続だけでなく、オンプレミスのネットワークとデータ センターへの接続も意味します。</span><span class="sxs-lookup"><span data-stu-id="ef949-180">This usually means connectivity not only to the Internet, but also to on-premises networks and data centers.</span></span>

<span data-ttu-id="ef949-181">お客様は、セキュリティ ポリシーを作成し、ネットワーク仮想アプライアンス (フィルター処理およびトラフィック検査)、カスタム ルーティング ポリシー、ネットワーク フィルタリング (ユーザー定義ルーティングとネットワーク セキュリティ グループ) を使って、インターネットと双方向にアクセスできる特定の VDC でホストされたサービスおよびアクセス方法を制御できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-181">Customers can build their security policies to control what and how specific VDC hosted services are accessible to/from the Internet using Network Virtual Appliances (with filtering and traffic inspection), and custom routing policies and network filtering (User Defined Routing and Network Security Groups).</span></span>

<span data-ttu-id="ef949-182">多くの場合、企業では VDC をオンプレミスのデータ センターまたは他のリソースに接続する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-182">Enterprises often need to connect VDCs to on-premises data centers or other resources.</span></span> <span data-ttu-id="ef949-183">したがって、Azure とオンプレミスのネットワークの間の接続は、効果的なアーキテクチャを設計するときの不可欠な要素です。</span><span class="sxs-lookup"><span data-stu-id="ef949-183">The connectivity between Azure and on-premises networks is therefore a crucial aspect when designing an effective architecture.</span></span> <span data-ttu-id="ef949-184">Azure で VDC とオンプレミス間の相互接続を作成するには、インターネット経由とプライベート直接接続の 2 とおりの方法があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-184">Enterprises have two different ways to create an interconnection between VDC and on-premises in Azure: transit over the Internet and/or by private direct connections.</span></span>

<span data-ttu-id="ef949-185">[**Azure のサイト間 VPN**][VPN] は、セキュリティで保護された暗号化接続 (IPsec/IKE トンネル) によって確立される、オンプレミスのネットワークと VDC 間のインターネットを介した相互接続サービスです。</span><span class="sxs-lookup"><span data-stu-id="ef949-185">An [**Azure Site-to-Site VPN**][VPN] is an interconnection service over the Internet between on-premises networks and the VDC, established through secure encrypted connections (IPsec/IKE tunnels).</span></span> <span data-ttu-id="ef949-186">Azure のサイト間接続は、すべての接続がインターネット経由で接続するため、柔軟で、すばやく作成でき、追加調達の必要がありません。</span><span class="sxs-lookup"><span data-stu-id="ef949-186">Azure Site-to-Site connection is flexible, quick to create, and does not require any further procurement, as all connections connect over the internet.</span></span>

<span data-ttu-id="ef949-187">[**ExpressRoute**][ExR] は Azure の接続サービスであり、VDC とオンプレミスのネットワーク間にプライベート接続を作成できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-187">[**ExpressRoute**][ExR] is an Azure connectivity service that lets you create private connections between VDC and the on-premises networks.</span></span> <span data-ttu-id="ef949-188">ExpressRoute 接続はパブリック インターネットを使わず、高いセキュリティ、信頼性、速度 (最大 10 Gbps)、および一貫した待機時間を提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-188">ExpressRoute connections do not go over the public Internet, and offer higher security, reliability, and higher speeds (up to 10 Gbps) along with consistent latency.</span></span> <span data-ttu-id="ef949-189">ExpressRoute は VDC に非常に適しており、ExpressRoute ユーザーはプライベート接続に関連付けられたコンプライアンス規則の利点が得られます。</span><span class="sxs-lookup"><span data-stu-id="ef949-189">ExpressRoute is very useful for VDCs, as ExpressRoute customers can get the benefits of compliance rules associated with private connections.</span></span>

<span data-ttu-id="ef949-190">ExpressRoute 接続のデプロイでは、ExpressRoute サービス プロバイダーと連携する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-190">Deploying ExpressRoute connections involves engaging with an ExpressRoute service provider.</span></span> <span data-ttu-id="ef949-191">短時間で使い始める必要がある場合は、通常、最初にサイト間 VPN を使って VDC とオンプレミスのリソース間の接続を確立した後、ExpressRoute 接続に移行します。</span><span class="sxs-lookup"><span data-stu-id="ef949-191">For customers that need to start quickly, it is common to initially use Site-to-Site VPN to establish connectivity between the VDC and on-premises resources, and then migrate to ExpressRoute connection.</span></span>

#### <a name="connectivity-within-the-cloud"></a><span data-ttu-id="ef949-192">*クラウド内の接続*</span><span class="sxs-lookup"><span data-stu-id="ef949-192">*Connectivity within the cloud*</span></span>
<span data-ttu-id="ef949-193">[VNet][VNet] と [VNet ピアリング][VNetPeering] は、VDC 内の基本的なネットワーク接続サービスです。</span><span class="sxs-lookup"><span data-stu-id="ef949-193">[VNets][VNet] and [VNet Peering][VNetPeering] are the basic networking connectivity services inside a VDC.</span></span> <span data-ttu-id="ef949-194">VNet は VDC リソースの分離の自然な境界を保証し、VNet ピアリングは同じ Azure リージョン内またはリージョンをまたがる異なる VNet 間の相互通信を可能にします。</span><span class="sxs-lookup"><span data-stu-id="ef949-194">A VNet guarantees a natural boundary of isolation for VDC resources, and VNet peering allows intercommunication between different VNets within the same Azure region or even across regions.</span></span> <span data-ttu-id="ef949-195">VNet 内および VNet 間のトラフィック制御では、アクセス制御リスト ([ネットワーク セキュリティ グループ][NSG])、[ネットワーク仮想アプライアンス][NVA]、およびカスタム ルーティング テーブル ([UDR][UDR]) によって指定されたセキュリティ ルールのセットを一致させる必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-195">Traffic control inside a VNet and between VNets need to match a set of security rules specified through Access Control Lists ([Network Security Group][NSG]), [Network Virtual Appliances][NVA], and custom routing tables ([UDR][UDR]).</span></span>

## <a name="virtual-data-center-overview"></a><span data-ttu-id="ef949-196">仮想データ センターの概要</span><span class="sxs-lookup"><span data-stu-id="ef949-196">Virtual Data Center overview</span></span>

### <a name="topology"></a><span data-ttu-id="ef949-197">トポロジ</span><span class="sxs-lookup"><span data-stu-id="ef949-197">Topology</span></span>
<span data-ttu-id="ef949-198">"_ハブとスポーク_" は、単一の Azure リージョン内の仮想データ センターを拡張するためのモデルです。</span><span class="sxs-lookup"><span data-stu-id="ef949-198">_Hub and spokes_ is a model for extending a Virtual Data Center within a single Azure region.</span></span>

<span data-ttu-id="ef949-199">[![1]][1]</span><span class="sxs-lookup"><span data-stu-id="ef949-199">[![1]][1]</span></span>

<span data-ttu-id="ef949-200">ハブは、異なるゾーン (インターネット、オンプレミス、スポーク) の間の受信および送信トラフィックを制御および検査する中央ゾーンです。</span><span class="sxs-lookup"><span data-stu-id="ef949-200">The hub is the central zone that controls and inspects ingress and/or egress traffic between different zones: Internet, on-premises, and the spokes.</span></span> <span data-ttu-id="ef949-201">ハブとスポークのトポロジにより、IT 部門は、セキュリティ ポリシーを集中的に効率よく適用し、構成の誤りと露出の可能性を最小限に抑えることができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-201">The hub and spoke topology gives the IT department an effective way to enforce security policies in a central location, while reducing the potential for misconfiguration and exposure.</span></span>

<span data-ttu-id="ef949-202">ハブには、スポークによって消費される共通のサービス コンポーネントが含まれます。</span><span class="sxs-lookup"><span data-stu-id="ef949-202">The hub contains the common service components consumed by the spokes.</span></span> <span data-ttu-id="ef949-203">共通中央サービスの典型的な例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="ef949-203">Here are a few typical examples of common central services:</span></span>

-   <span data-ttu-id="ef949-204">スポークのワークロードにアクセスする前に信頼されていないネットワークからのサード パーティ アクセスのユーザー認証に必要な Windows Active Directory インフラストラクチャ (および関連する ADFS )</span><span class="sxs-lookup"><span data-stu-id="ef949-204">The Windows Active Directory infrastructure (with the related ADFS service) required for user authentication of third parties accessing from untrusted networks before getting access to the workloads in the spoke</span></span>
-   <span data-ttu-id="ef949-205">オンプレミスおよびインターネットのリソースにアクセスするための、スポーク内のワークロードの名前付けを解決する DNS サービス</span><span class="sxs-lookup"><span data-stu-id="ef949-205">A DNS service to resolve naming for the workload in the spokes, to access resources on-premises and on the Internet</span></span>
-   <span data-ttu-id="ef949-206">ワークロードにシングル サインオンを実装するための PKI インフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="ef949-206">A PKI infrastructure, to implement single sign-on on workloads</span></span>
-   <span data-ttu-id="ef949-207">スポークとインターネット間のフロー制御 (TCP または UDP)</span><span class="sxs-lookup"><span data-stu-id="ef949-207">Flow control (TCP/UDP) between the spokes and Internet</span></span>
-   <span data-ttu-id="ef949-208">スポークとオンプレミス間のフロー制御</span><span class="sxs-lookup"><span data-stu-id="ef949-208">Flow control between the spoke and on-premises</span></span>
-   <span data-ttu-id="ef949-209">必要な場合、スポークとスポークの間のフロー制御</span><span class="sxs-lookup"><span data-stu-id="ef949-209">If desired, flow control between one spoke and another</span></span>

<span data-ttu-id="ef949-210">VDC では、複数のスポーク間で共有ハブ インフラストラクチャを使用することで、全体的なコストを削減します。</span><span class="sxs-lookup"><span data-stu-id="ef949-210">The VDC reduces overall cost by using the shared hub infrastructure between multiple spokes.</span></span>

<span data-ttu-id="ef949-211">各スポークのロールは、異なる種類のワークロードをホストできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-211">The role of each spoke can be to host different types of workloads.</span></span> <span data-ttu-id="ef949-212">スポークは、同じワークロードの反復可能なデプロイ (たとえば、開発とテスト、ユーザー受け入れテスト、運用前環境、運用環境) に対してモジュール方式のアプローチを提供することもできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-212">The spokes can also provide a modular approach for repeatable deployments (for example, dev and test, User Acceptance Testing, pre-production, and production) of the same workloads.</span></span> <span data-ttu-id="ef949-213">スポークは、組織内で異なるグループを分離して有効にすることもできます (たとえば、DevOps グループ)。</span><span class="sxs-lookup"><span data-stu-id="ef949-213">The spokes can also be used to segregate and enable different groups within your organization (for example, DevOps groups).</span></span> <span data-ttu-id="ef949-214">スポーク内には、基本的なワークロードや、階層間のトラフィック制御を伴う複雑な多層ワークロードをデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-214">Inside a spoke, it is possible to deploy a basic workload or complex multi-tier workloads with traffic control between the tiers.</span></span>

#### <a name="subscription-limits-and-multiple-hubs"></a><span data-ttu-id="ef949-215">サブスクリプションの制限と複数のハブ</span><span class="sxs-lookup"><span data-stu-id="ef949-215">Subscription limits and multiple hubs</span></span>
<span data-ttu-id="ef949-216">Azure では、種類に関係なくすべてのコンポーネントが、Azure サブスクリプションにデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="ef949-216">In Azure, every component, whatever the type, is deployed in an Azure Subscription.</span></span> <span data-ttu-id="ef949-217">異なる Azure サブスクリプションに Azure コンポーネントを分離することで、差別化されたレベルのアクセスと承認の設定など、異なる LOB の要件を満たすことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-217">The isolation of Azure components in different Azure subscriptions can satisfy the requirements of different LOBs, such as setting up differentiated levels of access and authorization.</span></span>

<span data-ttu-id="ef949-218">1 つの VDC で多数のスポークにスケールアップできますが、他の IT システムと同様に、プラットフォームの制限があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-218">A single VDC can scale up to large number of spokes, although, as with every IT system, there are platforms limits.</span></span> <span data-ttu-id="ef949-219">ハブのデプロイは特定の Azure サブスクリプションにバインドされ、サブスクリプションには制限事項と上限があります (たとえば、VNet ピアリングの最大数、詳しくは「[Azure サブスクリプションとサービスの制限、クォータ、制約][Limits]」を参照)。</span><span class="sxs-lookup"><span data-stu-id="ef949-219">The hub deployment is bound to a specific Azure subscription, which has restrictions and limits (for example, a max number of VNet peerings - see [Azure subscription and service limits, quotas, and constraints][Limits] for details).</span></span> <span data-ttu-id="ef949-220">制限が問題になる可能性がある場合は、単一のハブとスポークからハブとスポークのクラスターにモデルを拡張することによって、アーキテクチャをさらに拡張できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-220">In cases where limits may be an issue, the architecture can scale up further by extending the model from a single hub-spokes to a cluster of hub and spokes.</span></span> <span data-ttu-id="ef949-221">1 つまたは複数の Azure リージョン内の複数のハブを、VNet ピアリング、ExpressRoute またはサイト間 VPN を使って相互に接続できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-221">Multiple hubs in one or more Azure regions can be interconnected using VNet Peering, ExpressRoute, or site-to-site VPN.</span></span>

<span data-ttu-id="ef949-222">[![2]][2]</span><span class="sxs-lookup"><span data-stu-id="ef949-222">[![2]][2]</span></span>

<span data-ttu-id="ef949-223">複数のハブの導入は、システムのコストと管理作業の増加をもたらし、スケーラビリティ (例: システムの制限または冗長性) およびリージョンのレプリケーション (例: エンドユーザー パフォーマンスまたはディザスター リカバリー) によってのみ正当化されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-223">The introduction of multiple hubs increases the cost and management effort of the system and would only be justified by scalability (examples: system limits or redundancy) and regional replication (examples: end-user performance or disaster recovery).</span></span> <span data-ttu-id="ef949-224">複数のハブが必要なシナリオでは、運用を容易にするため、すべてのハブで同じサービスのセットを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-224">In scenarios requiring multiple hubs, all the hubs should strive to offer the same set of services for operational ease.</span></span>

#### <a name="interconnection-between-spokes"></a><span data-ttu-id="ef949-225">スポーク間の相互接続</span><span class="sxs-lookup"><span data-stu-id="ef949-225">Interconnection between spokes</span></span>
<span data-ttu-id="ef949-226">1 つのスポーク内に、複雑な多階層のワークロードを実装することができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-226">Inside a single spoke, it is possible to implement complex multi-tiers workloads.</span></span> <span data-ttu-id="ef949-227">多階層の構成は、同じ VNet 内のサブネット (すべての階層に対して 1 つ) を使い、NSG を使ってフローをフィルター処理することによって、実装できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-227">Multi-tier configurations can be implemented using subnets (one for every tier) in the same VNet and filtering the flows using NSGs.</span></span>

<span data-ttu-id="ef949-228">一方、アーキテクトは、複数の VNet に多階層ワークロードをデプロイしたい場合があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-228">On the other hand, an architect may want to deploy a multi-tier workload across multiple VNets.</span></span> <span data-ttu-id="ef949-229">VNet ピアリングを使うと、スポークは、同じハブまたは異なるハブの他のスポークに接続できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-229">Using VNet peering, spokes can connect to other spokes in the same hub or different hubs.</span></span> <span data-ttu-id="ef949-230">このシナリオの一般的な例は、アプリケーション処理サーバーが 1 つのスポーク (VNet) にあり、データベースが別のスポーク (VNet) にデプロイされている場合です。</span><span class="sxs-lookup"><span data-stu-id="ef949-230">A typical example of this scenario is the case where application processing servers are in one spoke (VNet), while the database is deployed in a different spoke (VNet).</span></span> <span data-ttu-id="ef949-231">この場合は、VNet ピアリングでスポークを相互接続することにより、ハブを通過しなくて済むようにすると簡単です。</span><span class="sxs-lookup"><span data-stu-id="ef949-231">In this case, it is easy to interconnect the spokes with VNet peering and thereby avoid transiting through the hub.</span></span> <span data-ttu-id="ef949-232">アーキテクチャとセキュリティを注意深く検討し、ハブをバイパスしても、ハブにしか存在しない重要なセキュリティまたは監査ポイントがバイパスされないことを、確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-232">A careful architecture and security review should be performed to ensure that bypassing the hub doesn’t bypass important security or auditing points that may only exist in the hub.</span></span>

<span data-ttu-id="ef949-233">[![3]][3]</span><span class="sxs-lookup"><span data-stu-id="ef949-233">[![3]][3]</span></span>

<span data-ttu-id="ef949-234">スポークは、ハブとして機能するスポークに相互接続することもできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-234">Spokes can also be interconnected to a spoke that acts as a hub.</span></span> <span data-ttu-id="ef949-235">この方法では 2 レベルの階層が作成され、上位レベル (レベル 0) のスポークが、階層の下位レベル (レベル 1) のスポークのハブになります。</span><span class="sxs-lookup"><span data-stu-id="ef949-235">This approach creates a two-level hierarchy: the spoke in the higher level (level 0) become the hub of lower spokes (level 1) of the hierarchy.</span></span> <span data-ttu-id="ef949-236">VDC のスポークは、オンプレミスのネットワークまたはインターネットに到達するために、中央のハブにトラフィックを転送する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-236">The spokes of VDC need to forward the traffic to the central hub to reach out either to the on-premises network or internet.</span></span> <span data-ttu-id="ef949-237">2 レベルのハブのアーキテクチャでは複雑なルーティングが導入され、単純なハブ スポーク関係のメリットが失われます。</span><span class="sxs-lookup"><span data-stu-id="ef949-237">An architecture with two levels of hub introduces complex routing that removes the benefits of a simple hub-spoke relationship.</span></span>

<span data-ttu-id="ef949-238">Azure では複雑なトポロジを構成できますが、VDC の概念の中核となる原則の 1 つは再現性と単純さです。</span><span class="sxs-lookup"><span data-stu-id="ef949-238">Although Azure allows complex topologies, one of the core principles of the VDC concept is repeatability and simplicity.</span></span> <span data-ttu-id="ef949-239">管理作業を最小限に抑えるために、単純なハブ スポーク設計が推奨される VDC 参照アーキテクチャです。</span><span class="sxs-lookup"><span data-stu-id="ef949-239">To minimize management effort, the simple hub-spoke design is the recommended VDC reference architecture.</span></span>

### <a name="components"></a><span data-ttu-id="ef949-240">コンポーネント</span><span class="sxs-lookup"><span data-stu-id="ef949-240">Components</span></span>
<span data-ttu-id="ef949-241">仮想データ センターを構成する 4 種類の基本的なコンポーネントは、**インフラストラクチャ**、**境界ネットワーク**、**ワークロード**、**監視**です。</span><span class="sxs-lookup"><span data-stu-id="ef949-241">A Virtual Data Center is made up of four basic component types: **Infrastructure**, **Perimeter Networks**, **Workloads**, and **Monitoring**.</span></span>

<span data-ttu-id="ef949-242">各コンポーネントの種類は、さまざまな Azure の機能とリソースで構成されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-242">Each component type consists of various Azure features and resources.</span></span> <span data-ttu-id="ef949-243">VDC は、複数のコンポーネントの種類のインスタンスと、同じコンポーネントの種類の複数のバリエーションで構成されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-243">Your VDC is made up of instances of multiple components types and multiple variations of the same component type.</span></span> <span data-ttu-id="ef949-244">たとえば、異なるアプリケーションを表す多数の異なる論理的に分離されたワークロード インスタンスを使うことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-244">For instance, you may have many different, logically separated, workload instances that represent different applications.</span></span> <span data-ttu-id="ef949-245">これらのさまざまなコンポーネントの種類とインスタンスを使って、最終的に VDC を構築します。</span><span class="sxs-lookup"><span data-stu-id="ef949-245">You use these different component types and instances to ultimately build the VDC.</span></span>

<span data-ttu-id="ef949-246">[![4]][4]</span><span class="sxs-lookup"><span data-stu-id="ef949-246">[![4]][4]</span></span>

<span data-ttu-id="ef949-247">VDC の上記のおおまかなアーキテクチャでは、ハブ スポーク トポロジのさまざまなゾーンで使用されるさまざまなコンポーネントの種類が示されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-247">The preceding high-level architecture of a VDC shows different component types used in different zones of the hub-spokes topology.</span></span> <span data-ttu-id="ef949-248">図では、アーキテクチャのさまざまな部分にインフラストラクチャ コンポーネントが示されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-248">The diagram shows infrastructure components in various parts of the architecture.</span></span>

<span data-ttu-id="ef949-249">オンプレミスの DC または VDC の場合、アクセス権と権限をグループ ベースにすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ef949-249">As a good practice (for an on-premises DC or VDC) access rights and privileges should be group-based.</span></span> <span data-ttu-id="ef949-250">個々のユーザーの代わりにグループとして扱うと、チーム間で一貫したアクセス ポリシーを維持でき、構成エラーを最小限に抑えるのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ef949-250">Dealing with groups, instead of individual users helps maintaining access policies consistently across teams and aids in minimizing configuration errors.</span></span> <span data-ttu-id="ef949-251">適切なグループにユーザーを割り当てたり、グループからユーザーを削除することで、特定のユーザーの権限を最新に保つことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-251">Assigning and removing users to and from appropriate groups helps keeping the privileges of a specific user up-to-date.</span></span>

<span data-ttu-id="ef949-252">各ロール グループの名前に固有のプレフィックスを付けることで、グループとワークロードの関連付けを識別しやすくなります。</span><span class="sxs-lookup"><span data-stu-id="ef949-252">Each role group should have a unique prefix on their names making it easy to identify which group is associated with which workload.</span></span> <span data-ttu-id="ef949-253">たとえば、認証サービスをホストしているワークロードのグループには、*AuthServiceNetOps、AuthServiceSecOps、AuthServiceDevOps、AuthServiceInfraOps* といった名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="ef949-253">For instance, a workload hosting an authentication service might have groups named *AuthServiceNetOps, AuthServiceSecOps, AuthServiceDevOps, and AuthServiceInfraOps.*</span></span> <span data-ttu-id="ef949-254">同様に、集中化されたロールや、特定のサービスに関係のないロールの場合は、"Corp" というプレフィックスを付けます (例: *CorpNetOps*)。</span><span class="sxs-lookup"><span data-stu-id="ef949-254">Likewise for centralized roles, or roles not related to a specific service, could be prefaced with “Corp”, *CorpNetOps* for example.</span></span>

<span data-ttu-id="ef949-255">多くの組織では、次のグループのバリエーションを使って、ロールが大きく分類されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-255">Many organizations use a variation of the following groups to provide a major breakdown of roles:</span></span>

-   <span data-ttu-id="ef949-256">"*中央 IT グループ (Corp)*" には、インフラストラクチャ (ネットワークやセキュリティなど) を制御するための所有者権限があり、そのため、サブスクリプションの共同作業者のロール (およびハブの制御) およびスポークのネットワーク共同作成者権限を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-256">The *central IT group (Corp)* has the ownership rights to control infrastructure (such as networking and security) components, and therefore needs to have the role of contributor on the subscription (and have control of the hub) and network contributor rights in the spokes.</span></span> <span data-ttu-id="ef949-257">大きな組織では、これらの管理責任が、ネットワーク運用 (CorpNetOps) グループ (ネットワークだけを担当) やセキュリティ運用 (CorpSecOps) グループ (ファイアウォールとセキュリティ ポリシーを担当) などの複数のチームに分割されることがよくあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-257">Large organization frequently split up these management responsibilities between multiple teams such as; a Network Operations (CorpNetOps) group (with exclusive focus on networking) and a Security Operations (CorpSecOps) group (responsible for firewall and security policy).</span></span> <span data-ttu-id="ef949-258">この場合、カスタム ロールの割り当て用に 2 つの異なるグループを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-258">In this specific case, two different groups need to be created for assignment of these custom roles.</span></span>
-   <span data-ttu-id="ef949-259">"*開発とテスト (AppDevOps) グループ*" には、ワークロード (アプリまたはサービス) をデプロイする責任があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-259">The *dev & test (AppDevOps) group* has the responsibility to deploy workloads (Apps or Services).</span></span> <span data-ttu-id="ef949-260">このグループは、IaaS デプロイの仮想マシン共同作成者のロール、および 1 つ以上の PaaS 共同作成者のロールを持ちます (「[Azure のロールベースのアクセス制御のための組み込みロール][Roles]」を参照)。</span><span class="sxs-lookup"><span data-stu-id="ef949-260">This group takes the role of Virtual Machine Contributor for IaaS deployments and/or one or more PaaS contributor’s roles (see [Built-in roles for Azure Role-Based Access Control][Roles]).</span></span> <span data-ttu-id="ef949-261">場合によっては、開発とテスト チームは、ハブまたは特定のスポーク内のセキュリティ ポリシー (NSG) およびルーティング ポリシー (UDR) を見ることができる必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-261">Optionally the dev & test team may need to have visibility on security policies (NSGs) and routing policies (UDR) inside the hub or a specific spoke.</span></span> <span data-ttu-id="ef949-262">そのため、ワークロードの共同作成者のロールに加えて、このグループにはネットワーク リーダーのロールも必要です。</span><span class="sxs-lookup"><span data-stu-id="ef949-262">Therefore, in addition to the roles of contributor for workloads, this group would also need the role of Network Reader.</span></span>
-   <span data-ttu-id="ef949-263">"*運用とメンテナンス グループ (CorpInfraOps または AppInfraOps)*" には、運用環境のワークロードを管理する責任があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-263">The *operation and maintenance group (CorpInfraOps or AppInfraOps)* have the responsibility of managing workloads in production.</span></span> <span data-ttu-id="ef949-264">このグループは、運用サブスクリプションのワークロードのサブスクリプション共同作成者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-264">This group needs to be a subscription contributor on workloads in any production subscriptions.</span></span> <span data-ttu-id="ef949-265">また、運用環境で潜在的な構成の問題を修正するために、運用環境のサブスクリプション共同作成者と中央ハブのサブスクリプション共同作成者のロールを持つ追加エスカレーション サポート チーム グループが必要かどうかを評価することもあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-265">Some organizations might also evaluate if they need an additional escalation support team group with the role of subscription contributor in production and in the central hub subscription, in order to fix potential configuration issues in the production environment.</span></span>

<span data-ttu-id="ef949-266">VDC は、ハブを管理する中央の IT グループ用に作成されたグループがワークロード レベルで対応するグループを持つように構成されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-266">A VDC is structured so that groups created for the central IT groups managing the hub have corresponding groups at the workload level.</span></span> <span data-ttu-id="ef949-267">ハブ リソースを管理するだけでなくは、中央 IT グループのみが、サブスクリプションでの外部アクセスと最上位レベルのアクセス許可を制御することができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-267">In addition to managing hub resources only the central IT groups would be able to control external access and top-level permissions on the subscription.</span></span> <span data-ttu-id="ef949-268">ただし、ワークロード グループは、中央 IT でそれぞれの VNet のリソースとアクセス許可を独立して制御できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-268">However, workload groups would be able to control resources and permissions of their VNet independently on Central IT.</span></span>

<span data-ttu-id="ef949-269">VDC は、さまざまな基幹業務 (LOB) の複数のプロジェクトを安全にホストできるようにパーティション分割する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-269">The VDC needs to be partitioned to securely host multiple projects across different Line-of-Businesses (LOBs).</span></span> <span data-ttu-id="ef949-270">すべてのプロジェクトには、異なる分離環境 (開発、UAT、運用) が必要です。</span><span class="sxs-lookup"><span data-stu-id="ef949-270">All projects require different isolated environments (Dev, UAT, production).</span></span> <span data-ttu-id="ef949-271">これらの環境ごとに Azure サブスクリプションを分けると、自然な分離が提供されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-271">Separate Azure subscriptions for each of these environments provide natural isolation.</span></span>

<span data-ttu-id="ef949-272">[![5]][5]</span><span class="sxs-lookup"><span data-stu-id="ef949-272">[![5]][5]</span></span>

<span data-ttu-id="ef949-273">上の図は、Azure のコンポーネントがデプロイされている組織のプロジェクト、ユーザー、グループ、環境の間の関係を示しています。</span><span class="sxs-lookup"><span data-stu-id="ef949-273">The preceding diagram shows the relationship between an organization's projects, users, groups, and the environments where the Azure components are deployed.</span></span>

<span data-ttu-id="ef949-274">通常、IT の環境 (または階層) は、複数のアプリケーションがデプロイされて実行されるシステムです。</span><span class="sxs-lookup"><span data-stu-id="ef949-274">Typically in IT, an environment (or tier) is a system in which multiple applications are deployed and executed.</span></span> <span data-ttu-id="ef949-275">大規模な企業では、開発環境 (変更が行われてテストされる場所) と運用環境 (エンドユーザーが使うもの) が使われます。</span><span class="sxs-lookup"><span data-stu-id="ef949-275">Large enterprises use a development environment (where changes originally made and tested) and a production environment (what end-users use).</span></span> <span data-ttu-id="ef949-276">これらの環境は分離され、多くの場合、その間に複数のステージング環境があり、段階的にデプロイ (ロールアウト)、テスト、および問題が発生した場合のロールバックを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-276">Those environments are separated, often with several staging environments in between them to allow phased deployment (rollout), testing, and rollback in case of problems.</span></span> <span data-ttu-id="ef949-277">デプロイ アーキテクチャは大きく異なりますが、通常、開発 (DEV) で始まって運用 (PROD) で終わる基本的なプロセスは同じです。</span><span class="sxs-lookup"><span data-stu-id="ef949-277">Deployment architectures vary significantly, but usually the basic process of starting at development (DEV) and ending at production (PROD) is still followed.</span></span>

<span data-ttu-id="ef949-278">この種の多階層環境の一般的なアーキテクチャは、DevOps (開発とテスト)、UAT (ステージング)、および運用環境で構成されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-278">A common architecture for these types of multi-tier environments consists of DevOps (development and testing), UAT (staging), and production environments.</span></span> <span data-ttu-id="ef949-279">組織では、1 つまたは複数の Azure AD テナントを利用して、これらの環境に対するアクセスと権限を定義できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-279">Organizations can leverage single or multiple Azure AD tenants to define access and rights to these environments.</span></span> <span data-ttu-id="ef949-280">前の図では、DevOps および UAT 用と運用専用の 2 つ異なる Azure AD テナントが使われている場合が示されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-280">The previous diagram shows a case where two different Azure AD tenants are used: one for DevOps and UAT, and the other exclusively for production.</span></span>

<span data-ttu-id="ef949-281">異なる Azure AD テナントが存在すると、必然的に環境間が分離されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-281">The presence of different Azure AD tenants enforces the separation between environments.</span></span> <span data-ttu-id="ef949-282">異なる AD テナントにアクセスするために異なる URI を使って認証する必要のある同じユーザー グループ (たとえば、中央 IT) は、プロジェクトの DevOps または運用環境のロールまたはアクセス許可を変更します。</span><span class="sxs-lookup"><span data-stu-id="ef949-282">The same group of users (as an example, Central IT) needs to authenticate using a different URI to access a different AD tenant modify the roles or permissions of either the DevOps or production environments of a project.</span></span> <span data-ttu-id="ef949-283">異なる環境にアクセスするために異なるユーザー認証が存在すると、人的エラーによって起こりうる停止や他の問題が減ります。</span><span class="sxs-lookup"><span data-stu-id="ef949-283">The presence of different user authentication to access different environments reduces possible outages and other issues caused by human errors.</span></span>

#### <a name="component-type-infrastructure"></a><span data-ttu-id="ef949-284">コンポーネントの種類: インフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="ef949-284">Component type: Infrastructure</span></span>
<span data-ttu-id="ef949-285">このコンポーネントの種類には、ほとんどのサポート インフラストラクチャが存在します。</span><span class="sxs-lookup"><span data-stu-id="ef949-285">This component type is where most of the supporting infrastructure resides.</span></span> <span data-ttu-id="ef949-286">また、中央 IT、セキュリティ、コンプライアンスのチームが最も多くの時間を費やす場所でもあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-286">It's also where your centralized IT, Security, and/or Compliance teams spend most of their time.</span></span>

<span data-ttu-id="ef949-287">[![6]][6]</span><span class="sxs-lookup"><span data-stu-id="ef949-287">[![6]][6]</span></span>

<span data-ttu-id="ef949-288">インフラストラクチャ コンポーネントは、VDC のさまざまなコンポーネント間の相互接続を提供し、ハブとスポークの両方に存在します。</span><span class="sxs-lookup"><span data-stu-id="ef949-288">Infrastructure components provide an interconnection between the different components of a VDC, and are present in both the hub and the spokes.</span></span> <span data-ttu-id="ef949-289">インフラストラクチャ コンポーネントを管理および保守する責任は、通常、中央 IT およびセキュリティ チームに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="ef949-289">The responsibility for managing and maintaining the infrastructure components is typically assigned to the central IT and/or security team.</span></span>

<span data-ttu-id="ef949-290">IT インフラストラクチャ チームの主要なタスクの 1 つは、企業全体にわたって一貫した IP アドレス スキーマを保証することです。</span><span class="sxs-lookup"><span data-stu-id="ef949-290">One of the primary tasks of the IT infrastructure team is to guarantee the consistency of IP address schemas across the enterprise.</span></span> <span data-ttu-id="ef949-291">VDC に割り当てられたプライベート IP アドレス空間は、一貫性があり、オンプレミスのネットワークで割り当てられたプライベート IP アドレスと重複していない必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-291">The private IP address space assigned to the VDC needs to be consistent and NOT overlapping with private IP addresses assigned on your on-premises networks.</span></span>

<span data-ttu-id="ef949-292">オンプレミスのエッジ ルーター上または Azure 環境内の NAT は、IP アドレスの競合を回避できますが、インフラストラクチャ コンポーネントが複雑になります。</span><span class="sxs-lookup"><span data-stu-id="ef949-292">While NAT on the on-premises edge routers or in Azure environments can avoid IP address conflicts, it adds complications to your infrastructure components.</span></span> <span data-ttu-id="ef949-293">管理の簡単さが VDC の主な目標の 1 つなので、NAT を使って IP の問題を処理することは推奨されるソリューションではありません。</span><span class="sxs-lookup"><span data-stu-id="ef949-293">Simplicity of management is one of the key goals of VDC, so using NAT to handle IP concerns is not a recommended solution.</span></span>

<span data-ttu-id="ef949-294">インフラストラクチャ コンポーネントには次の機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="ef949-294">Infrastructure components contain the following functionality:</span></span>

-   <span data-ttu-id="ef949-295">[**ID とディレクトリ サービス**][AAD]。</span><span class="sxs-lookup"><span data-stu-id="ef949-295">[**Identity and directory services**][AAD].</span></span> <span data-ttu-id="ef949-296">Azure のすべてのリソース種類へのアクセスは、ディレクトリ サービスに格納された ID によって制御されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-296">Access to every resource type in Azure is controlled by an identity stored in a directory service.</span></span> <span data-ttu-id="ef949-297">ディレクトリ サービスは、ユーザーのリストだけでなく、特定の Azure サブスクリプション内のリソースへのアクセス権も格納しています。</span><span class="sxs-lookup"><span data-stu-id="ef949-297">The directory service stores not only the list of users, but also the access rights to resources in a specific Azure subscription.</span></span> <span data-ttu-id="ef949-298">これらのサービスは、クラウドのみに存在することも、Active Directory に格納されたオンプレミスの ID と同期することもできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-298">These services can exist cloud-only, or they can be synchronized with on-premises identity stored in Active Directory.</span></span>
-   <span data-ttu-id="ef949-299">[**Virtual Network**][VPN]。</span><span class="sxs-lookup"><span data-stu-id="ef949-299">[**Virtual Network**][VPN].</span></span> <span data-ttu-id="ef949-300">Virtual Network は、VDC の主要コンポーネントの 1 つであり、Azure プラットフォーム上にトラフィックの分離境界を作成できるようにします。</span><span class="sxs-lookup"><span data-stu-id="ef949-300">Virtual Networks are one of main components of a VDC, and enable you to create a traffic isolation boundary on the Azure platform.</span></span> <span data-ttu-id="ef949-301">Virtual Network は、1 つまたは複数の仮想ネットワーク セグメントで構成され、それぞれが特定の IP ネットワーク プレフィックス (サブネット) を持ちます。</span><span class="sxs-lookup"><span data-stu-id="ef949-301">A Virtual Network is composed of a single or multiple virtual network segments, each with a specific IP network prefix (a subnet).</span></span> <span data-ttu-id="ef949-302">Virtual Network では、IaaS 仮想マシンと PaaS サービスがプライベート通信を確立できる、内部の境界領域が定義されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-302">The Virtual Network defines an internal perimeter area where IaaS virtual machines and PaaS services can establish private communications.</span></span> <span data-ttu-id="ef949-303">ある仮想ネットワーク内のVM (および PaaS サービス) と異なる仮想ネットワーク内の VM (および PaaS サービス) は、両方の仮想ネットワークが同じ顧客によって同じサブスクリプション下で作成された場合でも、直接通信することはできません。</span><span class="sxs-lookup"><span data-stu-id="ef949-303">VMs (and PaaS services) in one virtual network cannot communicate directly to VMs (and PaaS services) in a different virtual network, even if both virtual networks are created by the same customer, under the same subscription.</span></span> <span data-ttu-id="ef949-304">分離は、顧客の VM と通信が仮想ネットワーク内でプライベートであることを保証する重要な特性です。</span><span class="sxs-lookup"><span data-stu-id="ef949-304">Isolation is a critical property that ensures customer VMs and communication remains private within a virtual network.</span></span>
-   <span data-ttu-id="ef949-305">[**UDR**][UDR]。</span><span class="sxs-lookup"><span data-stu-id="ef949-305">[**UDR**][UDR].</span></span> <span data-ttu-id="ef949-306">Virtual Network 内のトラフィックは、システム ルーティング テーブルに基づいて既定でルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="ef949-306">Traffic in a Virtual Network is routed by default based on the system routing table.</span></span> <span data-ttu-id="ef949-307">ユーザー定義ルートはカスタム ルーティング テーブルであり、ネットワーク管理者はそれを 1 つまたは複数のサブネットに関連付けることで、システム ルーティング テーブルの動作を上書きし、仮想ネットワーク内の通信パスを定義することができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-307">A User Define Route is a custom routing table that network administrators can associate to one or more subnets to overwrite the behavior of the system routing table and define a communication path within a virtual network.</span></span> <span data-ttu-id="ef949-308">UDR が存在すると、スポークからのエグレス トラフィックが特定のカスタム VM を通過し、ネットワーク仮想アプライアンスとロード バランサーがハブとスポークに存在することが保証されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-308">The presence of UDRs guarantees that egress traffic from the spoke transit through specific custom VMs and/or Network Virtual Appliances and load balancers present in the hub and in the spokes.</span></span>
-   <span data-ttu-id="ef949-309">[**NSG**][NSG]。</span><span class="sxs-lookup"><span data-stu-id="ef949-309">[**NSG**][NSG].</span></span> <span data-ttu-id="ef949-310">ネットワーク セキュリティ グループは、IP 送信元、IP 送信先、プロトコル、IP 送信元ポート、および IP 送信先ポートのフィルタリングとして動作するセキュリティ規則のリストです。</span><span class="sxs-lookup"><span data-stu-id="ef949-310">A Network Security Group is a list of security rules that act as traffic filtering on IP Sources, IP Destination, Protocols, IP Source Ports, and IP Destination ports.</span></span> <span data-ttu-id="ef949-311">NSG は、サブネットと、Azure VM に関連付けられた仮想 NIC カードの、どちらか一方または両方に適用できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-311">The NSG can be applied to a subnet, a Virtual NIC card associated with an Azure VM, or both.</span></span> <span data-ttu-id="ef949-312">NSG は、ハブとスポークに正しいフロー制御を実装するうえで不可欠です。</span><span class="sxs-lookup"><span data-stu-id="ef949-312">The NSGs are essential to implement a correct flow control in the hub and in the spokes.</span></span> <span data-ttu-id="ef949-313">NSG によって提供されるセキュリティのレベルは、どのポートをどのような目的で開くかによって決まります。</span><span class="sxs-lookup"><span data-stu-id="ef949-313">The level of security afforded by the NSG is a function of which ports you open, and for what purpose.</span></span> <span data-ttu-id="ef949-314">お客様は、IPtables や Windows ファイアウォールなどのホストベースのファイアウォールで、VM ごとの追加フィルターを適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-314">Customers should apply additional per-VM filters with host-based firewalls such as IPtables or the Windows Firewall.</span></span>
-   <span data-ttu-id="ef949-315">[**DNS**][DNS]。</span><span class="sxs-lookup"><span data-stu-id="ef949-315">[**DNS**][DNS].</span></span> <span data-ttu-id="ef949-316">VDC の VNet 内のリソースの名前解決は、DNS によって提供されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-316">The name resolution of resources in the VNets of a VDC is provided through DNS.</span></span> <span data-ttu-id="ef949-317">Azure は、 [パブリック][DNS]と[プライベート][PrivateDNS]の両方の名前解決に DNS サービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-317">Azure provides DNS services for both [Public][DNS] and [Private][PrivateDNS] name resolution.</span></span> <span data-ttu-id="ef949-318">プライベート ゾーンは、仮想ネットワーク内での名前解決と仮想ネットワーク間での名前解決を両方提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-318">Private zones provide name resolution both within a virtual network and across virtual networks.</span></span> <span data-ttu-id="ef949-319">プライベート ゾーンは、同じリージョンの複数の仮想ネットワークをまたぐだけでなく、複数のリージョンおよびサブスクリプションをまたぐことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-319">You can have private zones not only span across virtual networks in the same region, but also across regions and subscriptions.</span></span> <span data-ttu-id="ef949-320">パブリック解決の場合、Azure DNS は、DNS ドメインのホスティング サービスであり、Microsoft Azure インフラストラクチャを使用した名前解決を提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-320">For public resolution, Azure DNS provides a hosting service for DNS domains, providing name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="ef949-321">Azure でドメインをホストすることで、その他の Azure サービスと同じ資格情報、API、ツール、課金情報を使用して DNS レコードを管理できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-321">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>
-   <span data-ttu-id="ef949-322">[**サブスクリプション**][SubMgmt]と[**リソース グループ管理**][RGMgmt]。</span><span class="sxs-lookup"><span data-stu-id="ef949-322">[**Subscription**][SubMgmt] and [**Resource Group Management**][RGMgmt].</span></span> <span data-ttu-id="ef949-323">サブスクリプションでは、Azure にリソースの複数のグループを作成する自然な境界が定義されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-323">A subscription defines a natural boundary to create multiple groups of resources in Azure.</span></span> <span data-ttu-id="ef949-324">サブスクリプション内のリソースは、リソース グループと呼ばれる論理コンテナーにまとめられています。</span><span class="sxs-lookup"><span data-stu-id="ef949-324">Resources in a subscription are assembled together in logical containers named Resource Groups.</span></span> <span data-ttu-id="ef949-325">リソース グループは、VDC のリソースを整理するための論理グループを表します。</span><span class="sxs-lookup"><span data-stu-id="ef949-325">The Resource Group represents a logical group to organize the resources of a VDC.</span></span>
-   <span data-ttu-id="ef949-326">[**RBAC**][RBAC]。</span><span class="sxs-lookup"><span data-stu-id="ef949-326">[**RBAC**][RBAC].</span></span> <span data-ttu-id="ef949-327">RBAC を使うと、組織のロールと特定の Azure リソースにアクセスするための権限をマップすることができ、ユーザーをアクションの特定のサブセットのみに制限することができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-327">Through RBAC, it is possible to map organizational role along with rights to access specific Azure resources, allowing you to restrict users to only a certain subset of actions.</span></span> <span data-ttu-id="ef949-328">RBAC では、関連するスコープ内のユーザー、グループ、アプリケーションに適切なロールを割り当てることで、アクセス権を付与できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-328">With RBAC, you can grant access by assigning the appropriate role to users, groups, and applications within the relevant scope.</span></span> <span data-ttu-id="ef949-329">ロール割り当てのスコープには、Azure サブスクリプション、リソース グループ、または単独のリソースを指定できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-329">The scope of a role assignment can be an Azure subscription, a resource group, or a single resource.</span></span> <span data-ttu-id="ef949-330">RBAC では、アクセス許可を継承できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-330">RBAC allows inheritance of permissions.</span></span> <span data-ttu-id="ef949-331">親スコープでロールが割り当てられると、その親に含まれる子へのアクセス権も付与されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-331">A role assigned at a parent scope also grants access to the children contained within it.</span></span> <span data-ttu-id="ef949-332">RBAC を使って、職務を分離し、職務に必要なアクセス許可のみをユーザーに付与することができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-332">Using RBAC, you can segregate duties and grant only the amount of access to users that they need to perform their jobs.</span></span> <span data-ttu-id="ef949-333">たとえば、RBAC を使って、ある従業員にはサブスクリプションで仮想マシンを管理できるようにし、他の従業員にも同じサブスクリプション内で SQL DB を管理できるようにします。</span><span class="sxs-lookup"><span data-stu-id="ef949-333">For example, use RBAC to let one employee manage virtual machines in a subscription, while another can manage SQL DBs within the same subscription.</span></span>
-   <span data-ttu-id="ef949-334">[**VNet ピアリング**][VNetPeering]。</span><span class="sxs-lookup"><span data-stu-id="ef949-334">[**VNet Peering**][VNetPeering].</span></span> <span data-ttu-id="ef949-335">VDC のインフラストラクチャの作成に使用される基本的な機能は、VNet ピアリングです。これは、Azure データ センターのネットワークを介して、あるいはリージョンをまたがる Azure の世界規模のバックボーンを使用して、同じリージョンの 2 つの仮想ネットワーク (VNet) を接続するメカニズムです。</span><span class="sxs-lookup"><span data-stu-id="ef949-335">The fundamental feature used to create the infrastructure of a VDC is VNet Peering, a mechanism that connects two virtual networks (VNets) in the same region through the Azure data center network, or using the Azure world-wide backbone across regions.</span></span>

#### <a name="component-type-perimeter-networks"></a><span data-ttu-id="ef949-336">コンポーネントの種類: 境界ネットワーク</span><span class="sxs-lookup"><span data-stu-id="ef949-336">Component Type: Perimeter Networks</span></span>
<span data-ttu-id="ef949-337">[境界ネットワーク][DMZ] コンポーネント (DMZ ネットワークとも呼ばれます) を使うと、オンプレミス ネットワークまたは物理データ センター ネットワークとのネットワーク接続、およびインターネットとの間の双方向の接続を提供できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-337">[Perimeter network][DMZ] components (also known as a DMZ network) allow you to provide network  connectivity with your on-premises or physical data center networks, along with any connectivity to and from the Internet.</span></span> <span data-ttu-id="ef949-338">このコンポーネントは、ネットワークおよびセキュリティ チームが最も多くの時間を費やす場所でもあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-338">It's also where your network and security teams likely spend most of their time.</span></span>

<span data-ttu-id="ef949-339">受信パケットは、スポークのバックエンド サーバーに到達するまでに、ハブのセキュリティ アプライアンス (ファイアウォール、IDS、IPS など) を通過する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-339">Incoming packets should flow through the security appliances in the hub, such as the firewall, IDS, and IPS, before reaching the back-end servers in the spokes.</span></span> <span data-ttu-id="ef949-340">また、ワークロードからインターネットへのパケットも、ネットワークから送信される前に、ポリシーの適用、検査、監査を行うために境界ネットワーク内のセキュリティ アプライアンスを通過する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-340">Internet-bound packets from the workloads should also flow through the security appliances in the perimeter network for policy enforcement, inspection, and auditing purposes, before leaving the network.</span></span>

<span data-ttu-id="ef949-341">境界ネットワーク コンポーネントは、次の機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-341">Perimeter network components provide the following features:</span></span>

-   <span data-ttu-id="ef949-342">[Virtual Network][VNet]、[UDR][UDR]、[NSG][NSG]</span><span class="sxs-lookup"><span data-stu-id="ef949-342">[Virtual Networks][VNet], [UDR][UDR], [NSG][NSG]</span></span>
-   <span data-ttu-id="ef949-343">[ネットワーク仮想アプライアンス][NVA]</span><span class="sxs-lookup"><span data-stu-id="ef949-343">[Network Virtual Appliance][NVA]</span></span>
-   <span data-ttu-id="ef949-344">[ロード バランサー][ALB]</span><span class="sxs-lookup"><span data-stu-id="ef949-344">[Load Balancer][ALB]</span></span>
-   <span data-ttu-id="ef949-345">[Application Gateway][AppGW] / [WAF][WAF]</span><span class="sxs-lookup"><span data-stu-id="ef949-345">[Application Gateway][AppGW] / [WAF][WAF]</span></span>
-   <span data-ttu-id="ef949-346">[パブリック IP][PIP]</span><span class="sxs-lookup"><span data-stu-id="ef949-346">[Public IPs][PIP]</span></span>

<span data-ttu-id="ef949-347">通常、中央 IT チームとセキュリティ チームには、境界ネットワークの要件を定義して運用する責任があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-347">Usually, the central IT and security teams have responsibility for requirement definition and operations of the perimeter networks.</span></span>

<span data-ttu-id="ef949-348">[![7]][7]</span><span class="sxs-lookup"><span data-stu-id="ef949-348">[![7]][7]</span></span>

<span data-ttu-id="ef949-349">上の図は、インターネットとオンプレミス ネットワークにアクセスする 2 つの境界の適用を示しており、どちらもハブに存在します。</span><span class="sxs-lookup"><span data-stu-id="ef949-349">The preceding diagram shows the enforcement of two perimeters with access to the internet and an on-premises network, both resident in the hub.</span></span> <span data-ttu-id="ef949-350">単一のハブでは、Web アプリケーション ファイアウォール (WAF) およびファイアウォールの複数のファームを使って、多数の LOB をサポートするようにインターネットへの境界ネットワークを拡張できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-350">In a single hub, the perimeter network to internet can scale up to support large numbers of LOBs, using multiple farms of Web Application Firewalls (WAFs) and/or firewalls.</span></span>

<span data-ttu-id="ef949-351">[**Virtual Network**][VNet] 通常、ハブは、複数のサブネットを含む VNet 上に構築され、NVA、WAF、Azure Application Gateway を使ってインターネットとの間でやり取りされる トラフィックをフィルター処理および検査するさまざまな種類のサービスをホストします。</span><span class="sxs-lookup"><span data-stu-id="ef949-351">[**Virtual Networks**][VNet] The hub is typically built on a VNet with multiple subnets to host the different type of services filtering and inspecting traffic to or from the internet via NVAs, WAFs, and Azure Application Gateways.</span></span>

<span data-ttu-id="ef949-352">[**UDR**][UDR] UDR を使うと、ファイアウォール、IDS/IPS、その他の仮想アプライアンスをデプロイし、これらのセキュリティ アプライアンスを介してネットワーク トラフィックをルーティングすることで、セキュリティ境界ポリシーを適用、監査、検査することができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-352">[**UDR**][UDR] Using UDR, customers can deploy firewalls, IDS/IPS, and other virtual appliances, and route network traffic through these security appliances for security boundary policy enforcement, auditing, and inspection.</span></span> <span data-ttu-id="ef949-353">UDR はハブとスポークのどちらにでも作成でき、VDC で使用される特定のカスタム VM、ネットワーク仮想アプライアンス、ロード バランサーをトラフィックが通過することを保証します。</span><span class="sxs-lookup"><span data-stu-id="ef949-353">UDRs can be created in both the hub and the spokes to guarantee that traffic transits through the specific custom VMs, Network Virtual Appliances and load balancers used by the VDC.</span></span> <span data-ttu-id="ef949-354">スポーク内に存在する VM から生成されたトラフィックが正しい仮想アプライアンスに転送されることを保証するには、次ホップとして内部ロード バランサーのフロントエンド IP アドレスを設定することで、スポークのサブネットに UDR を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-354">To guarantee that traffic generated from VMs resident in the spoke transit to the correct virtual appliances, a UDR needs to be set in the subnets of the spoke by setting the front-end IP address of the internal load balancer as the next-hop.</span></span> <span data-ttu-id="ef949-355">内部ロード バランサーは、内部トラフィックを仮想アプライアンス (ロード バランサーのバックエンド プール) に分散させます。</span><span class="sxs-lookup"><span data-stu-id="ef949-355">The internal load balancer distributes the internal traffic to the virtual appliances (load balancer back-end pool).</span></span>

<span data-ttu-id="ef949-356">[![8]][8]</span><span class="sxs-lookup"><span data-stu-id="ef949-356">[![8]][8]</span></span>

<span data-ttu-id="ef949-357">[**ネットワーク仮想アプライアンス**][NVA] ハブでは、インターネットにアクセスできる境界ネットワークは、ファイアウォールや Web アプリケーション ファイアウォール (WAF) のファームによって管理されるのが普通です。</span><span class="sxs-lookup"><span data-stu-id="ef949-357">[**Network Virtual Appliances**][NVA] In the hub, the perimeter network with access to the internet is normally managed through a farm of firewalls and/or Web Application Firewalls (WAFs).</span></span>

<span data-ttu-id="ef949-358">異なる LOB は一般的に多くの Web アプリケーションを使い、これらのアプリケーションをさまざまな脆弱性および悪用の可能性によって損なわれる傾向があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-358">Different LOBs commonly use many web applications, and these applications tend to suffer from various vulnerabilities and potential exploits.</span></span> <span data-ttu-id="ef949-359">Web アプリケーション ファイアウォールは、一般的なファイアウォールより詳しく Web アプリケーション (HTTP/HTTPS) に対する攻撃を検出するために使われる特殊な種類の製品です。</span><span class="sxs-lookup"><span data-stu-id="ef949-359">Web Applications Firewalls are a special breed of product used to detect attacks against web applications (HTTP/HTTPS) in more depth than a generic firewall.</span></span> <span data-ttu-id="ef949-360">従来のファイアウォール テクノロジと比較すると、WAF は脅威から内部 Web サーバーを保護するための特定の機能セットを備えています。</span><span class="sxs-lookup"><span data-stu-id="ef949-360">Compared with tradition firewall technology, WAFs have a set of specific features to protect internal web servers from threats.</span></span>

<span data-ttu-id="ef949-361">ファイアウォール ファームは同じ共通管理下で連携して動作するファイアウォールのグループであり、スポークでホストされているワークロードを保護し、オンプレミス ネットワークへのアクセスを制御する一連のセキュリティ規則を持っています。</span><span class="sxs-lookup"><span data-stu-id="ef949-361">A firewall farm is group of firewalls working in tandem under the same common administration, with a set of security rules to protect the workloads hosted in the spokes, and control access to on-premises networks.</span></span> <span data-ttu-id="ef949-362">ファイアウォール ファームは WAF ほど特化したソフトウェアではありませんが、送信および受信のあらゆる種類のトラフィックをフィルター処理して検査する広範なアプリケーション スコープを備えています。</span><span class="sxs-lookup"><span data-stu-id="ef949-362">A firewall farm has less specialized software compared with a WAF, but has a broad application scope to filter and inspect any type of traffic in egress and ingress.</span></span> <span data-ttu-id="ef949-363">ファイアウォール ファームは、通常、Azure Marketplace で入手できるネットワーク仮想アプライアンス (NVA) によって Azure に実装されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-363">Firewall farms are normally implemented in Azure through Network Virtual Appliances (NVAs), which are available in the Azure marketplace.</span></span>

<span data-ttu-id="ef949-364">インターネットから送信されるトラフィックとオンプレミスから送信されるトラフィックには異なる NVA のセットを使うことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ef949-364">It is recommended to use one set of NVAs for traffic originating on the Internet, and another for traffic originating on-premises.</span></span> <span data-ttu-id="ef949-365">両方にただ 1 つの NVA セットを使うと、2 つのネットワーク トラフィック セットの間にセキュリティ境界が提供されないため、セキュリティ リスクになります。</span><span class="sxs-lookup"><span data-stu-id="ef949-365">Using only one set of NVAs for both is a security risk, as it provides no security perimeter between the two sets of network traffic.</span></span> <span data-ttu-id="ef949-366">異なる NVA を使うと、セキュリティ規則のチェックの複雑さが軽減され、規則と受信ネットワーク要求の対応が明確になります。</span><span class="sxs-lookup"><span data-stu-id="ef949-366">Using separate NVAs reduces the complexity of checking security rules, and makes it clear which rules correspond to which incoming network request.</span></span>

<span data-ttu-id="ef949-367">ほとんどの大企業は、複数のドメインを管理しています。</span><span class="sxs-lookup"><span data-stu-id="ef949-367">Most large enterprises manage multiple domains.</span></span> <span data-ttu-id="ef949-368">Azure DNS を使って、特定のドメインの DNS レコードをホストできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-368">Azure DNS can be used to host the DNS records for a particular domain.</span></span> <span data-ttu-id="ef949-369">たとえば、Azure 外部ロード バランサー (または WAF) の仮想 IP アドレス (VIP) を、Azure DNS レコードの A レコードに登録できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-369">As example, the Virtual IP Address (VIP) of the Azure external load balancer (or the WAFs) can be registered in the A record of an Azure DNS record.</span></span>

<span data-ttu-id="ef949-370">[**Azure Load Balancer**][ALB] Azure Load Balancer が提供する高可用性レイヤー 4 (TCP、UDP) サービスは、負荷分散セットで定義されているサービス インスタンス間に受信トラフィックを分散できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-370">[**Azure Load Balancer**][ALB] Azure load balancer offers a high availability Layer 4 (TCP, UDP) service, which can distribute incoming traffic among service instances defined in a load-balanced set.</span></span> <span data-ttu-id="ef949-371">フロントエンド エンドポイント (パブリック IP エンドポイントまたはプライベート IP エンドポイント) からロード バランサーに送信されたトラフィックは、アドレス変換をして、またはしないで、バックエンド IP アドレス プール (例: ネットワーク仮想アプライアンスまたは VM) のセットに再配信できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-371">Traffic sent to the load balancer from front-end endpoints (public IP endpoints or private IP endpoints) can be redistributed with or without address translation to a set of back-end IP address pool (examples being; Network Virtual Appliances or VMs).</span></span>

<span data-ttu-id="ef949-372">Azure Load Balancer は、さまざまなサーバー インスタンスの正常性をプローブすることもでき、プローブが応答に失敗した場合、ロード バランサーは異常なインスタンスへのトラフィック送信を停止します。</span><span class="sxs-lookup"><span data-stu-id="ef949-372">Azure Load Balancer can probe the health of the various server instances as well, and when a probe fails to respond the load balancer stops sending traffic to the unhealthy instance.</span></span> <span data-ttu-id="ef949-373">VDC では、外部ロード バランサーがハブ (たとえば、NVA へのトラフィックの分散) とスポーク (多層アプリケーションの異なる VM 間へのトラフィックの分散などのタスクを実行するため) に存在します。</span><span class="sxs-lookup"><span data-stu-id="ef949-373">In a VDC, we have the presence of an external load balancer in the hub (for instance, balance the traffic to NVAs), and in the spokes (to perform tasks like balancing traffic between different VMs of a multitier application).</span></span>

<span data-ttu-id="ef949-374">[**Application Gateway**][AppGW] Microsoft Azure Application Gateway は、アプリケーション配信コントローラー (ADC) をサービスとして提供する専用仮想アプライアンスで、さまざまなレイヤー 7 負荷分散機能をアプリケーションで利用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="ef949-374">[**Application Gateway**][AppGW] Microsoft Azure Application Gateway is a dedicated virtual appliance providing application delivery controller (ADC) as a service, offering various layer 7 load balancing capabilities for your application.</span></span> <span data-ttu-id="ef949-375">これにより、CPU を集中的に使用する SSL 終了を Application Gateway にオフロードし、Web ファームの生産性を最適化できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-375">It allows you to optimize web farm productivity by offloading CPU intensive SSL termination to the application gateway.</span></span> <span data-ttu-id="ef949-376">また、着信トラフィックのラウンド ロビン分散、Cookie ベースのセッション アフィニティ、URL パス ベースのルーティング、単一の Application Gateway の背後で複数の Web サイトをホストする機能など、その他のレイヤー 7 ルーティング機能も用意されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-376">It also provides other layer 7 routing capabilities including round robin distribution of incoming traffic, cookie-based session affinity, URL path-based routing, and the ability to host multiple websites behind a single Application Gateway.</span></span> <span data-ttu-id="ef949-377">アプリケーション ゲートウェイの WAF SKU の一部として、Web アプリケーション ファイアウォール (WAF) も提供されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-377">A web application firewall (WAF) is also provided as part of the application gateway WAF SKU.</span></span> <span data-ttu-id="ef949-378">この SKU は、一般的な Web の脆弱性や悪用から Web アプリケーションを保護します。</span><span class="sxs-lookup"><span data-stu-id="ef949-378">This SKU provides protection to web applications from common web vulnerabilities and exploits.</span></span> <span data-ttu-id="ef949-379">Application Gateway は、インターネット接続ゲートウェイ、または内部的にのみ使用されるゲートウェイのいずれかとして構成できるほか、この両方を組み合わせて使用することも可能です。</span><span class="sxs-lookup"><span data-stu-id="ef949-379">Application Gateway can be configured as internet facing gateway, internal only gateway, or a combination of both.</span></span> 

<span data-ttu-id="ef949-380">[**パブリック IP**][PIP] Azure の一部の機能を使うと、サービス エンドポイントをパブリック IP アドレスに関連付けて、インターネットからリソースにアクセスできるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-380">[**Public IPs**][PIP] Some Azure features enable you to associate service endpoints to a public IP address that allows to your resource to be accessed from the internet.</span></span> <span data-ttu-id="ef949-381">このエンドポイントでは、ネットワーク アドレス変換 (NAT) を使って、トラフィックを Azure 仮想ネットワークの内部アドレスとポートにルーティングします。</span><span class="sxs-lookup"><span data-stu-id="ef949-381">This endpoint uses Network Address Translation (NAT) to route traffic to the internal address and port on the Azure virtual network.</span></span> <span data-ttu-id="ef949-382">これは、外部トラフィックが仮想ネットワークに到達するための主な経路です。</span><span class="sxs-lookup"><span data-stu-id="ef949-382">This path is the primary way for external traffic to pass into the virtual network.</span></span> <span data-ttu-id="ef949-383">パブリック IP アドレスは、仮想ネットワークに渡されるトラフィックと、そのトラフィックが仮想ネットワークのどこでどのように変換されるかを決定するために構成できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-383">The Public IP addresses can be configured to determine which traffic is passed in, and how and where it's translated on to the virtual network.</span></span>

#### <a name="component-type-monitoring"></a><span data-ttu-id="ef949-384">コンポーネントの種類: 監視</span><span class="sxs-lookup"><span data-stu-id="ef949-384">Component type: Monitoring</span></span>
<span data-ttu-id="ef949-385">監視コンポーネントは、他のすべてのコンポーネントの種類からの可視性とアラートを提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-385">Monitoring components provide visibility and alerting from all the other components types.</span></span> <span data-ttu-id="ef949-386">すべてのチームは、アクセスできるコンポーネントとサービスに対する監視にアクセスできる必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-386">All teams should have access to monitoring for the components and services they have access to.</span></span> <span data-ttu-id="ef949-387">一元的なヘルプ デスクまたは運用チームは、これらのコンポーネントによって提供されるデータへの統合アクセスが必要です。</span><span class="sxs-lookup"><span data-stu-id="ef949-387">If you have a centralized help desk or operations teams, they would need to have integrated access to the data provided by these components.</span></span>

<span data-ttu-id="ef949-388">Azure では、Azure がホストするリソースの動作を追跡するために、さまざまな種類のログ サービスと監視サービスが提供されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-388">Azure offers different types of logging and monitoring services to track the behavior of Azure hosted resources.</span></span> <span data-ttu-id="ef949-389">Azure でのワークロードのガバナンスと制御は、ログ データの収集だけでなく、報告された特定のイベントに基づいてアクションをトリガーする機能も基になっています。</span><span class="sxs-lookup"><span data-stu-id="ef949-389">Governance and control of workloads in Azure is based not just on collecting log data, but also the ability to trigger actions based on specific reported events.</span></span>

<span data-ttu-id="ef949-390">[**Azure Monitor**][Monitor] - Azure には、監視領域において特定の役割やタスクを個別に実行するサービスが複数用意されています。</span><span class="sxs-lookup"><span data-stu-id="ef949-390">[**Azure Monitor**][Monitor] - Azure includes multiple services that individually perform a specific role or task in the monitoring space.</span></span> <span data-ttu-id="ef949-391">また、これらのサービスが組み合わされた包括的なソリューションを使用すれば、アプリケーションやそれらのサービスを支える Azure リソースからテレメトリを収集、分析し、それに基づいて対処できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-391">Together, these services deliver a comprehensive solution for collecting, analyzing, and acting on telemetry from your application and the Azure resources that support them.</span></span> <span data-ttu-id="ef949-392">また、オンプレミスの重要なリソースを監視して、ハイブリッド監視環境を構築することもできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-392">They can also work to monitor critical on-premises resources in order to provide a hybrid monitoring environment.</span></span> <span data-ttu-id="ef949-393">アプリケーションの包括的な監視戦略を策定するための最初のステップは、利用可能なツールとデータの把握です。</span><span class="sxs-lookup"><span data-stu-id="ef949-393">Understanding the tools and data that are available is the first step in developing a complete monitoring strategy for your application.</span></span>

<span data-ttu-id="ef949-394">Azure の主要なログの種類は次の 2 つです。</span><span class="sxs-lookup"><span data-stu-id="ef949-394">There are two major types of logs in Azure:</span></span>

-   <span data-ttu-id="ef949-395">[**アクティビティ ログ**][ActLog] ("操作ログ" とも呼ばれます) では、Azure サブスクリプションのリソースに対して実行された操作を調査できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-395">[**Activity Logs**][ActLog] (referred also as "Operational Log") provide insight into the operations that were performed on resources in the Azure subscription.</span></span> <span data-ttu-id="ef949-396">これらのログは、サブスクリプションのコントロールプレーン イベントを報告します。</span><span class="sxs-lookup"><span data-stu-id="ef949-396">These logs report the control-plane events for your subscriptions.</span></span> <span data-ttu-id="ef949-397">すべての Azure リソースで監査ログが生成されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-397">Every Azure resource produces audit logs.</span></span>

-   <span data-ttu-id="ef949-398">[**Azure 診断ログ**][DiagLog]は、リソースによって生成されるログであり、そのリソースの操作に関する豊富なデータを提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-398">[**Azure Diagnostic Logs**][DiagLog] are logs generated by a resource that provide rich, frequent data about the operation of that resource.</span></span> <span data-ttu-id="ef949-399">これらのログの内容は、リソースの種類によって異なります。</span><span class="sxs-lookup"><span data-stu-id="ef949-399">The content of these logs varies by resource type.</span></span>

<span data-ttu-id="ef949-400">[![9]][9]</span><span class="sxs-lookup"><span data-stu-id="ef949-400">[![9]][9]</span></span>

<span data-ttu-id="ef949-401">VDC では、NSG ログの特に次の情報を追跡することが非常に重要です。</span><span class="sxs-lookup"><span data-stu-id="ef949-401">In a VDC, it is extremely important to track the NSGs logs, particularly this information:</span></span>

-   <span data-ttu-id="ef949-402">[**イベント ログ**][NSGLog]: MAC アドレスに基づいて VM とインスタンス ロールに適用される NSG ルールについての情報が提供されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-402">[**Event logs**][NSGLog]: provides information on what NSG rules are applied to VMs and instance roles based on MAC address.</span></span>
-   <span data-ttu-id="ef949-403">[**カウンター ログ**][NSGLog]: トラフィックを拒否または許可するために各 NSG ルールが実行された回数を追跡します。</span><span class="sxs-lookup"><span data-stu-id="ef949-403">[**Counter logs**][NSGLog]: tracks how many times each NSG rule was executed to deny or allow traffic.</span></span>

<span data-ttu-id="ef949-404">監査、スタティック分析、またはバックアップのために、すべてのログを Azure Storage アカウントに格納できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-404">All logs can be stored in Azure Storage Accounts for audit, static analysis, or backup purposes.</span></span> <span data-ttu-id="ef949-405">Azure Storage アカウントにログが保存されていると、ユーザーはさまざまな種類のフレームワークを使ってこのデータを取得、準備、分析、視覚化し、クラウド リソースの状態と正常性を報告できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-405">When the logs are stored in an Azure storage account, customers can use different types of frameworks to retrieve, prep, analyze, and visualize this data to report the status and health of cloud resources.</span></span>

<span data-ttu-id="ef949-406">大規模な企業は、オンプレミス システムの監視用に標準的なフレームワークを既に利用しているはずであり、そのフレームワークを拡張してクラウドのデプロイによって生成されたログを統合することができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-406">Large enterprises should already have acquired a standard framework for monitoring on-premises systems and can extend that framework to integrate logs generated by cloud deployments.</span></span> <span data-ttu-id="ef949-407">すべてのログ記録をクラウド内に保持する場合は、[Log Analytics][../log-analytics/log-analytics-overview .md] が最適です。</span><span class="sxs-lookup"><span data-stu-id="ef949-407">For organizations that wish to keep all the logging in the cloud, [Log Analytics][../log-analytics/log-analytics-overview .md] is a great choice.</span></span> <span data-ttu-id="ef949-408">Log Analytics はクラウドベースのサービスとして実装されるため、インフラストラクチャ サービスに最小限の投資をするだけで、すぐに稼働させることができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-408">Since Log Analytics is implemented as a cloud-based service, you can have it up and running quickly with minimal investment in infrastructure services.</span></span> <span data-ttu-id="ef949-409">Log Analytics は、System Center Operations Manager などの System Center のコンポーネントと統合して、管理のための既存の投資をクラウドに拡張することもできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-409">Log Analytics can also integrate with System Center components such as System Center Operations Manager to extend your existing management investments into the cloud.</span></span>

<span data-ttu-id="ef949-410">Log Analytics は、オペレーティング システム、アプリケーション、インフラストラクチャ クラウド コンポーネントによって生成されたログおよびパフォーマンス データを収集、関連付け、検索、操作するための、Azure のサービスです。</span><span class="sxs-lookup"><span data-stu-id="ef949-410">Log Analytics is a service in Azure that helps collect, correlate, search, and act on log and performance data generated by operating systems, applications, and infrastructure cloud components.</span></span> <span data-ttu-id="ef949-411">統合された検索およびカスタム ダッシュボードを使って、VDC のすべてのワークロードのすべてのレコードを分析するためのリアルタイムの運用分析情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-411">It gives customers real-time operational insights using integrated search and custom dashboards to analyze all the records across all your workloads in a VDC.</span></span>

<span data-ttu-id="ef949-412">OMS 内の[ネットワーク パフォーマンス モニター (NPM)][NPM] ソリューションは、Azure ネットワークとオンプレミスのネットワークの 1 つのビューを含む、ネットワークの詳細情報をエンド ツー エンドで提供できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-412">The [Network Performance Monitor (NPM)][NPM] solution inside OMS can provide detailed network information end-to-end, including a single view of your Azure networks and on-premises networks.</span></span> <span data-ttu-id="ef949-413">ExpressRoute および公開サービス用の特定のモニター。</span><span class="sxs-lookup"><span data-stu-id="ef949-413">With specific monitors for ExpressRoute and public services.</span></span>

#### <a name="component-type-workloads"></a><span data-ttu-id="ef949-414">コンポーネントの種類: ワークロード</span><span class="sxs-lookup"><span data-stu-id="ef949-414">Component type: Workloads</span></span>
<span data-ttu-id="ef949-415">ワークロード コンポーネントは、実際のアプリケーションとサービスが存在する場所です。</span><span class="sxs-lookup"><span data-stu-id="ef949-415">Workload components are where your actual applications and services reside.</span></span> <span data-ttu-id="ef949-416">アプリケーション開発チームはここで最も多くの時間を費やします。</span><span class="sxs-lookup"><span data-stu-id="ef949-416">It's also where your application development teams spend most of their time.</span></span>

<span data-ttu-id="ef949-417">ワークロードの可能性は本当に無限です。</span><span class="sxs-lookup"><span data-stu-id="ef949-417">The workload possibilities are truly endless.</span></span> <span data-ttu-id="ef949-418">次に示すのは可能なワークロードの種類のほんの一部です。</span><span class="sxs-lookup"><span data-stu-id="ef949-418">The following are just a few of the possible workload types:</span></span>

<span data-ttu-id="ef949-419">**内部 LOB アプリケーション**</span><span class="sxs-lookup"><span data-stu-id="ef949-419">**Internal LOB Applications**.</span></span> <span data-ttu-id="ef949-420">基幹業務アプリケーションは、企業の現在の経営にとって重要なコンピューター アプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="ef949-420">Line-of-business applications are computer applications critical to the ongoing operation of an enterprise.</span></span> <span data-ttu-id="ef949-421">LOB アプリケーションには、いくつかの一般的な特性があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-421">LOB applications have some common characteristics:</span></span>

-   <span data-ttu-id="ef949-422">**対話型**。</span><span class="sxs-lookup"><span data-stu-id="ef949-422">**Interactive**.</span></span> <span data-ttu-id="ef949-423">LOB アプリケーションは本質的に対話型であり、データを入力すると、結果/レポートが返されます。</span><span class="sxs-lookup"><span data-stu-id="ef949-423">LOB applications are interactive by nature: data is entered, and result/reports are returned.</span></span>
-   <span data-ttu-id="ef949-424">**データ駆動**。</span><span class="sxs-lookup"><span data-stu-id="ef949-424">**Data driven**.</span></span> <span data-ttu-id="ef949-425">LOB アプリケーションは、データベースまたは他の記憶域に頻繁にアクセスするデータ集中的なアプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="ef949-425">LOB applications are data intensive with frequent access to the databases or other storage.</span></span>
-   <span data-ttu-id="ef949-426">**統合**。</span><span class="sxs-lookup"><span data-stu-id="ef949-426">**Integrated**.</span></span> <span data-ttu-id="ef949-427">LOB アプリケーションは組織の内外の他のシステムとの統合を提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-427">LOB applications offer integration with other systems within or outside the organization.</span></span>

<span data-ttu-id="ef949-428">**顧客向け Web サイト (インターネットまたは内部接続)**。</span><span class="sxs-lookup"><span data-stu-id="ef949-428">**Customer facing web sites (Internet or Internal facing)**.</span></span> <span data-ttu-id="ef949-429">インターネットと対話するほとんどのアプリケーションは Web サイトです。</span><span class="sxs-lookup"><span data-stu-id="ef949-429">Most applications that interact with the Internet are web sites.</span></span> <span data-ttu-id="ef949-430">Azure は、IaaS VM 上または [Azure Web Apps][WebApps] サイト (PaaS) から Web サイトを実行する機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-430">Azure offers the capability to run a web site on an IaaS VM or from an [Azure Web Apps][WebApps] site (PaaS).</span></span> <span data-ttu-id="ef949-431">Azure Web Apps は VNet との統合をサポートし、VDC のスポークに Web アプリをデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-431">Azure Web Apps support integration with VNets that allow the deployment of the Web Apps in the spoke of a VDC.</span></span> <span data-ttu-id="ef949-432">社内向け Web サイトの場合、VNet 統合では、アプリケーション用にインターネット エンドポイントを公開する必要はありませんが、代わりにプライベート VNet からリソースのプライベートなインターネットではないルーティング可能アドレス経由でリソースを使うことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-432">When looking at internal facing web sites, with the VNET integration, you don't need to expose an Internet endpoint for your applications but can use the resources via private non-internet routable addresses from your private VNet instead.</span></span>

<span data-ttu-id="ef949-433">**ビッグ データ/分析** データを膨大な量に拡張する必要がある場合、データベースが正しくスケールアップしないことがあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-433">**Big Data/Analytics** When data needs to scale up to a very large volume, databases may not scale up properly.</span></span> <span data-ttu-id="ef949-434">Hadoop テクノロジは、多数のノードで分散クエリを並列に実行するシステムを提供します。</span><span class="sxs-lookup"><span data-stu-id="ef949-434">Hadoop technology offers a system to run distributed queries in parallel on large number of nodes.</span></span> <span data-ttu-id="ef949-435">ユーザーは、データ ワークロードを IaaS VM または PaaS ([HDInsight][HDI]) で実行することを選択できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-435">Customers have the option to run data workloads in IaaS VMs or PaaS ([HDInsight][HDI]).</span></span> <span data-ttu-id="ef949-436">HDInsight は、場所ベースの VNet へのデプロイをサポートし、VDC のスポーク内のクラスターにデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-436">HDInsight supports deploying into a location-based VNet, can be deployed to a cluster in a spoke of the VDC.</span></span>

<span data-ttu-id="ef949-437">**イベントとメッセージング**。</span><span class="sxs-lookup"><span data-stu-id="ef949-437">**Events and Messaging**.</span></span> <span data-ttu-id="ef949-438">[Azure Event Hubs][EventHubs] は、数百万のイベントを収集、変換、保存する、ハイパースケールのテレメトリ インジェスト サービスです。</span><span class="sxs-lookup"><span data-stu-id="ef949-438">[Azure Event Hubs][EventHubs] is a hyper-scale telemetry ingestion service that collects, transforms, and stores millions of events.</span></span> <span data-ttu-id="ef949-439">分散型のストリーミング プラットフォームとして、遅延時間が短く、保持時間を設定可能なため、膨大な量のテレメトリを Azure に送信し、複数のアプリケーションからデータを読み込むことができます。</span><span class="sxs-lookup"><span data-stu-id="ef949-439">As a distributed streaming platform, it offers low latency and configurable time retention, enabling you to ingest massive amounts of telemetry into Azure and read that data from multiple applications.</span></span> <span data-ttu-id="ef949-440">Event Hubs では、1 つのストリームでリアルタイム パイプラインとバッチ ベースのパイプラインの両方をサポートできます。</span><span class="sxs-lookup"><span data-stu-id="ef949-440">With Event Hubs, a single stream can support both real-time and batch-based pipelines.</span></span>

<span data-ttu-id="ef949-441">クライアントとサーバー間の非同期のブローカー メッセージングと構造化された先入れ先出し (FIFO) メッセージングおよびパブリッシュ/サブスクライブ機能を提供する [Azure Service Bus][ServiceBus] により、アプリケーションとサービスの間に信頼性の高いクラウド メッセージング サービスを実装できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-441">A highly reliable cloud messaging service between applications and services, can be implemented through [Azure Service Bus][ServiceBus] that offers asynchronous brokered messaging between client and server, along with structured first-in-first-out (FIFO) messaging and publish/subscribe capabilities.</span></span>

<span data-ttu-id="ef949-442">[![10]][10]</span><span class="sxs-lookup"><span data-stu-id="ef949-442">[![10]][10]</span></span>

### <a name="multiple-vdc"></a><span data-ttu-id="ef949-443">複数の VDC</span><span class="sxs-lookup"><span data-stu-id="ef949-443">Multiple VDC</span></span>
<span data-ttu-id="ef949-444">ここまで、この記事では、単一の VDC に注目し、回復性がある VDC に寄与する基本的なコンポーネントとアーキテクチャについて説明してきました。</span><span class="sxs-lookup"><span data-stu-id="ef949-444">So far, this article has focused on a single VDC, describing the basic components and architecture that contribute to a resilient VDC.</span></span> <span data-ttu-id="ef949-445">Azure には、Azure Load Balancer、NVA、可用性セット、スケール セット、そして運用サービスに確実な SLA レベルを構築できるシステムに寄与する他のメカニズムなどの機能があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-445">Azure features such as Azure load balancer, NVAs, availability sets, scale sets, along with other mechanisms contribute to a system that allow you to build solid SLA levels into your production services.</span></span>

<span data-ttu-id="ef949-446">ただし、単一の VDC は単一のリージョン内でホストされ、そのリージョン全体に影響を与える大規模な停止に対して脆弱です。</span><span class="sxs-lookup"><span data-stu-id="ef949-446">However, a single VDC is hosted within a single region, and is vulnerable to major outage that might affect that entire region.</span></span> <span data-ttu-id="ef949-447">高い SLA を望むユーザーは、2 つ以上の VDC に同じプロジェクトをデプロイして異なるリージョンに配置することで、サービスを保護する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-447">Customers that want to achieve high SLAs need to protect the services through deployments of the same project in two (or more) VDCs, placed in different regions.</span></span>

<span data-ttu-id="ef949-448">SLA の問題だけでなく、複数の VDC をデプロイすることに意味がある一般的なシナリオがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="ef949-448">In addition to SLA concerns, there are several common scenarios where deploying multiple VDCs makes sense:</span></span>

-   <span data-ttu-id="ef949-449">リージョン/グローバルへの配置</span><span class="sxs-lookup"><span data-stu-id="ef949-449">Regional/Global presence</span></span>
-   <span data-ttu-id="ef949-450">ディザスター リカバリー</span><span class="sxs-lookup"><span data-stu-id="ef949-450">Disaster Recovery</span></span>
-   <span data-ttu-id="ef949-451">DC 間でトラフィックを転送するメカニズム</span><span class="sxs-lookup"><span data-stu-id="ef949-451">Mechanism to divert traffic between DC</span></span>

#### <a name="regionalglobal-presence"></a><span data-ttu-id="ef949-452">リージョンへの配置/グローバルな配置</span><span class="sxs-lookup"><span data-stu-id="ef949-452">Regional/global presence</span></span>
<span data-ttu-id="ef949-453">Azure データ センターは世界中の多数のリージョンに存在します。</span><span class="sxs-lookup"><span data-stu-id="ef949-453">Azure data centers are present in numerous regions worldwide.</span></span> <span data-ttu-id="ef949-454">複数の Azure データ センターを選択するとき、ユーザーは地理的な距離と待機時間という関連する 2 つの要因を考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-454">When selecting multiple Azure data centers, customers need to consider two related factors: geographical distances and latency.</span></span> <span data-ttu-id="ef949-455">ユーザーは、VDC 間の地理的な距離および VDC とエンド ユーザー間の距離を評価して、最適なユーザー エクスペリエンスを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-455">Customers need to evaluate the geographical distance between the VDCs and  the distance between the VDC and the end users, to offer the best user experience.</span></span>

<span data-ttu-id="ef949-456">また、VDC がホストされている Azure リージョンは、組織が運営される法的管轄によって確立された規制要件に準拠している必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-456">The Azure Region where VDCs are hosted also need to conform with regulatory requirements established by any legal jurisdiction under which your organization operates.</span></span>

#### <a name="disaster-recovery"></a><span data-ttu-id="ef949-457">ディザスター リカバリー</span><span class="sxs-lookup"><span data-stu-id="ef949-457">Disaster recovery</span></span>
<span data-ttu-id="ef949-458">ディザスター リカバリー計画の実装は、関連するワークロードの種類と、異なる VDC 間でワークロードの状態を同期する機能に強く関係します。</span><span class="sxs-lookup"><span data-stu-id="ef949-458">The implementation of a disaster recovery plan is strongly related to the type of workload concerned, and the ability to synchronize the workload state between different VDCs.</span></span> <span data-ttu-id="ef949-459">ほとんどのユーザーは、2 つの異なる VDC で実行するデプロイ間でアプリケーション データを同期して、高速のフェールオーバー メカニズムを実装することを望んでいます。</span><span class="sxs-lookup"><span data-stu-id="ef949-459">Ideally, most customers want to synchronize application data between deployments running in two different VDCs to implement a fast fail-over mechanism.</span></span> <span data-ttu-id="ef949-460">ほとんどのアプリケーションは待機時間の影響を受けやすく、データ同期がタイムアウトしたり遅延する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-460">Most applications are sensitive to latency, and that can cause potential timeout and delay in data synchronization.</span></span>

<span data-ttu-id="ef949-461">異なる VDC 内のアプリケーションの同期またはハートビート監視には、それらの間での通信が必要です。</span><span class="sxs-lookup"><span data-stu-id="ef949-461">Synchronization or heartbeat monitoring of applications in different VDCs requires communication between them.</span></span> <span data-ttu-id="ef949-462">異なるリージョン内の 2 つの VDC は、次の方法で接続できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-462">Two VDCs in different regions can be connected through:</span></span>

-   <span data-ttu-id="ef949-463">VNet ピアリング - VNet ピアリングはリージョンをまたいでハブを接続できます</span><span class="sxs-lookup"><span data-stu-id="ef949-463">VNet Peering - VNet Peering can connect hubs across regions</span></span>
-   <span data-ttu-id="ef949-464">ExpressRoute のプライベート ピアリング (VDC ハブが同じ ExpressRoute 回線に接続されている場合)</span><span class="sxs-lookup"><span data-stu-id="ef949-464">ExpressRoute private peering when the VDC hubs are connected to the same ExpressRoute circuit</span></span>
-   <span data-ttu-id="ef949-465">企業バックボーン経由で接続されている複数の ExpressRoute 回線と、ExpressRoute 回線に接続された VDC メッシュ</span><span class="sxs-lookup"><span data-stu-id="ef949-465">multiple ExpressRoute circuits connected via your corporate backbone and your VDC mesh connected to the ExpressRoute circuits</span></span>
-   <span data-ttu-id="ef949-466">各 Azure リージョン内の VDC ハブ間のサイト間 VPN 接続</span><span class="sxs-lookup"><span data-stu-id="ef949-466">Site-to-Site VPN connections between your VDC hubs in each Azure Region</span></span>

<span data-ttu-id="ef949-467">Microsoft バックボーン経由の通過では、高い帯域幅と一貫性のある待ち時間のため、VNet ピアリングまたは ExpressRoute の接続が通常は好ましいメカニズムです。</span><span class="sxs-lookup"><span data-stu-id="ef949-467">Usually VNet Peering or ExpressRoute connections are the preferred mechanism due higher bandwidth and consistent latency when transiting through the Microsoft backbone.</span></span>

<span data-ttu-id="ef949-468">異なるリージョンに存在する 2 つ以上の異なる VDC 間に分散されたアプリケーションを検証する簡単な方法はありません。</span><span class="sxs-lookup"><span data-stu-id="ef949-468">There is no magic recipe to validate an application distributed between two (or more) different VDCs located in different regions.</span></span> <span data-ttu-id="ef949-469">ユーザーは、ネットワーク認定テストを実行し、接続の待機時間と帯域幅を検証して、同期または非同期どちらのデータ レプリケーションが適切か、およびワークロードに対して最適な目標復旧時間 (RTO) を決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ef949-469">Customers should run network qualification tests to verify the latency and bandwidth of the connections and target whether synchronous or asynchronous data replication is appropriate and what the optimal recovery time objective (RTO) can be for your workloads.</span></span>

#### <a name="mechanism-to-divert-traffic-between-dc"></a><span data-ttu-id="ef949-470">DC 間でトラフィックを転送するメカニズム</span><span class="sxs-lookup"><span data-stu-id="ef949-470">Mechanism to divert traffic between DC</span></span>
<span data-ttu-id="ef949-471">ある DC が受信したトラフィックを別の DC に転送する効果的な方法の 1 つは、DNS に基づくものです。</span><span class="sxs-lookup"><span data-stu-id="ef949-471">One effective technique to divert the traffic incoming in one DC to another is based on DNS.</span></span> <span data-ttu-id="ef949-472">[Azure Traffic Manager][TM] は、ドメイン ネーム システム (DNS) メカニズムを使って、エンド ユーザー トラフィックを特定の VDC 内の最適なパブリック エンドポイントに転送します。</span><span class="sxs-lookup"><span data-stu-id="ef949-472">[Azure Traffic Manager][TM] uses the Domain Name System (DNS) mechanism to direct the end-user traffic to the most appropriate public endpoint in a specific VDC.</span></span> <span data-ttu-id="ef949-473">Traffic Manager は、プローブを使って異なる VDC のパブリック エンドポイントのサービスの正常性を定期的にチェックし、それらのエンドポイントで障害が発生した場合は、セカンダリ VDC に自動的にルーティングします。</span><span class="sxs-lookup"><span data-stu-id="ef949-473">Through probes, Traffic Manager periodically checks the service health of public endpoints in different VDCs and, in case of failure of those endpoints, it routes automatically to the secondary VDC.</span></span>

<span data-ttu-id="ef949-474">Traffic Manager は、Azure のパブリック エンドポイントで動作します。たとえば、Traffic Manager を使用してトラフィックを制御し、適切な VDC の Azure VM と Web Apps に転送できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-474">Traffic Manager works on Azure public endpoints and can be used, for example, to control/divert traffic to Azure VMs and Web Apps in the appropriate VDC.</span></span> <span data-ttu-id="ef949-475">Traffic Manager は、Azure リージョン全体で障害が発生した場合でも回復性があり、複数の条件 (特定の VDC のサービスの障害や、クライアントのネットワーク待機時間が最も短い VDC の選択など) に基づいて、異なる VDC 内のサービス エンドポイントに対するユーザー トラフィックの分散を制御できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-475">Traffic Manager is resilient even in the face of an entire Azure region failing and can control the distribution of user traffic for service endpoints in different VDCs based on several criteria (for instance, failure of a service in a specific VDC, or selecting the VDC with the lowest network latency for the client).</span></span>

### <a name="conclusion"></a><span data-ttu-id="ef949-476">まとめ</span><span class="sxs-lookup"><span data-stu-id="ef949-476">Conclusion</span></span>
<span data-ttu-id="ef949-477">仮想データ センターは、クラウド リソースの使用を最大化し、コストを削減し、システムのガバナンスを簡素化するスケーラブルなアーキテクチャを Azure で作成する機能の組み合わせを使用する、クラウドにデータ センターを移行するためのアプローチです。</span><span class="sxs-lookup"><span data-stu-id="ef949-477">The Virtual Data Center is an approach to data center migration into the cloud that uses a combination of features and capabilities to create a scalable architecture in Azure that maximizes cloud resource use, reducing costs, and simplifying system governance.</span></span> <span data-ttu-id="ef949-478">VDC の概念はハブ スポーク トポロジに基づいており、ハブで共通の共有サービスを提供し、スポークで特定のアプリケーション/ワークロードを実行できます。</span><span class="sxs-lookup"><span data-stu-id="ef949-478">The VDC concept is based on a hub-spokes topology, providing common shared services in the hub and allowing specific applications/workloads in the spokes.</span></span> <span data-ttu-id="ef949-479">VDC は、それぞれがロールと職務の特定のリストを持つさまざまな部門 (中央 IT、DevOps、運用、メンテナンス) が協力する、会社のロールの構造に対応します。</span><span class="sxs-lookup"><span data-stu-id="ef949-479">A VDC matches the structure of company roles, where different departments (Central IT, DevOps, operation and maintenance) work together, each with a specific list of roles and duties.</span></span> <span data-ttu-id="ef949-480">VDC は、"リフト アンド シフト" 移行の要件を満たしますが、ネイティブなクラウド デプロイにも多くの利点をもたらします。</span><span class="sxs-lookup"><span data-stu-id="ef949-480">A VDC satisfies the requirements for a "Lift and Shift" migration, but also provides many advantages to native cloud deployments.</span></span>

## <a name="references"></a><span data-ttu-id="ef949-481">参照</span><span class="sxs-lookup"><span data-stu-id="ef949-481">References</span></span>
<span data-ttu-id="ef949-482">このドキュメントでは以下の機能について説明しました。</span><span class="sxs-lookup"><span data-stu-id="ef949-482">The following features were discussed in this document.</span></span> <span data-ttu-id="ef949-483">詳しくはリンクをクリックしてください。</span><span class="sxs-lookup"><span data-stu-id="ef949-483">Click the links to learn more.</span></span>

| | | |
|-|-|-|
|<span data-ttu-id="ef949-484">ネットワーク機能</span><span class="sxs-lookup"><span data-stu-id="ef949-484">Network Features</span></span>|<span data-ttu-id="ef949-485">負荷分散</span><span class="sxs-lookup"><span data-stu-id="ef949-485">Load Balancing</span></span>|<span data-ttu-id="ef949-486">接続</span><span class="sxs-lookup"><span data-stu-id="ef949-486">Connectivity</span></span>|
|<span data-ttu-id="ef949-487">[Azure Virtual Network][VNet]</span><span class="sxs-lookup"><span data-stu-id="ef949-487">[Azure Virtual Networks][VNet]</span></span></br><span data-ttu-id="ef949-488">[ネットワーク セキュリティ グループ][NSG]</span><span class="sxs-lookup"><span data-stu-id="ef949-488">[Network Security Groups][NSG]</span></span></br><span data-ttu-id="ef949-489">[NSG ログ][NSGLog]</span><span class="sxs-lookup"><span data-stu-id="ef949-489">[NSG Logs][NSGLog]</span></span></br><span data-ttu-id="ef949-490">[ユーザー定義ルーティング][UDR]</span><span class="sxs-lookup"><span data-stu-id="ef949-490">[User Defined Routing][UDR]</span></span></br><span data-ttu-id="ef949-491">[ネットワーク仮想アプライアンス][NVA]</span><span class="sxs-lookup"><span data-stu-id="ef949-491">[Network Virtual Appliances][NVA]</span></span></br><span data-ttu-id="ef949-492">[Public IP Addresses][PIP]</span><span class="sxs-lookup"><span data-stu-id="ef949-492">[Public IP Addresses][PIP]</span></span></br><span data-ttu-id="ef949-493">[DNS]</span><span class="sxs-lookup"><span data-stu-id="ef949-493">[DNS]</span></span>|<span data-ttu-id="ef949-494">[Azure Load Balancer (L3) ][ALB]</span><span class="sxs-lookup"><span data-stu-id="ef949-494">[Azure Load Balancer (L3) ][ALB]</span></span></br><span data-ttu-id="ef949-495">[Application Gateway (L7) ][AppGW]</span><span class="sxs-lookup"><span data-stu-id="ef949-495">[Application Gateway (L7) ][AppGW]</span></span></br><span data-ttu-id="ef949-496">[Web アプリケーション ファイアウォール][WAF]</span><span class="sxs-lookup"><span data-stu-id="ef949-496">[Web Application Firewall][WAF]</span></span></br><span data-ttu-id="ef949-497">[Azure Traffic Manager][TM]</span><span class="sxs-lookup"><span data-stu-id="ef949-497">[Azure Traffic Manager][TM]</span></span> |<span data-ttu-id="ef949-498">[VNet ピアリング][VNetPeering]</span><span class="sxs-lookup"><span data-stu-id="ef949-498">[VNet Peering][VNetPeering]</span></span></br><span data-ttu-id="ef949-499">[仮想プライベート ネットワーク][VPN]</span><span class="sxs-lookup"><span data-stu-id="ef949-499">[Virtual Private Network][VPN]</span></span></br><span data-ttu-id="ef949-500">[ExpressRoute][ExR]</span><span class="sxs-lookup"><span data-stu-id="ef949-500">[ExpressRoute][ExR]</span></span>
|<span data-ttu-id="ef949-501">ID</span><span class="sxs-lookup"><span data-stu-id="ef949-501">Identity</span></span></br>|<span data-ttu-id="ef949-502">監視</span><span class="sxs-lookup"><span data-stu-id="ef949-502">Monitoring</span></span></br>|<span data-ttu-id="ef949-503">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="ef949-503">Best Practices</span></span></br>|
|<span data-ttu-id="ef949-504">[Azure Active Directory][AAD]</span><span class="sxs-lookup"><span data-stu-id="ef949-504">[Azure Active Directory][AAD]</span></span></br><span data-ttu-id="ef949-505">[Multi-Factor Authentication][MFA]</span><span class="sxs-lookup"><span data-stu-id="ef949-505">[Multi-Factor Authentication][MFA]</span></span></br><span data-ttu-id="ef949-506">[ロールベースのアクセス制御][RBAC]</span><span class="sxs-lookup"><span data-stu-id="ef949-506">[Role Base Access Controls][RBAC]</span></span></br><span data-ttu-id="ef949-507">[既定の AAD ロール][Roles]</span><span class="sxs-lookup"><span data-stu-id="ef949-507">[Default AAD Roles][Roles]</span></span> |<span data-ttu-id="ef949-508">[Azure Monitor][Monitor]</span><span class="sxs-lookup"><span data-stu-id="ef949-508">[Azure Monitor][Monitor]</span></span></br><span data-ttu-id="ef949-509">[アクティビティ ログ][ActLog]</span><span class="sxs-lookup"><span data-stu-id="ef949-509">[Activity Logs][ActLog]</span></span></br><span data-ttu-id="ef949-510">[診断ログ][DiagLog]</span><span class="sxs-lookup"><span data-stu-id="ef949-510">[Diagnostic Logs][DiagLog]</span></span></br><span data-ttu-id="ef949-511">[Microsoft Operations Management Suite][OMS]</span><span class="sxs-lookup"><span data-stu-id="ef949-511">[Microsoft Operations Management Suite][OMS]</span></span></br><span data-ttu-id="ef949-512">[Network Performance Monitor][NPM]</span><span class="sxs-lookup"><span data-stu-id="ef949-512">[Network Performance Monitor][NPM]</span></span>|<span data-ttu-id="ef949-513">[境界ネットワークのベスト プラクティス][DMZ]</span><span class="sxs-lookup"><span data-stu-id="ef949-513">[Perimeter Networks Best Practices][DMZ]</span></span></br><span data-ttu-id="ef949-514">[サブスクリプション管理][SubMgmt]</span><span class="sxs-lookup"><span data-stu-id="ef949-514">[Subscription Management][SubMgmt]</span></span></br><span data-ttu-id="ef949-515">[リソース グループの管理][RGMgmt]</span><span class="sxs-lookup"><span data-stu-id="ef949-515">[Resource Group Management][RGMgmt]</span></span></br><span data-ttu-id="ef949-516">[Azure サブスクリプションの制限][Limits]</span><span class="sxs-lookup"><span data-stu-id="ef949-516">[Azure Subscription Limits][Limits]</span></span> |
|<span data-ttu-id="ef949-517">その他の Azure サービス</span><span class="sxs-lookup"><span data-stu-id="ef949-517">Other Azure Services</span></span>|
|<span data-ttu-id="ef949-518">[Azure Web Apps][WebApps]</span><span class="sxs-lookup"><span data-stu-id="ef949-518">[Azure Web Apps][WebApps]</span></span></br><span data-ttu-id="ef949-519">[HDInsights (Hadoop) ][HDI]</span><span class="sxs-lookup"><span data-stu-id="ef949-519">[HDInsights (Hadoop) ][HDI]</span></span></br><span data-ttu-id="ef949-520">[Event Hubs][EventHubs]</span><span class="sxs-lookup"><span data-stu-id="ef949-520">[Event Hubs][EventHubs]</span></span></br><span data-ttu-id="ef949-521">[Service Bus][ServiceBus]</span><span class="sxs-lookup"><span data-stu-id="ef949-521">[Service Bus][ServiceBus]</span></span>|



## <a name="next-steps"></a><span data-ttu-id="ef949-522">次の手順</span><span class="sxs-lookup"><span data-stu-id="ef949-522">Next Steps</span></span>
 - <span data-ttu-id="ef949-523">VDC のハブとスポークの設計の基礎となるテクノロジである [VNet ピアリング][VNetPeering]の詳細を確認します</span><span class="sxs-lookup"><span data-stu-id="ef949-523">Explore [VNet Peering][VNetPeering], the underpinning technology for VDC hub and spoke designs</span></span>
 - <span data-ttu-id="ef949-524">[AAD][AAD] を実装して [RBAC][RBAC] の調査を始めます</span><span class="sxs-lookup"><span data-stu-id="ef949-524">Implement [AAD][AAD] to get started with [RBAC][RBAC] exploration</span></span>
 - <span data-ttu-id="ef949-525">組織の構造、要件、ポリシーを満たすサブスクリプションとリソースの管理モデルおよび RBAC モデルを開発します。</span><span class="sxs-lookup"><span data-stu-id="ef949-525">Develop a Subscription and Resource management model and RBAC model to meet the structure, requirements, and polices of your organization.</span></span> <span data-ttu-id="ef949-526">最も重要なアクティビティは計画です。</span><span class="sxs-lookup"><span data-stu-id="ef949-526">The most important activity is planning.</span></span> <span data-ttu-id="ef949-527">再編成、合併、新製品ラインなどの場合は、可能な限り計画してください。</span><span class="sxs-lookup"><span data-stu-id="ef949-527">As much as practical, plan for reorganizations, mergers, new product lines, etc.</span></span>

<!--Image References-->
[0]: ./images/networking-redundant-equipment.png "コンポーネントのオーバーラップの例" 
[1]: ./images/networking-vdc-high-level.png "ハブとスポークの VDC の高度な例"
[2]: ./images/networking-hub-spokes-cluster.png "ハブとスポークのクラスター"
[3]: ./images/networking-spoke-to-spoke.png "スポーク間"
[4]: ./images/networking-vdc-block-level-diagram.png "VDC のブロック レベルの図"
[5]: ./images/networking-users-groups-subsciptions.png "ユーザー、グループ、サブスクリプション、プロジェクト"
[6]: ./images/networking-infrastructure-high-level.png "インフラストラクチャの概要図"
[7]: ./images/networking-highlevel-perimeter-networks.png "インフラストラクチャの概要図"
[8]: ./images/networking-vnet-peering-perimeter-neworks.png "VNet ピアリングと境界ネットワーク"
[9]: ./images/networking-high-level-diagram-monitoring.png "監視の概要図"
[10]: ./images/networking-high-level-workloads.png "ワークロードの概要図"

<!--Link References-->
[Limits]: /azure/azure-subscription-service-limits
[Roles]: /azure/role-based-access-control/built-in-roles
[VNet]: /azure/virtual-network/virtual-networks-overview
[NSG]: /azure/virtual-network/virtual-networks-nsg
[DNS]: /azure/dns/dns-overview
[PrivateDNS]: /azure/dns/private-dns-overview
[VNetPeering]: /azure/virtual-network/virtual-network-peering-overview 
[UDR]: /azure/virtual-network/virtual-networks-udr-overview 
[RBAC]: /azure/role-based-access-control/overview
[MFA]: /azure/multi-factor-authentication/multi-factor-authentication
[AAD]: /azure/active-directory/active-directory-whatis
[VPN]: /azure/vpn-gateway/vpn-gateway-about-vpngateways 
[ExR]: /azure/expressroute/expressroute-introduction 
[NVA]: /azure/architecture/reference-architectures/dmz/nva-ha
[SubMgmt]: /azure/architecture/cloud-adoption/appendix/azure-scaffold 
[RGMgmt]: /azure/azure-resource-manager/resource-group-overview
[DMZ]: /azure/best-practices-network-security
[ALB]: /azure/load-balancer/load-balancer-overview
[PIP]: /azure/virtual-network/resource-groups-networking#public-ip-address
[AppGW]: /azure/application-gateway/application-gateway-introduction
[WAF]: /azure/application-gateway/application-gateway-web-application-firewall-overview
[Monitor]: /azure/monitoring-and-diagnostics/
[ActLog]: /azure/monitoring-and-diagnostics/monitoring-overview-activity-logs 
[DiagLog]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs
[NSGLog]: /azure/virtual-network/virtual-network-nsg-manage-log
[OMS]: /azure/operations-management-suite/operations-management-suite-overview
[NPM]: /azure/log-analytics/log-analytics-network-performance-monitor
[WebApps]: /azure/app-service/
[HDI]: /azure/hdinsight/hdinsight-hadoop-introduction
[EventHubs]: /azure/event-hubs/event-hubs-what-is-event-hubs 
[ServiceBus]: /azure/service-bus-messaging/service-bus-messaging-overview
[TM]: /azure/traffic-manager/traffic-manager-overview
