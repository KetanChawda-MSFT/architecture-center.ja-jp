---
title: 高可用性 SharePoint Server 2016 ファームの Azure での実行
description: 高可用性 SharePoint Server 2016 ファームを Azure で設定するための実証済みプラクティス。
author: njray
ms.date: 08/01/2017
ms.openlocfilehash: d1e3f0b73c94844ac649bf2abb6917809202fdb7
ms.sourcegitcommit: c441fd165e6bebbbbbc19854ec6f3676be9c3b25
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/30/2018
ms.locfileid: "30270124"
---
# <a name="run-a-high-availability-sharepoint-server-2016-farm-in-azure"></a><span data-ttu-id="58337-103">高可用性 SharePoint Server 2016 ファームの Azure での実行</span><span class="sxs-lookup"><span data-stu-id="58337-103">Run a high availability SharePoint Server 2016 farm in Azure</span></span>

<span data-ttu-id="58337-104">この参照用アーキテクチャは、高可用性 SharePoint Server 2016 ファームを Azure で設定し、MinRole トポロジおよび SQL Server Always On 可用性グループを使用するための一連の実証済みプラクティスを示します。</span><span class="sxs-lookup"><span data-stu-id="58337-104">This reference architecture shows a set of proven practices for setting up a high availability SharePoint Server 2016 farm on Azure, using MinRole topology and SQL Server Always On availability groups.</span></span> <span data-ttu-id="58337-105">SharePoint ファームは、インターネットに接続するエンドポイントまたはプレゼンスがない、セキュアな仮想ネットワークにデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="58337-105">The SharePoint farm is deployed in a secured virtual network with no Internet-facing endpoint or presence.</span></span> [<span data-ttu-id="58337-106">**こちらのソリューションをデプロイしてください**。</span><span class="sxs-lookup"><span data-stu-id="58337-106">**Deploy this solution**.</span></span>](#deploy-the-solution) 

![](./images/sharepoint-ha.png)

<span data-ttu-id="58337-107">"*このアーキテクチャの [Visio ファイル][visio-download]をダウンロードします。*"</span><span class="sxs-lookup"><span data-stu-id="58337-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="58337-108">アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="58337-108">Architecture</span></span>

<span data-ttu-id="58337-109">このアーキテクチャは、「[Run Windows VMs for an N-tier application][windows-n-tier]」(n 層アプリケーションでの Windows VM の実行) で説明したアーキテクチャ上に構築されています。</span><span class="sxs-lookup"><span data-stu-id="58337-109">This architecture builds on the one shown in [Run Windows VMs for an N-tier application][windows-n-tier].</span></span> <span data-ttu-id="58337-110">Azure 仮想ネットワーク (VNet) 内に高可用性を備えた SharePoint Server 2016 ファームをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="58337-110">It deploys a SharePoint Server 2016 farm with high availability inside an Azure virtual network (VNet).</span></span> <span data-ttu-id="58337-111">このアーキテクチャは、テスト環境または実稼働環境、Office 365 を含む SharePoint ハイブリッド インフラストラクチャに適しており、ディザスター リカバリー シナリオの基礎としても適しています。</span><span class="sxs-lookup"><span data-stu-id="58337-111">This architecture is suitable for a test or production environment, a SharePoint hybrid infrastructure with Office 365, or as the basis for a disaster recovery scenario.</span></span>

<span data-ttu-id="58337-112">アーキテクチャは、次のコンポーネントで構成されています。</span><span class="sxs-lookup"><span data-stu-id="58337-112">The architecture consists of the following components:</span></span>

- <span data-ttu-id="58337-113">**リソース グループ**。</span><span class="sxs-lookup"><span data-stu-id="58337-113">**Resource groups**.</span></span> <span data-ttu-id="58337-114">[リソース グループ][resource-group]は、Azure の関連リソースを保持するコンテナーです。</span><span class="sxs-lookup"><span data-stu-id="58337-114">A [resource group][resource-group] is a container that holds related Azure resources.</span></span> <span data-ttu-id="58337-115">1 つのリソース グループが SharePoint サーバーで使用され、もう 1 つのリソース グループが VM とは独立しているインフラストラクチャ コンポーネント (仮想ネットワークやロード バランサーなど) で使用されます。</span><span class="sxs-lookup"><span data-stu-id="58337-115">One resource group is used for the SharePoint servers, and another resource group is used for infrastructure components that are independent of VMs, such as the virtual network and load balancers.</span></span>

- <span data-ttu-id="58337-116">**仮想ネットワーク (VNet)**。</span><span class="sxs-lookup"><span data-stu-id="58337-116">**Virtual network (VNet)**.</span></span> <span data-ttu-id="58337-117">VM は一意のイントラネット アドレス空間を使用して VNet にデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="58337-117">The VMs are deployed in a VNet with a unique intranet address space.</span></span> <span data-ttu-id="58337-118">VNet はさらにサブネットに分割されます。</span><span class="sxs-lookup"><span data-stu-id="58337-118">The VNet is further subdivided into subnets.</span></span> 

- <span data-ttu-id="58337-119">**仮想マシン (VM)**。</span><span class="sxs-lookup"><span data-stu-id="58337-119">**Virtual machines (VMs)**.</span></span> <span data-ttu-id="58337-120">VM は VNet にデプロイされ、プライベート静的 IP アドレスがすべての VM に割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="58337-120">The VMs are deployed into the VNet, and private static IP addresses are assigned to all of the VMs.</span></span> <span data-ttu-id="58337-121">静的 IP アドレスは、IP アドレスのキャッシュや再起動後のアドレスの変更に伴う問題を回避するため、SQL Server と SharePoint Server 2016 を実行する VM に推奨されます。</span><span class="sxs-lookup"><span data-stu-id="58337-121">Static IP addresses are recommended for the VMs running SQL Server and SharePoint Server 2016, to avoid issues with IP address caching and changes of addresses after a restart.</span></span>

- <span data-ttu-id="58337-122">**可用性セット**。</span><span class="sxs-lookup"><span data-stu-id="58337-122">**Availability sets**.</span></span> <span data-ttu-id="58337-123">各 SharePoint ロールの VM を別の[可用性セット][availability-set]に配置し、ロールごとに少なくとも 2 つの仮想マシン (VM) をプロビジョニングします。</span><span class="sxs-lookup"><span data-stu-id="58337-123">Place the VMs for each SharePoint role into separate [availability sets][availability-set], and provision at least two virtual machines (VMs) for each role.</span></span> <span data-ttu-id="58337-124">こうすると VM が高度なサービス レベル アグリーメント (SLA) に対応できるようになります。</span><span class="sxs-lookup"><span data-stu-id="58337-124">This makes the VMs eligible for a higher service level agreement (SLA).</span></span> 

- <span data-ttu-id="58337-125">**内部ロード バランサー**: </span><span class="sxs-lookup"><span data-stu-id="58337-125">**Internal load balancer**.</span></span> <span data-ttu-id="58337-126">[ロード バランサー][load-balancer]は、SharePoint の要求トラフィックをオンプレミス ネットワークから SharePoint ファームのフロントエンド Web サーバーに均等配置します。</span><span class="sxs-lookup"><span data-stu-id="58337-126">The [load balancer][load-balancer] distributes SharePoint request traffic from the on-premises network to the front-end web servers of the SharePoint farm.</span></span> 

- <span data-ttu-id="58337-127">**ネットワーク セキュリティ グループ (NSG)**。</span><span class="sxs-lookup"><span data-stu-id="58337-127">**Network security groups (NSGs)**.</span></span> <span data-ttu-id="58337-128">仮想マシンを含むサブネットごとに、[ネットワーク セキュリティ グループ][nsg]が作成されます。</span><span class="sxs-lookup"><span data-stu-id="58337-128">For each subnet that contains virtual machines, a [network security group][nsg] is created.</span></span> <span data-ttu-id="58337-129">NSG を使用して、サブネットを分離するために VNet 内のネットワーク トラフィックを制限します。</span><span class="sxs-lookup"><span data-stu-id="58337-129">Use NSGs to restrict network traffic within the VNet, in order to isolate subnets.</span></span> 

- <span data-ttu-id="58337-130">**ゲートウェイ**。</span><span class="sxs-lookup"><span data-stu-id="58337-130">**Gateway**.</span></span> <span data-ttu-id="58337-131">ゲートウェイによって、オンプレミス ネットワークと Azure 仮想ネットワークの間に接続が提供されます。</span><span class="sxs-lookup"><span data-stu-id="58337-131">The gateway provides a connection between your on-premises network and the Azure virtual network.</span></span> <span data-ttu-id="58337-132">この接続は ExpressRoute またはサイト間 VPN を使用できます。</span><span class="sxs-lookup"><span data-stu-id="58337-132">Your connection can use ExpressRoute or site-to-site VPN.</span></span> <span data-ttu-id="58337-133">詳しくは、「[オンプレミス ネットワークの Azure への接続][hybrid-ra]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-133">For more information, see [Connect an on-premises network to Azure][hybrid-ra].</span></span>

- <span data-ttu-id="58337-134">**Windows Server Active Directory (AD) ドメイン コントローラー**。</span><span class="sxs-lookup"><span data-stu-id="58337-134">**Windows Server Active Directory (AD) domain controllers**.</span></span> <span data-ttu-id="58337-135">SharePoint Server 2016 では Azure Active Directory Domain Services の使用はサポートされないため、Windows Server AD ドメイン コントローラーをデプロイする必要があります。</span><span class="sxs-lookup"><span data-stu-id="58337-135">Because SharePoint Server 2016 does not support using Azure Active Directory Domain Services, you must deploy Windows Server AD domain controllers.</span></span> <span data-ttu-id="58337-136">これらのドメイン コントローラーは Azure VNet で実行し、オンプレミスの Windows Server AD フォレストと信頼関係を保ちます。</span><span class="sxs-lookup"><span data-stu-id="58337-136">These domain controllers run in the Azure VNet and have a trust relationship with the on-premises Windows Server AD forest.</span></span> <span data-ttu-id="58337-137">SharePoint ファーム リソースに対するクライアント Web 要求は、ゲートウェイ接続経由でオンプレミス ネットワークに認証のトラフィックを送信する代わりに、VNet 内で認証されます。</span><span class="sxs-lookup"><span data-stu-id="58337-137">Client web requests for SharePoint farm resources are authenticated in the VNet rather than sending that authentication traffic across the gateway connection to the on-premises network.</span></span> <span data-ttu-id="58337-138">DNS では、イントラネット A または CNAME レコードが作成されるため、イントラネット ユーザーは SharePoint ファームの名前を内部ロード バランサーのプライベート IP アドレスに解決できます。</span><span class="sxs-lookup"><span data-stu-id="58337-138">In DNS, intranet A or CNAME records are created so that intranet users can resolve the name of the SharePoint farm to the private IP address of the internal load balancer.</span></span>

- <span data-ttu-id="58337-139">**SQL Server Always On 可用性グループ**。</span><span class="sxs-lookup"><span data-stu-id="58337-139">**SQL Server Always On Availability Group**.</span></span> <span data-ttu-id="58337-140">SQL Server データベースの高可用性を実現するには、[SQL Server Always On 可用性グループ][sql-always-on]を推奨します。</span><span class="sxs-lookup"><span data-stu-id="58337-140">For high availability of the SQL Server database, we recommend [SQL Server Always On Availability Groups][sql-always-on].</span></span> <span data-ttu-id="58337-141">2 つの仮想マシンが SQL Server で使用されます。</span><span class="sxs-lookup"><span data-stu-id="58337-141">Two virtual machines are used for SQL Server.</span></span> <span data-ttu-id="58337-142">1 つにはプライマリ データベース レプリカが含まれ、もう 1 つにはセカンダリ レプリカが含まれます。</span><span class="sxs-lookup"><span data-stu-id="58337-142">One contains the primary database replica and the other contains the secondary replica.</span></span> 

- <span data-ttu-id="58337-143">**マジョリティ ノード VM**。</span><span class="sxs-lookup"><span data-stu-id="58337-143">**Majority node VM**.</span></span> <span data-ttu-id="58337-144">この VM を使用すると、フェールオーバー クラスターがクォーラムを確立できます。</span><span class="sxs-lookup"><span data-stu-id="58337-144">This VM allows the failover cluster to establish quorum.</span></span> <span data-ttu-id="58337-145">詳しくは、「[フェールオーバー クラスターのクォーラム構成について][sql-quorum]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-145">For more information, see [Understanding Quorum Configurations in a Failover Cluster][sql-quorum].</span></span>

- <span data-ttu-id="58337-146">**SharePoint サーバー**。</span><span class="sxs-lookup"><span data-stu-id="58337-146">**SharePoint servers**.</span></span> <span data-ttu-id="58337-147">SharePoint サーバーは、Web フロントエンド、キャッシュ、アプリケーション、およびロールの検索を実行します。</span><span class="sxs-lookup"><span data-stu-id="58337-147">The SharePoint servers perform the web front-end, caching, application, and search roles.</span></span> 

- <span data-ttu-id="58337-148">**Jumpbox**。</span><span class="sxs-lookup"><span data-stu-id="58337-148">**Jumpbox**.</span></span> <span data-ttu-id="58337-149">[要塞ホスト][bastion-host]とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="58337-149">Also called a [bastion host][bastion-host].</span></span> <span data-ttu-id="58337-150">これは、管理者が他の VM に接続するために使用するネットワーク上のセキュアな VM です。</span><span class="sxs-lookup"><span data-stu-id="58337-150">This is a secure VM on the network that administrators use to connect to the other VMs.</span></span> <span data-ttu-id="58337-151">jumpbox の NSG は、セーフ リストにあるパブリック IP アドレスからのリモート トラフィックのみを許可します。</span><span class="sxs-lookup"><span data-stu-id="58337-151">The jumpbox has an NSG that allows remote traffic only from public IP addresses on a safe list.</span></span> <span data-ttu-id="58337-152">NSG は、リモート デスクトップ (RDP) トラフィックを許可する必要があります。</span><span class="sxs-lookup"><span data-stu-id="58337-152">The NSG should permit remote desktop (RDP) traffic.</span></span>

## <a name="recommendations"></a><span data-ttu-id="58337-153">Recommendations</span><span class="sxs-lookup"><span data-stu-id="58337-153">Recommendations</span></span>

<span data-ttu-id="58337-154">実際の要件は、ここで説明するアーキテクチャとは異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="58337-154">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="58337-155">これらの推奨事項を開始点として使用してください。</span><span class="sxs-lookup"><span data-stu-id="58337-155">Use these recommendations as a starting point.</span></span>

### <a name="resource-group-recommendations"></a><span data-ttu-id="58337-156">リソース グループの推奨事項</span><span class="sxs-lookup"><span data-stu-id="58337-156">Resource group recommendations</span></span>

<span data-ttu-id="58337-157">サーバー ロールごとにリソース グループを分け、グローバル リソースであるインフラストラクチャ コンポーネントにも別のリソース グループを用意することを推奨します。</span><span class="sxs-lookup"><span data-stu-id="58337-157">We recommend separating resource groups according to the server role, and having a separate resource group for infrastructure components that are global resources.</span></span> <span data-ttu-id="58337-158">このアーキテクチャでは、SharePoint リソースが 1 つのグループを形成し、SQL Server と他のユーティリティ アセットがもう 1 つのグループを形成します。</span><span class="sxs-lookup"><span data-stu-id="58337-158">In this architecture, the SharePoint resources form one group, while the SQL Server and other utility assets form another.</span></span>

### <a name="virtual-network-and-subnet-recommendations"></a><span data-ttu-id="58337-159">仮想ネットワークとサブネットの推奨事項</span><span class="sxs-lookup"><span data-stu-id="58337-159">Virtual network and subnet recommendations</span></span>

<span data-ttu-id="58337-160">SharePoint ロールごとに 1 つのサブネット、ゲートウェイに 1 つのサブネット、および jumpbox に 1 つのサブネットを使用します。</span><span class="sxs-lookup"><span data-stu-id="58337-160">Use one subnet for each SharePoint role, plus a subnet for the gateway and one for the jumpbox.</span></span> 

<span data-ttu-id="58337-161">ゲートウェイ サブネット名は、*GatewaySubnet* にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="58337-161">The gateway subnet must be named *GatewaySubnet*.</span></span> <span data-ttu-id="58337-162">ゲートウェイ サブネットのアドレス空間には、仮想ネットワーク アドレス空間の最後の部分を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="58337-162">Assign the gateway subnet address space from the last part of the virtual network address space.</span></span> <span data-ttu-id="58337-163">詳しくは、「[Connect an on-premises network to Azure using a VPN gateway][hybrid-vpn-ra]」(VPN ゲートウェイを使用したオンプレミス ネットワークの Azure への接続) をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-163">For more information, see [Connect an on-premises network to Azure using a VPN gateway][hybrid-vpn-ra].</span></span>

### <a name="vm-recommendations"></a><span data-ttu-id="58337-164">VM の推奨事項</span><span class="sxs-lookup"><span data-stu-id="58337-164">VM recommendations</span></span>

<span data-ttu-id="58337-165">Standard DSv2 仮想マシン サイズに基づくと、このアーキテクチャでは最小で 38 コアが必要です。</span><span class="sxs-lookup"><span data-stu-id="58337-165">Based on Standard DSv2 virtual machine sizes, this architecture requires a minimum of 38 cores:</span></span>

- <span data-ttu-id="58337-166">Standard_DS3_v2 上に 8 つの SharePoint サーバー (それぞれ 4 コア) = 32 コア</span><span class="sxs-lookup"><span data-stu-id="58337-166">8 SharePoint servers on Standard_DS3_v2 (4 cores each) = 32 cores</span></span>
- <span data-ttu-id="58337-167">Standard_DS1_v2 上に 2 つの Active Directory ドメイン コントローラー (それぞれ 1 コア) = 2 コア</span><span class="sxs-lookup"><span data-stu-id="58337-167">2 Active Directory domain controllers on Standard_DS1_v2 (1 core each) = 2 cores</span></span>
- <span data-ttu-id="58337-168">Standard_DS1_v2 上に 2 つの SQL Server VM = 2 コア</span><span class="sxs-lookup"><span data-stu-id="58337-168">2 SQL Server VMs on Standard_DS1_v2 = 2 cores</span></span>
- <span data-ttu-id="58337-169">Standard_DS1_v2 上に 1 つのマジョリティ ノード = 1 コア</span><span class="sxs-lookup"><span data-stu-id="58337-169">1 majority node on Standard_DS1_v2 = 1 core</span></span>
- <span data-ttu-id="58337-170">Standard_DS1_v2 上に 1 つの管理サーバー = 1 コア</span><span class="sxs-lookup"><span data-stu-id="58337-170">1 management server on Standard_DS1_v2 = 1 core</span></span>

<span data-ttu-id="58337-171">コアの合計数は、選択する VM のサイズによって異なります。</span><span class="sxs-lookup"><span data-stu-id="58337-171">The total number of cores will depend on the VM sizes that you select.</span></span> <span data-ttu-id="58337-172">詳しくは、以下の「[SharePoint Server の推奨事項](#sharepoint-server-recommendations)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-172">For more information, see [SharePoint Server recommendations](#sharepoint-server-recommendations) below.</span></span>

<span data-ttu-id="58337-173">デプロイについて Azure サブスクリプションに十分な VM コア クォータがあることを確認してください。不足している場合はデプロイで障害が発生します。</span><span class="sxs-lookup"><span data-stu-id="58337-173">Make sure your Azure subscription has enough VM core quota for the deployment, or the deployment will fail.</span></span> <span data-ttu-id="58337-174">「[Azure サブスクリプションとサービスの制限、クォータ、制約][quotas]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-174">See [Azure subscription and service limits, quotas, and constraints][quotas].</span></span> 
 
### <a name="nsg-recommendations"></a><span data-ttu-id="58337-175">NSG の推奨事項</span><span class="sxs-lookup"><span data-stu-id="58337-175">NSG recommendations</span></span>

<span data-ttu-id="58337-176">VM を含むサブネットごとに 1 つの NSG を用意して、サブネットを分離できるようにすることを推奨します。</span><span class="sxs-lookup"><span data-stu-id="58337-176">We recommend having one NSG for each subnet that contains VMs, to enable subnet isolation.</span></span> <span data-ttu-id="58337-177">サブネットの分離を構成する場合は、各サブネットについて許可または拒否するインバウンド トラフィックまたはアウトバウンド トラフィックを定義する NSG ルールを追加します。</span><span class="sxs-lookup"><span data-stu-id="58337-177">If you want to configure subnet isolation, add NSG rules that define the allowed or denied inbound or outbound traffic for each subnet.</span></span> <span data-ttu-id="58337-178">詳しくは、「[ネットワーク セキュリティ グループによるネットワーク トラフィックのフィルタリング][virtual-networks-nsg]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-178">For more information, see [Filter network traffic with network security groups][virtual-networks-nsg].</span></span> 

<span data-ttu-id="58337-179">ゲートウェイには NSG を割り当てないでください。割り当てると、ゲートウェイが機能を停止します。</span><span class="sxs-lookup"><span data-stu-id="58337-179">Do not assign an NSG to the gateway subnet, or the gateway will stop functioning.</span></span> 

### <a name="storage-recommendations"></a><span data-ttu-id="58337-180">記憶域の推奨事項</span><span class="sxs-lookup"><span data-stu-id="58337-180">Storage recommendations</span></span>

<span data-ttu-id="58337-181">ファームの VM の記憶域構成は、オンプレミス デプロイで使用される適切なベスト プラクティスと一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="58337-181">The storage configuration of the VMs in the farm should match the appropriate best practices used for on-premises deployments.</span></span> <span data-ttu-id="58337-182">SharePoint サーバーではログ用に別のディスクが必要です。</span><span class="sxs-lookup"><span data-stu-id="58337-182">SharePoint servers should have a separate disk for logs.</span></span> <span data-ttu-id="58337-183">検索インデックス ロールをホストする SharePoint サーバーでは、検索インデックスを格納するために追加のディスク領域が必要です。</span><span class="sxs-lookup"><span data-stu-id="58337-183">SharePoint servers hosting search index roles require additional disk space for the search index to be stored.</span></span> <span data-ttu-id="58337-184">SQL Server の場合、標準プラクティスではデータとログを分離します。</span><span class="sxs-lookup"><span data-stu-id="58337-184">For SQL Server, the standard practice is to separate data and logs.</span></span> <span data-ttu-id="58337-185">データベース バックアップ ストレージにディスクをさらに追加し、[tempdb][tempdb] 用に別のディスクを使用します。</span><span class="sxs-lookup"><span data-stu-id="58337-185">Add more disks for database backup storage, and use a separate disk for [tempdb][tempdb].</span></span>

<span data-ttu-id="58337-186">最高の信頼性を得るには、[Azure Managed Disks][managed-disks] の使用を推奨します。</span><span class="sxs-lookup"><span data-stu-id="58337-186">For best reliability, we recommend using [Azure Managed Disks][managed-disks].</span></span> <span data-ttu-id="58337-187">管理対象ディスクでは可用性セット内の VM のディスクが必ず分離されるため、単一障害点を回避できます。</span><span class="sxs-lookup"><span data-stu-id="58337-187">Managed disks ensure that the disks for VMs within an availability set are isolated to avoid single points of failure.</span></span> 

> [!NOTE]
> <span data-ttu-id="58337-188">現在、この参照用アーキテクチャの Resource Manager テンプレートでは管理対象ディスクは使用されていません。</span><span class="sxs-lookup"><span data-stu-id="58337-188">Currently the Resource Manager template for this reference architecture does not use managed disks.</span></span> <span data-ttu-id="58337-189">管理対象ディスクを使用するようにテンプレートを更新する予定です。</span><span class="sxs-lookup"><span data-stu-id="58337-189">We are planning to update the template to use managed disks.</span></span>

<span data-ttu-id="58337-190">SharePoint および SQL Server のすべての VM で Premium 管理対象ディスクを使用してください。</span><span class="sxs-lookup"><span data-stu-id="58337-190">Use Premium managed disks for all SharePoint and SQL Server VMs.</span></span> <span data-ttu-id="58337-191">マジョリティ ノード サーバー、ドメイン コントローラー、および管理サーバでは、Standard 管理対象ディスクを使用できます。</span><span class="sxs-lookup"><span data-stu-id="58337-191">You can use Standard managed disks for the majority node server, the domain controllers, and the management server.</span></span> 

### <a name="sharepoint-server-recommendations"></a><span data-ttu-id="58337-192">SharePoint Server の推奨事項</span><span class="sxs-lookup"><span data-stu-id="58337-192">SharePoint Server recommendations</span></span>

<span data-ttu-id="58337-193">SharePoint ファームを構成する前に、サービスごとに 1 つの Windows Server Active Directory サービス アカウントがあることを確認します。</span><span class="sxs-lookup"><span data-stu-id="58337-193">Before configuring the SharePoint farm, make sure you have one Windows Server Active Directory service account per service.</span></span> <span data-ttu-id="58337-194">このアーキテクチャでは、ロールごとに特権を分離するために、少なくとも次に示すドメインレベル アカウントが必要です。</span><span class="sxs-lookup"><span data-stu-id="58337-194">For this architecture, you need at a minimum the following domain-level accounts to isolate privilege per role:</span></span>

- <span data-ttu-id="58337-195">SQL Server サービス アカウント</span><span class="sxs-lookup"><span data-stu-id="58337-195">SQL Server Service account</span></span>
- <span data-ttu-id="58337-196">セットアップ ユーザー アカウント</span><span class="sxs-lookup"><span data-stu-id="58337-196">Setup User account</span></span>
- <span data-ttu-id="58337-197">サーバー ファーム アカウント</span><span class="sxs-lookup"><span data-stu-id="58337-197">Server Farm account</span></span>
- <span data-ttu-id="58337-198">Search Service アカウント</span><span class="sxs-lookup"><span data-stu-id="58337-198">Search Service account</span></span>
- <span data-ttu-id="58337-199">コンテンツ アクセス アカウント</span><span class="sxs-lookup"><span data-stu-id="58337-199">Content Access account</span></span>
- <span data-ttu-id="58337-200">Web アプリ プール アカウント</span><span class="sxs-lookup"><span data-stu-id="58337-200">Web App Pool accounts</span></span>
- <span data-ttu-id="58337-201">サービス アプリ プール アカウント</span><span class="sxs-lookup"><span data-stu-id="58337-201">Service App Pool accounts</span></span>
- <span data-ttu-id="58337-202">キャッシュ スーパー ユーザー アカウント</span><span class="sxs-lookup"><span data-stu-id="58337-202">Cache Super User account</span></span>
- <span data-ttu-id="58337-203">キャッシュ スーパー リーダー アカウント</span><span class="sxs-lookup"><span data-stu-id="58337-203">Cache Super Reader account</span></span>

<span data-ttu-id="58337-204">Search インデクサーを除くすべてのロールについて、[Standard_DS3_v2][vm-sizes-general] VM サイズの使用を推奨します。</span><span class="sxs-lookup"><span data-stu-id="58337-204">For all roles except the Search Indexer, we recommended using the [Standard_DS3_v2][vm-sizes-general] VM size.</span></span> <span data-ttu-id="58337-205">Search インデクサーは少なくとも [Standard_DS13_v2][vm-sizes-memory] のサイズにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="58337-205">The Search Indexer should be at least the [Standard_DS13_v2][vm-sizes-memory] size.</span></span> 

> [!NOTE]
> <span data-ttu-id="58337-206">この参照用アーキテクチャの Resource Manager テンプレートでは、デプロイをテストするという目的に合わせて Search インデクサーについて小さな DS3 のサイズを使用しています。</span><span class="sxs-lookup"><span data-stu-id="58337-206">The Resource Manager template for this reference architecture uses the smaller DS3 size for the Search Indexer, for purposes of testing the deployment.</span></span> <span data-ttu-id="58337-207">実稼働デプロイでは DS13 以上のサイズを使用してください。</span><span class="sxs-lookup"><span data-stu-id="58337-207">For a production deployment, use the DS13 size or larger.</span></span> 

<span data-ttu-id="58337-208">実稼働ワークロードについて詳しくは、「[SharePoint Server 2016 のハードウェア要件およびソフトウェア要件][sharepoint-reqs]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="58337-208">For production workloads, see [Hardware and software requirements for SharePoint Server 2016][sharepoint-reqs].</span></span> 

<span data-ttu-id="58337-209">最小 200 MB/s のディスク スループットのサポート要件を満たすには、必ず検索アーキテクチャを計画してください。</span><span class="sxs-lookup"><span data-stu-id="58337-209">To meet the support requirement for disk throughput of 200 MB per second minimum, make sure to plan the Search architecture.</span></span> <span data-ttu-id="58337-210">「[SharePoint Server 2013 でエンタープライズ検索アーキテクチャを計画する][sharepoint-search]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-210">See [Plan enterprise search architecture in SharePoint Server 2013][sharepoint-search].</span></span> <span data-ttu-id="58337-211">また、「[Best practices for crawling in SharePoint Server 2016][sharepoint-crawling](SharePoint Server 2016 のクロールのベスト プラクティス)」のガイドラインに従います。</span><span class="sxs-lookup"><span data-stu-id="58337-211">Also follow the guidelines in [Best practices for crawling in SharePoint Server 2016][sharepoint-crawling].</span></span>

<span data-ttu-id="58337-212">さらに、検索コンポーネント データを、パフォーマンスに優れている別の記憶域ボリュームまたはパーティションに格納します。</span><span class="sxs-lookup"><span data-stu-id="58337-212">In addition, store the search component data on a separate storage volume or partition with high performance.</span></span> <span data-ttu-id="58337-213">負荷を減らしてスループットを向上するには、オブジェクト キャッシュ ユーザー アカウントを構成します。これはこのアーキテクチャで必要です。</span><span class="sxs-lookup"><span data-stu-id="58337-213">To reduce load and improve throughput, configure the object cache user accounts, which are required in this architecture.</span></span> <span data-ttu-id="58337-214">Windows Server オペレーティング システム ファイル、SharePoint Server 2016 プログラム ファイル、および診断ログは、通常のパフォーマンスの 3 つの記憶域ボリュームまたはパーティションに分割します。</span><span class="sxs-lookup"><span data-stu-id="58337-214">Split the Windows Server operating system files, the SharePoint Server 2016 program files, and diagnostics logs across three separate storage volumes or partitions with normal performance.</span></span> 

<span data-ttu-id="58337-215">これらの推奨事項について詳しくは、「[SharePoint Server 2016 での初期展開の管理およびサービス アカウント][sharepoint-accounts]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-215">For more information about these recommendations, see [Initial deployment administrative and service accounts in SharePoint Server 2016][sharepoint-accounts].</span></span>

### <a name="hybrid-workloads"></a><span data-ttu-id="58337-216">ハイブリッド ワークロード</span><span class="sxs-lookup"><span data-stu-id="58337-216">Hybrid workloads</span></span>

<span data-ttu-id="58337-217">この参照用アーキテクチャでは、[SharePoint ハイブリッド環境][sharepoint-hybrid]&mdash;として使用できる SharePoint Server 2016 ファームがデプロイされます。つまり、SharePoint Server 2016 を Office 365 SharePoint Online に拡張しています。</span><span class="sxs-lookup"><span data-stu-id="58337-217">This reference architecture deploys a SharePoint Server 2016 farm that can be used as a [SharePoint hybrid environment][sharepoint-hybrid] &mdash; that is, extending SharePoint Server 2016 to Office 365 SharePoint Online.</span></span> <span data-ttu-id="58337-218">Office Online Server がある場合は、「[Office Web Apps and Office Online Server supportability in Azure][office-web-apps](Azure での Office Web Apps および Office Online Server のサポート)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-218">If you have Office Online Server, see [Office Web Apps and Office Online Server supportability in Azure][office-web-apps].</span></span>

<span data-ttu-id="58337-219">このデプロイにおける既定のサービス アプリケーションは、ハイブリッド ワークロードに対応するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="58337-219">The default service applications in this deployment are designed to support hybrid workloads.</span></span> <span data-ttu-id="58337-220">SharePoint インフラストラクチャを変更せずに、SharePoint Server 2016 および Office 365 のすべてのハイブリッド ワークロードをこのファームにデプロイできます。ただし、1 つの例外として、Cloud Hybrid Search Service Application は、既存の検索トポロジをホストするサーバーにデプロイしないでください。</span><span class="sxs-lookup"><span data-stu-id="58337-220">All SharePoint Server 2016 and Office 365 hybrid workloads can be deployed to this farm without changes to the SharePoint infrastructure, with one exception: The Cloud Hybrid Search Service Application must not be deployed onto servers hosting an existing search topology.</span></span> <span data-ttu-id="58337-221">したがって、このハイブリッド シナリオに対応するためには、1 つ以上の検索ロール用の VM をファームに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="58337-221">Therefore, one or more search-role-based VMs must be added to the farm to support this hybrid scenario.</span></span>

### <a name="sql-server-always-on-availability-groups"></a><span data-ttu-id="58337-222">SQL Server Always On 可用性グループ</span><span class="sxs-lookup"><span data-stu-id="58337-222">SQL Server Always On Availability Groups</span></span>

<span data-ttu-id="58337-223">SharePoint Server 2016 は Azure SQL Database を使用できないため、このアーキテクチャでは SQL Server 仮想マシンが使用されます。</span><span class="sxs-lookup"><span data-stu-id="58337-223">This architecture uses SQL Server virtual machines because SharePoint Server 2016 cannot use Azure SQL Database.</span></span> <span data-ttu-id="58337-224">SQL Server の高可用性をサポートするために、Always On 可用性グループの使用を推奨します。これによって、一緒にフェールオーバーする一連のデータベースが指定され、それらのデータベースの可用性が向上して復旧可能になります。</span><span class="sxs-lookup"><span data-stu-id="58337-224">To support high availability in SQL Server, we recommend using Always On Availability Groups, which specify a set of databases that fail over together, making them highly-available and recoverable.</span></span> <span data-ttu-id="58337-225">この参照用アーキテクチャではデータベースはデプロイ時に作成されますが、手動で Always On 可用性グループを有効にして、SharePoint データベースを可用性グループに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="58337-225">In this reference architecture, the databases are created during deployment, but you must manually enable Always On Availability Groups and add the SharePoint databases to an availability group.</span></span> <span data-ttu-id="58337-226">詳しくは、[可用性グループの作成と SharePoint データベースの追加][create-availability-group]に関する記事をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-226">For more information, see [Create the availability group and add the SharePoint databases][create-availability-group].</span></span>

<span data-ttu-id="58337-227">また、リスナー IP アドレスのクラスターへの追加も推奨します。これは、SQL Server 仮想マシンの内部ロード バランサーのプライベート IP アドレスです。</span><span class="sxs-lookup"><span data-stu-id="58337-227">We also recommend adding a listener IP address to the cluster, which is the private IP address of the internal load balancer for the SQL Server virtual machines.</span></span>

<span data-ttu-id="58337-228">Azure で実行する SQL Server の推奨 VM サイズやその他のパフォーマンスの推奨事項について詳しくは、「[Performance best practices for SQL Server in Azure Virtual Machines][sql-performance]」(Azure 仮想マシンでの SQL Server のパフォーマンス ベスト プラクティス) をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-228">For recommended VM sizes and other performance recommendations for SQL Server running in Azure, see [Performance best practices for SQL Server in Azure Virtual Machines][sql-performance].</span></span> <span data-ttu-id="58337-229">「[SharePoint Server 2016 ファーム内の SQL Server のベスト プラクティス][sql-sharepoint-best-practices]」の推奨事項にも従ってください。</span><span class="sxs-lookup"><span data-stu-id="58337-229">Also follow the recommendations in [Best practices for SQL Server in a SharePoint Server 2016 farm][sql-sharepoint-best-practices].</span></span>

<span data-ttu-id="58337-230">マジョリティ ノード サーバーはレプリケーション パートナーとは別のコンピューターに配置することを推奨します。</span><span class="sxs-lookup"><span data-stu-id="58337-230">We recommend that the majority node server reside on a separate computer from the replication partners.</span></span> <span data-ttu-id="58337-231">このサーバーによって、高度セーフティ モード セッションでセカンダリ パートナー サーバーが、自動フェールオーバーを開始するかどうかを認識できるようになります。</span><span class="sxs-lookup"><span data-stu-id="58337-231">The server enables the secondary replication partner server in a high-safety mode session to recognize whether to initiate an automatic failover.</span></span> <span data-ttu-id="58337-232">2 つのパートナーとは異なり、マジョリティ ノード サーバーはデータベースでは使用されず、自動フェールオーバーをサポートします。</span><span class="sxs-lookup"><span data-stu-id="58337-232">Unlike the two partners, the majority node server doesn't serve the database but rather supports automatic failover.</span></span> 

## <a name="scalability-considerations"></a><span data-ttu-id="58337-233">スケーラビリティに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="58337-233">Scalability considerations</span></span>

<span data-ttu-id="58337-234">既存のサーバーを拡張するには、VM サイズを変更するだけですみます。</span><span class="sxs-lookup"><span data-stu-id="58337-234">To scale up the existing servers, simply change the VM size.</span></span> 

<span data-ttu-id="58337-235">SharePoint Server 2016 の [MinRoles][minroles] 機能により、サーバーのロールに基づいてサーバーをスケールアウトできます。ロールからサーバーを削除することもできます。</span><span class="sxs-lookup"><span data-stu-id="58337-235">With the [MinRoles][minroles] capability in SharePoint Server 2016, you can scale out servers based on the server's role and also remove servers from a role.</span></span> <span data-ttu-id="58337-236">サーバーをロールに追加するときは、単独ロールのいずれか、または組み合わされたロールのいずれかを指定できます。</span><span class="sxs-lookup"><span data-stu-id="58337-236">When you add servers to a role, you can specify any of the single roles or one of the combined roles.</span></span> <span data-ttu-id="58337-237">ただし、サーバーを検索ロールに追加する場合は、PowerShell を使用して検索トポロジも再構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="58337-237">If you add servers to the Search role, however, you must also reconfigure the search topology using PowerShell.</span></span> <span data-ttu-id="58337-238">MinRoles を使用してロールを変換することもできます。</span><span class="sxs-lookup"><span data-stu-id="58337-238">You can also convert roles using MinRoles.</span></span> <span data-ttu-id="58337-239">詳しくは、「[SharePoint Server 2016 での MinRole サーバー ファームの管理][sharepoint-minrole]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-239">For more information, see [Managing a MinRole Server Farm in SharePoint Server 2016][sharepoint-minrole].</span></span>

<span data-ttu-id="58337-240">SharePoint Server 2016 では自動スケーリングのための仮想マシン スケール セットの使用はサポートされないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="58337-240">Note that SharePoint Server 2016 doesn't support using virtual machine scale sets for auto-scaling.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="58337-241">可用性に関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="58337-241">Availability considerations</span></span>

<span data-ttu-id="58337-242">この参照用アーキテクチャでは、Azure リージョン内の高可用性がサポートされます。ロールごとに少なくとも 2 つの VM が可用性セット内にデプロイされているためです。</span><span class="sxs-lookup"><span data-stu-id="58337-242">This reference architecture supports high availability within an Azure region, because each role has at least two VMs deployed in an availability set.</span></span>

<span data-ttu-id="58337-243">リージョン障害に対して保護するには、異なる Azure リージョンに別のディザスター リカバリー ファームを作成します。</span><span class="sxs-lookup"><span data-stu-id="58337-243">To protect against a regional failure, create a separate disaster recovery farm in a different Azure region.</span></span> <span data-ttu-id="58337-244">目標復旧時間 (RTO) と目標復旧時点 (RPO) によって設定の要件が決まります。</span><span class="sxs-lookup"><span data-stu-id="58337-244">Your recovery time objectives (RTOs) and recovery point objectives (RPOs) will determine the setup requirements.</span></span> <span data-ttu-id="58337-245">詳しくは、[SharePoint Server 2016 用のディザスター リカバリー戦略の選択][sharepoint-dr]に関する記事をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-245">For details, see [Choose a disaster recovery strategy for SharePoint 2016][sharepoint-dr].</span></span> <span data-ttu-id="58337-246">セカンダリ リージョンは、プライマリ リージョンと "*ペアになっているリージョン*" であることが必要です。</span><span class="sxs-lookup"><span data-stu-id="58337-246">The secondary region should be a *paired region* with the primary region.</span></span> <span data-ttu-id="58337-247">広範囲にわたって障害が発生した場合は、すべてのペアで一方のリージョンの復旧が優先されます。</span><span class="sxs-lookup"><span data-stu-id="58337-247">In the event of a broad outage, recovery of one region is prioritized out of every pair.</span></span> <span data-ttu-id="58337-248">詳しくは、「[ビジネス継続性とディザスター リカバリー (BCDR): Azure のペアになっているリージョン][paired-regions]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-248">For more information, see [Business continuity and disaster recovery (BCDR): Azure Paired Regions][paired-regions].</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="58337-249">管理容易性に関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="58337-249">Manageability considerations</span></span>

<span data-ttu-id="58337-250">サーバー、サーバー ファーム、およびサイトを運用して管理するには、SharePoint の運用の推奨プラクティスに従います。</span><span class="sxs-lookup"><span data-stu-id="58337-250">To operate and maintain servers, server farms, and sites, follow the recommended practices for SharePoint operations.</span></span> <span data-ttu-id="58337-251">詳しくは、[SharePoint Server 2016 の運用][sharepoint-ops]に関する記事をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-251">For more information, see [Operations for SharePoint Server 2016][sharepoint-ops].</span></span>

<span data-ttu-id="58337-252">SharePoint 環境で SQL Server を管理する際に検討するタスクは、データベース アプリケーションで一般的に検討されるタスクとは異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="58337-252">The tasks to consider when managing SQL Server in a SharePoint environment may differ from the ones typically considered for a database application.</span></span> <span data-ttu-id="58337-253">ベスト プラクティスは、すべての SQL データベースを週 1 回完全にバックアップし、さらに毎晩増分バックアップすることです。</span><span class="sxs-lookup"><span data-stu-id="58337-253">A best practice is to fully back up all SQL databases weekly with incremental nightly backups.</span></span> <span data-ttu-id="58337-254">トランザクション ログは 15 分間隔でバックアップします。</span><span class="sxs-lookup"><span data-stu-id="58337-254">Back up transaction logs every 15 minutes.</span></span> <span data-ttu-id="58337-255">別のプラクティスでは、SQL Server メンテナンス タスクをデータベースに実装し、組み込みの SharePoint メンテナンス タスクは無効にします。</span><span class="sxs-lookup"><span data-stu-id="58337-255">Another practice is to implement SQL Server maintenance tasks on the databases while disabling the built-in SharePoint ones.</span></span> <span data-ttu-id="58337-256">詳しくは、「[ストレージおよび SQL Server の容量計画と構成 ][sql-server-capacity-planning]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-256">For more information, see [Storage and SQL Server capacity planning and configuration][sql-server-capacity-planning].</span></span> 

## <a name="security-considerations"></a><span data-ttu-id="58337-257">セキュリティに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="58337-257">Security considerations</span></span>

<span data-ttu-id="58337-258">SharePoint Server 2016 の実行に使用されるドメインレベル サービス アカウントでは、ドメイン参加や認証のプロセスで Windows Server AD ドメイン コントローラーが必要です。</span><span class="sxs-lookup"><span data-stu-id="58337-258">The domain-level service accounts used to run SharePoint Server 2016 require Windows Server AD domain controllers for domain-join and authentication processes.</span></span> <span data-ttu-id="58337-259">Azure Active Directory Domain Services はこの目的には使用できません。</span><span class="sxs-lookup"><span data-stu-id="58337-259">Azure Active Directory Domain Services can't be used for this purpose.</span></span> <span data-ttu-id="58337-260">イントラネットに既に配置されている Windows Server AD の ID インフラストラクチャを拡張するために、このアーキテクチャは、既存のオンプレミス Windows Server AD フォレストの 2 つの Windows Server AD レプリカ ドメイン コントローラーを使用します。</span><span class="sxs-lookup"><span data-stu-id="58337-260">To extend the Windows Server AD identity infrastructure already in place in the intranet, this architecture uses two Windows Server AD replica domain controllers of an existing on-premises Windows Server AD forest.</span></span>

<span data-ttu-id="58337-261">また、セキュリティ強化を計画するのは常に賢明です。</span><span class="sxs-lookup"><span data-stu-id="58337-261">In addition, it's always wise to plan for security hardening.</span></span> <span data-ttu-id="58337-262">他の推奨事項は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="58337-262">Other recommendations include:</span></span>

- <span data-ttu-id="58337-263">NSG にルールを追加してサブネットとロールを分離します。</span><span class="sxs-lookup"><span data-stu-id="58337-263">Add rules to NSGs to isolate subnets and roles.</span></span>
- <span data-ttu-id="58337-264">VM にパブリック IP アドレスを割り当てないでください。</span><span class="sxs-lookup"><span data-stu-id="58337-264">Don't assign public IP addresses to VMs.</span></span>
- <span data-ttu-id="58337-265">侵入の検出とペイロードの分析のためには、内部 Azure ロード バランサーではなくフロントエンド Web サーバーの前での、ネットワーク仮想アプライアンスの使用を検討します。</span><span class="sxs-lookup"><span data-stu-id="58337-265">For intrusion detection and analysis of payloads, consider using a network virtual appliance in front of the front-end web servers instead of an internal Azure load balancer.</span></span>
- <span data-ttu-id="58337-266">オプションとして、サーバー間のクリア テキスト トラフィックの暗号化のために IPsec ポリシーを使用します。</span><span class="sxs-lookup"><span data-stu-id="58337-266">As an option, use IPsec policies for encryption of cleartext traffic between servers.</span></span> <span data-ttu-id="58337-267">サブネットの分離も実行する場合は、IPsec トラフィックを許可するようにネットワーク セキュリティ グループ ルールを更新します。</span><span class="sxs-lookup"><span data-stu-id="58337-267">If you are also doing subnet isolation, update your network security group rules to allow IPsec traffic.</span></span>
- <span data-ttu-id="58337-268">VM 用のマルウェア対策エージェントをインストールします。</span><span class="sxs-lookup"><span data-stu-id="58337-268">Install anti-malware agents for the VMs.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="58337-269">ソリューションのデプロイ方法</span><span class="sxs-lookup"><span data-stu-id="58337-269">Deploy the solution</span></span>

<span data-ttu-id="58337-270">この参照用アーキテクチャのデプロイ スクリプトについては、[GitHub][github] をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-270">The deployment scripts for this reference architecture are available on [GitHub][github].</span></span> 

<span data-ttu-id="58337-271">このアーキテクチャは段階的にデプロイすることも一度にデプロイすることもできます。</span><span class="sxs-lookup"><span data-stu-id="58337-271">You can deploy this architecture incrementally or all at once.</span></span> <span data-ttu-id="58337-272">最初は、各デプロイの内容を確認できるように、段階的なデプロイをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="58337-272">The first time, we recommend an incremental deployment, so that you can see what each deployment does.</span></span> <span data-ttu-id="58337-273">次のいずれかの "*モード*" パラメーターを使用して段階を指定します。</span><span class="sxs-lookup"><span data-stu-id="58337-273">Specify the increment using one of the following *mode* parameters.</span></span>

| <span data-ttu-id="58337-274">Mode</span><span class="sxs-lookup"><span data-stu-id="58337-274">Mode</span></span>           | <span data-ttu-id="58337-275">実行内容</span><span class="sxs-lookup"><span data-stu-id="58337-275">What it does</span></span>                                                                                                            |
|----------------|-------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="58337-276">onprem</span><span class="sxs-lookup"><span data-stu-id="58337-276">onprem</span></span>         | <span data-ttu-id="58337-277">(省略可能) テストまたは評価のために、シミュレーション オンプレミス ネットワーク環境をデプロイします。</span><span class="sxs-lookup"><span data-stu-id="58337-277">(Optional) Deploys a simulated on-premises network environment, for testing or evaluation.</span></span> <span data-ttu-id="58337-278">この手順では実際のオンプレミス ネットワークには接続しません。</span><span class="sxs-lookup"><span data-stu-id="58337-278">This step does not connect to an actual on-premises network.</span></span> |
| <span data-ttu-id="58337-279">infrastructure</span><span class="sxs-lookup"><span data-stu-id="58337-279">infrastructure</span></span> | <span data-ttu-id="58337-280">SharePoint 2016 ネットワーク インフラストラクチャと jumpbox を Azure にデプロイします。</span><span class="sxs-lookup"><span data-stu-id="58337-280">Deploys the SharePoint 2016 network infrastructure and jumpbox to Azure.</span></span>                                                |
| <span data-ttu-id="58337-281">createvpn</span><span class="sxs-lookup"><span data-stu-id="58337-281">createvpn</span></span>      | <span data-ttu-id="58337-282">SharePoint とオンプレミス ネットワークの両方に仮想ネットワーク ゲートウェイをデプロイし、接続します。</span><span class="sxs-lookup"><span data-stu-id="58337-282">Deploys a virtual network gateway for both the SharePoint and on-premises networks and connects them.</span></span> <span data-ttu-id="58337-283">この手順は、`onprem` 手順を実行した場合のみ実行します。</span><span class="sxs-lookup"><span data-stu-id="58337-283">Run this step only if you ran the `onprem` step.</span></span>                |
| <span data-ttu-id="58337-284">ワークロード</span><span class="sxs-lookup"><span data-stu-id="58337-284">workload</span></span>       | <span data-ttu-id="58337-285">SharePoint サーバーを SharePoint ネットワークにデプロイします。</span><span class="sxs-lookup"><span data-stu-id="58337-285">Deploys the SharePoint servers to the SharePoint network.</span></span>                                                               |
| <span data-ttu-id="58337-286">security</span><span class="sxs-lookup"><span data-stu-id="58337-286">security</span></span>       | <span data-ttu-id="58337-287">ネットワーク セキュリティ グループを SharePoint ネットワークにデプロイします。</span><span class="sxs-lookup"><span data-stu-id="58337-287">Deploys the network security group to the SharePoint network.</span></span>                                                           |
| <span data-ttu-id="58337-288">すべて</span><span class="sxs-lookup"><span data-stu-id="58337-288">all</span></span>            | <span data-ttu-id="58337-289">上記のすべてをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="58337-289">Deploys all the preceding deployments.</span></span>                            


<span data-ttu-id="58337-290">シミュレーション オンプレミス ネットワーク環境に対してアーキテクチャを段階的にデプロイするには、次の手順を順番に実行します。</span><span class="sxs-lookup"><span data-stu-id="58337-290">To deploy the architecture incrementally with a simulated on-premises network environment, run the following steps in order:</span></span>

1. <span data-ttu-id="58337-291">onprem</span><span class="sxs-lookup"><span data-stu-id="58337-291">onprem</span></span>
2. <span data-ttu-id="58337-292">インフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="58337-292">infrastructure</span></span>
3. <span data-ttu-id="58337-293">createvpn</span><span class="sxs-lookup"><span data-stu-id="58337-293">createvpn</span></span>
4. <span data-ttu-id="58337-294">ワークロード</span><span class="sxs-lookup"><span data-stu-id="58337-294">workload</span></span>
5. <span data-ttu-id="58337-295">security</span><span class="sxs-lookup"><span data-stu-id="58337-295">security</span></span>

<span data-ttu-id="58337-296">シミュレーション オンプレミス ネットワーク環境なしで、アーキテクチャを段階的にデプロイするには、次の手順を順番に実行します。</span><span class="sxs-lookup"><span data-stu-id="58337-296">To deploy the architecture incrementally without a simulated on-premises network environment, run the following steps in order:</span></span>

1. <span data-ttu-id="58337-297">インフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="58337-297">infrastructure</span></span>
2. <span data-ttu-id="58337-298">ワークロード</span><span class="sxs-lookup"><span data-stu-id="58337-298">workload</span></span>
3. <span data-ttu-id="58337-299">security</span><span class="sxs-lookup"><span data-stu-id="58337-299">security</span></span>

<span data-ttu-id="58337-300">すべてを 1 回の手順でデプロイするには `all` を使用します。</span><span class="sxs-lookup"><span data-stu-id="58337-300">To deploy everything in one step, use `all`.</span></span> <span data-ttu-id="58337-301">プロセス全体に数時間かかる場合があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="58337-301">Note that the entire process may take several hours.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="58337-302">前提条件</span><span class="sxs-lookup"><span data-stu-id="58337-302">Prerequisites</span></span>

* <span data-ttu-id="58337-303">最新バージョンの [Azure PowerShell][azure-ps] をインストールします。</span><span class="sxs-lookup"><span data-stu-id="58337-303">Install the latest version of [Azure PowerShell][azure-ps].</span></span>

* <span data-ttu-id="58337-304">この参照用アーキテクチャをデプロイする前に、サブスクリプションに十分なクォータ (38 個以上のコア) があることを確認します。</span><span class="sxs-lookup"><span data-stu-id="58337-304">Before deploying this reference architecture, verify that your subscription has sufficient quota—at least 38 cores.</span></span> <span data-ttu-id="58337-305">不足している場合は、Azure ポータルを使用して、クォータを増やすためのサポート要求を発行します。</span><span class="sxs-lookup"><span data-stu-id="58337-305">If you don't have enough, use the Azure portal to submit a support request for more quota.</span></span>

* <span data-ttu-id="58337-306">このデプロイのコストを見積もるには、[料金計算ツール][azure-pricing]をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-306">To estimate the cost of this deployment, see the [Azure Pricing Calculator][azure-pricing].</span></span>

### <a name="deploy-the-reference-architecture"></a><span data-ttu-id="58337-307">参照用アーキテクチャのデプロイ</span><span class="sxs-lookup"><span data-stu-id="58337-307">Deploy the reference architecture</span></span>

1.  <span data-ttu-id="58337-308">[GitHub リポジトリ][github]をローカル コンピューターにダウンロードするか複製します。</span><span class="sxs-lookup"><span data-stu-id="58337-308">Download or clone the [GitHub repo][github] to your local computer.</span></span>

2.  <span data-ttu-id="58337-309">PowerShell ウィンドウを開き、`/sharepoint/sharepoint-2016` フォルダーに移動します。</span><span class="sxs-lookup"><span data-stu-id="58337-309">Open a PowerShell window and navigate to the `/sharepoint/sharepoint-2016` folder.</span></span>

3.  <span data-ttu-id="58337-310">次の PowerShell コマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="58337-310">Run the following PowerShell command.</span></span> <span data-ttu-id="58337-311">\<subscription id\> として Azure サブスクリプション ID を指定します。</span><span class="sxs-lookup"><span data-stu-id="58337-311">For \<subscription id\>, use your Azure subscription ID.</span></span> <span data-ttu-id="58337-312">\<location\> には、Azure リージョン (`eastus` や `westus` など) を指定します。</span><span class="sxs-lookup"><span data-stu-id="58337-312">For \<location\>, specify an Azure region, such as `eastus` or `westus`.</span></span> <span data-ttu-id="58337-313">\<mode\> には、`onprem``infrastructure`、`createvpn`、`workload``security`、または `all` を指定します。</span><span class="sxs-lookup"><span data-stu-id="58337-313">For \<mode\>, specify `onprem`, `infrastructure`, `createvpn`, `workload`, `security`, or `all`.</span></span>

    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> <mode>
    ```   
4. <span data-ttu-id="58337-314">プロンプトが表示されたら、Azure アカウントにログオンします。</span><span class="sxs-lookup"><span data-stu-id="58337-314">When prompted, log on to your Azure account.</span></span> <span data-ttu-id="58337-315">選択したモードによって異なりますが、デプロイ スクリプトは完了するまでに数時間かかることがあります。</span><span class="sxs-lookup"><span data-stu-id="58337-315">The deployment scripts can take up to several hours to complete, depending on the mode you selected.</span></span>

5. <span data-ttu-id="58337-316">デプロイが完了したら、スクリプトを実行して SQL Server Always On 可用性グループを構成します。</span><span class="sxs-lookup"><span data-stu-id="58337-316">When the deployment completes, run the scripts to configure SQL Server Always On Availability Groups.</span></span> <span data-ttu-id="58337-317">詳しくは、[readme][readme] をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="58337-317">See the [readme][readme] for details.</span></span>

> [!WARNING]
> <span data-ttu-id="58337-318">パラメーター ファイルには、ハードコーディングされたパスワード (`AweS0me@PW`) がさまざまな場所に含まれています。</span><span class="sxs-lookup"><span data-stu-id="58337-318">The parameter files include a hard-coded password (`AweS0me@PW`) in various places.</span></span> <span data-ttu-id="58337-319">デプロイする前にこれらの値を変更します。</span><span class="sxs-lookup"><span data-stu-id="58337-319">Change these values before you deploy.</span></span>


## <a name="validate-the-deployment"></a><span data-ttu-id="58337-320">デプロイの検証</span><span class="sxs-lookup"><span data-stu-id="58337-320">Validate the deployment</span></span>

<span data-ttu-id="58337-321">この参照用アーキテクチャをデプロイすると、次のリソース グループが使用したサブスクリプションの下に一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="58337-321">After you deploy this reference architecture, the following resource groups are listed under the Subscription that you used:</span></span>

| <span data-ttu-id="58337-322">リソース グループ</span><span class="sxs-lookup"><span data-stu-id="58337-322">Resource Group</span></span>        | <span data-ttu-id="58337-323">目的</span><span class="sxs-lookup"><span data-stu-id="58337-323">Purpose</span></span>                                                                                         |
|-----------------------|-------------------------------------------------------------------------------------------------|
| <span data-ttu-id="58337-324">ra-onprem-sp2016-rg</span><span class="sxs-lookup"><span data-stu-id="58337-324">ra-onprem-sp2016-rg</span></span>   | <span data-ttu-id="58337-325">オンプレミス ネットワークの Active Directory とのシミュレーションおよび SharePoint 2016 ネットワークとのフェデレーション</span><span class="sxs-lookup"><span data-stu-id="58337-325">Simulated on-premises network with Active Directory, federated with the SharePoint 2016 network</span></span> |
| <span data-ttu-id="58337-326">ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="58337-326">ra-sp2016-network-rg</span></span>  | <span data-ttu-id="58337-327">SharePoint デプロイをサポートするインフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="58337-327">Infrastructure to support SharePoint deployment</span></span>                                                 |
| <span data-ttu-id="58337-328">ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="58337-328">ra-sp2016-workload-rg</span></span> | <span data-ttu-id="58337-329">SharePoint およびサポート リソース</span><span class="sxs-lookup"><span data-stu-id="58337-329">SharePoint and supporting resources</span></span>                                                             |

### <a name="validate-access-to-the-sharepoint-site-from-the-on-premises-network"></a><span data-ttu-id="58337-330">オンプレミス ネットワークから SharePoint サイトへのアクセスの検証</span><span class="sxs-lookup"><span data-stu-id="58337-330">Validate access to the SharePoint site from the on-premises network</span></span>

1. <span data-ttu-id="58337-331">[Azure ポータル][azure-portal]の **[リソース グループ]** の下で `ra-onprem-sp2016-rg` リソース グループを選択します。</span><span class="sxs-lookup"><span data-stu-id="58337-331">In the [Azure portal][azure-portal], under **Resource groups**, select the `ra-onprem-sp2016-rg` resource group.</span></span>

2. <span data-ttu-id="58337-332">リソースの一覧で、`ra-adds-user-vm1` という名前の VM リソースを選択します。</span><span class="sxs-lookup"><span data-stu-id="58337-332">In the list of resources, select the VM resource named `ra-adds-user-vm1`.</span></span> 

3. <span data-ttu-id="58337-333">「[仮想マシンへの接続][connect-to-vm]」の説明に従って、VM に接続します。</span><span class="sxs-lookup"><span data-stu-id="58337-333">Connect to the VM, as described in [Connect to virtual machine][connect-to-vm].</span></span> <span data-ttu-id="58337-334">ユーザー名は `\onpremuser` です。</span><span class="sxs-lookup"><span data-stu-id="58337-334">The user name is `\onpremuser`.</span></span>

5.  <span data-ttu-id="58337-335">VM へのリモート接続が確立されたら、VM をブラウザーで開いて `http://portal.contoso.local` に移動します。</span><span class="sxs-lookup"><span data-stu-id="58337-335">When the remote connection to the VM is established, open a browser in the VM and navigate to `http://portal.contoso.local`.</span></span>

6.  <span data-ttu-id="58337-336">**[Windows セキュリティ]** ボックスで、ユーザー名として `contoso.local\testuser` を使用して SharePoint ポータルにログオンします。</span><span class="sxs-lookup"><span data-stu-id="58337-336">In the **Windows Security** box, log on to the SharePoint portal using `contoso.local\testuser` for the user name.</span></span>

<span data-ttu-id="58337-337">このログオンは、オンプレミス ネットワークで使用される Fabrikam.com ドメインから SharePoint ポータルで使用される contoso.local ドメインにトンネリングします。</span><span class="sxs-lookup"><span data-stu-id="58337-337">This logon tunnels from the Fabrikam.com domain used by the on-premises network to the contoso.local domain used by the SharePoint portal.</span></span> <span data-ttu-id="58337-338">SharePoint サイトが開くと、ルート デモ サイトが表示されます。</span><span class="sxs-lookup"><span data-stu-id="58337-338">When the SharePoint site opens, you'll see the root demo site.</span></span>

### <a name="validate-jumpbox-access-to-vms-and-check-configuration-settings"></a><span data-ttu-id="58337-339">jumpbox の VM へのアクセスの検証と構成設定の確認</span><span class="sxs-lookup"><span data-stu-id="58337-339">Validate jumpbox access to VMs and check configuration settings</span></span>

1.  <span data-ttu-id="58337-340">[Azure ポータル][azure-portal]の **[リソース グループ]** の下で `ra-sp2016-network-rg` リソース グループを選択します。</span><span class="sxs-lookup"><span data-stu-id="58337-340">In [Azure portal][azure-portal], under **Resource groups**, select the `ra-sp2016-network-rg` resource group.</span></span>

2.  <span data-ttu-id="58337-341">リソースの一覧で、`ra-sp2016-jb-vm1` という名前の VM リソースを選択します。これが jumpbox です。</span><span class="sxs-lookup"><span data-stu-id="58337-341">In the list of resources, select the VM resource named `ra-sp2016-jb-vm1`, which is the jumpbox.</span></span>

3. <span data-ttu-id="58337-342">「[仮想マシンへの接続][connect-to-vm]」の説明に従って、VM に接続します。</span><span class="sxs-lookup"><span data-stu-id="58337-342">Connect to the VM, as described in [Connect to virtual machine][connect-to-vm].</span></span> <span data-ttu-id="58337-343">ユーザー名は `testuser` です。</span><span class="sxs-lookup"><span data-stu-id="58337-343">The user name is `testuser`.</span></span>

4.  <span data-ttu-id="58337-344">jumpbox にログオンした後で、jumpbox から RDP セッションを開きます。</span><span class="sxs-lookup"><span data-stu-id="58337-344">After you log onto the jumpbox, open an RDP session from the jumpbox.</span></span> <span data-ttu-id="58337-345">VNet 内の他の VM に接続します。</span><span class="sxs-lookup"><span data-stu-id="58337-345">Connect to any other VMs in the VNet.</span></span> <span data-ttu-id="58337-346">ユーザー名は `testuser` です。</span><span class="sxs-lookup"><span data-stu-id="58337-346">The username is `testuser`.</span></span> <span data-ttu-id="58337-347">リモート コンピューターのセキュリティ証明書に関する警告は無視してかまいません。</span><span class="sxs-lookup"><span data-stu-id="58337-347">You can ignore the warning about the remote computer's security certificate.</span></span>

5.  <span data-ttu-id="58337-348">VM へのリモート接続が開いたら、構成を確認し、サーバー マネージャーなど管理ツールを使用して変更を加えます。</span><span class="sxs-lookup"><span data-stu-id="58337-348">When the remote connection to the VM opens, review the configuration and make changes using the administrative tools such as Server Manager.</span></span>

<span data-ttu-id="58337-349">次の表には、デプロイされる VM を示します。</span><span class="sxs-lookup"><span data-stu-id="58337-349">The following table shows the VMs that are deployed.</span></span> 

| <span data-ttu-id="58337-350">リソース名</span><span class="sxs-lookup"><span data-stu-id="58337-350">Resource Name</span></span>      | <span data-ttu-id="58337-351">目的</span><span class="sxs-lookup"><span data-stu-id="58337-351">Purpose</span></span>                                   | <span data-ttu-id="58337-352">リソース グループ</span><span class="sxs-lookup"><span data-stu-id="58337-352">Resource Group</span></span>        | <span data-ttu-id="58337-353">VM 名</span><span class="sxs-lookup"><span data-stu-id="58337-353">VM Name</span></span>                       |
|--------------------|-------------------------------------------|-----------------------|-------------------------------|
| <span data-ttu-id="58337-354">Ra-sp2016-ad-vm1</span><span class="sxs-lookup"><span data-stu-id="58337-354">Ra-sp2016-ad-vm1</span></span>   | <span data-ttu-id="58337-355">Active Directory + DNS</span><span class="sxs-lookup"><span data-stu-id="58337-355">Active Directory + DNS</span></span>                    | <span data-ttu-id="58337-356">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="58337-356">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="58337-357">Ad1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-357">Ad1.contoso.local</span></span>             |
| <span data-ttu-id="58337-358">Ra-sp2016-ad-vm2</span><span class="sxs-lookup"><span data-stu-id="58337-358">Ra-sp2016-ad-vm2</span></span>   | <span data-ttu-id="58337-359">Active Directory + DNS</span><span class="sxs-lookup"><span data-stu-id="58337-359">Active Directory + DNS</span></span>                    | <span data-ttu-id="58337-360">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="58337-360">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="58337-361">Ad2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-361">Ad2.contoso.local</span></span>             |
| <span data-ttu-id="58337-362">Ra-sp2016-fsw-vm1</span><span class="sxs-lookup"><span data-stu-id="58337-362">Ra-sp2016-fsw-vm1</span></span>  | <span data-ttu-id="58337-363">SharePoint</span><span class="sxs-lookup"><span data-stu-id="58337-363">SharePoint</span></span>                                | <span data-ttu-id="58337-364">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="58337-364">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="58337-365">Fsw1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-365">Fsw1.contoso.local</span></span>            |
| <span data-ttu-id="58337-366">Ra-sp2016-jb-vm1</span><span class="sxs-lookup"><span data-stu-id="58337-366">Ra-sp2016-jb-vm1</span></span>   | <span data-ttu-id="58337-367">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="58337-367">Jumpbox</span></span>                                   | <span data-ttu-id="58337-368">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="58337-368">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="58337-369">Jb (パブリック IP を使用してログオン)</span><span class="sxs-lookup"><span data-stu-id="58337-369">Jb (use public IP to log on)</span></span> |
| <span data-ttu-id="58337-370">Ra-sp2016-sql-vm1</span><span class="sxs-lookup"><span data-stu-id="58337-370">Ra-sp2016-sql-vm1</span></span>  | <span data-ttu-id="58337-371">SQL Always On - フェールオーバー</span><span class="sxs-lookup"><span data-stu-id="58337-371">SQL Always On - Failover</span></span>                  | <span data-ttu-id="58337-372">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="58337-372">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="58337-373">Sq1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-373">Sq1.contoso.local</span></span>             |
| <span data-ttu-id="58337-374">Ra-sp2016-sql-vm2</span><span class="sxs-lookup"><span data-stu-id="58337-374">Ra-sp2016-sql-vm2</span></span>  | <span data-ttu-id="58337-375">SQL Always On - プライマリ</span><span class="sxs-lookup"><span data-stu-id="58337-375">SQL Always On - Primary</span></span>                   | <span data-ttu-id="58337-376">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="58337-376">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="58337-377">Sq2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-377">Sq2.contoso.local</span></span>             |
| <span data-ttu-id="58337-378">Ra-sp2016-app-vm1</span><span class="sxs-lookup"><span data-stu-id="58337-378">Ra-sp2016-app-vm1</span></span>  | <span data-ttu-id="58337-379">SharePoint 2016 アプリケーション MinRole</span><span class="sxs-lookup"><span data-stu-id="58337-379">SharePoint 2016 Application MinRole</span></span>       | <span data-ttu-id="58337-380">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="58337-380">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="58337-381">App1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-381">App1.contoso.local</span></span>            |
| <span data-ttu-id="58337-382">Ra-sp2016-app-vm2</span><span class="sxs-lookup"><span data-stu-id="58337-382">Ra-sp2016-app-vm2</span></span>  | <span data-ttu-id="58337-383">SharePoint 2016 アプリケーション MinRole</span><span class="sxs-lookup"><span data-stu-id="58337-383">SharePoint 2016 Application MinRole</span></span>       | <span data-ttu-id="58337-384">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="58337-384">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="58337-385">App2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-385">App2.contoso.local</span></span>            |
| <span data-ttu-id="58337-386">Ra-sp2016-dch-vm1</span><span class="sxs-lookup"><span data-stu-id="58337-386">Ra-sp2016-dch-vm1</span></span>  | <span data-ttu-id="58337-387">SharePoint 2016 分散キャッシュ MinRole</span><span class="sxs-lookup"><span data-stu-id="58337-387">SharePoint 2016 Distributed Cache MinRole</span></span> | <span data-ttu-id="58337-388">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="58337-388">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="58337-389">Dch1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-389">Dch1.contoso.local</span></span>            |
| <span data-ttu-id="58337-390">Ra-sp2016-dch-vm2</span><span class="sxs-lookup"><span data-stu-id="58337-390">Ra-sp2016-dch-vm2</span></span>  | <span data-ttu-id="58337-391">SharePoint 2016 分散キャッシュ MinRole</span><span class="sxs-lookup"><span data-stu-id="58337-391">SharePoint 2016 Distributed Cache MinRole</span></span> | <span data-ttu-id="58337-392">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="58337-392">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="58337-393">Dch2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-393">Dch2.contoso.local</span></span>            |
| <span data-ttu-id="58337-394">Ra-sp2016-srch-vm1</span><span class="sxs-lookup"><span data-stu-id="58337-394">Ra-sp2016-srch-vm1</span></span> | <span data-ttu-id="58337-395">SharePoint 2016 検索 MinRole</span><span class="sxs-lookup"><span data-stu-id="58337-395">SharePoint 2016 Search MinRole</span></span>            | <span data-ttu-id="58337-396">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="58337-396">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="58337-397">Srch1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-397">Srch1.contoso.local</span></span>           |
| <span data-ttu-id="58337-398">Ra-sp2016-srch-vm2</span><span class="sxs-lookup"><span data-stu-id="58337-398">Ra-sp2016-srch-vm2</span></span> | <span data-ttu-id="58337-399">SharePoint 2016 検索 MinRole</span><span class="sxs-lookup"><span data-stu-id="58337-399">SharePoint 2016 Search MinRole</span></span>            | <span data-ttu-id="58337-400">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="58337-400">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="58337-401">Srch2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-401">Srch2.contoso.local</span></span>           |
| <span data-ttu-id="58337-402">Ra-sp2016-wfe-vm1</span><span class="sxs-lookup"><span data-stu-id="58337-402">Ra-sp2016-wfe-vm1</span></span>  | <span data-ttu-id="58337-403">SharePoint 2016 Web フロント エンド MinRole</span><span class="sxs-lookup"><span data-stu-id="58337-403">SharePoint 2016 Web Front End MinRole</span></span>     | <span data-ttu-id="58337-404">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="58337-404">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="58337-405">Wfe1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-405">Wfe1.contoso.local</span></span>            |
| <span data-ttu-id="58337-406">Ra-sp2016-wfe-vm2</span><span class="sxs-lookup"><span data-stu-id="58337-406">Ra-sp2016-wfe-vm2</span></span>  | <span data-ttu-id="58337-407">SharePoint 2016 Web フロント エンド MinRole</span><span class="sxs-lookup"><span data-stu-id="58337-407">SharePoint 2016 Web Front End MinRole</span></span>     | <span data-ttu-id="58337-408">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="58337-408">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="58337-409">Wfe2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="58337-409">Wfe2.contoso.local</span></span>            |


<span data-ttu-id="58337-410">**_この参照用アーキテクチャの共同作成者_** &mdash; Joe Davies、Bob Fox、Neil Hodgkinson、Paul Stork</span><span class="sxs-lookup"><span data-stu-id="58337-410">**_Contributors to this reference architecture_** &mdash;  Joe Davies, Bob Fox, Neil Hodgkinson, Paul Stork</span></span>

<!-- links -->

[availability-set]: /azure/virtual-machines/windows/manage-availability
[azure-portal]: https://portal.azure.com
[azure-ps]: /powershell/azure/overview
[azure-pricing]: https://azure.microsoft.com/pricing/calculator/
[bastion-host]: https://en.wikipedia.org/wiki/Bastion_host
[create-availability-group]: https://technet.microsoft.com/library/mt793548(v=office.16).aspx
[connect-to-vm]: /azure/virtual-machines/windows/quick-create-portal#connect-to-virtual-machine
[github]: https://github.com/mspnp/reference-architectures
[hybrid-ra]: ../hybrid-networking/index.md
[hybrid-vpn-ra]: ../hybrid-networking/vpn.md
[load-balancer]: /azure/load-balancer/load-balancer-internal-overview
[managed-disks]: /azure/storage/storage-managed-disks-overview
[minroles]: https://technet.microsoft.com/library/mt346114(v=office.16).aspx
[nsg]: /azure/virtual-network/virtual-networks-nsg
[office-web-apps]: https://support.microsoft.com/help/3199955/office-web-apps-and-office-online-server-supportability-in-azure
[paired-regions]: /azure/best-practices-availability-paired-regions
[readme]: https://github.com/mspnp/reference-architectures/tree/master/sharepoint/sharepoint-2016
[resource-group]: /azure/azure-resource-manager/resource-group-overview
[quotas]: /azure/azure-subscription-service-limits
[sharepoint-accounts]: https://technet.microsoft.com/library/ee662513(v=office.16).aspx
[sharepoint-crawling]: https://technet.microsoft.com/library/dn535606(v=office.16).aspx
[sharepoint-dr]: https://technet.microsoft.com/library/ff628971(v=office.16).aspx
[sharepoint-hybrid]: https://aka.ms/sphybrid
[sharepoint-minrole]: https://technet.microsoft.com/library/mt743705(v=office.16).aspx
[sharepoint-ops]: https://technet.microsoft.com/library/cc262289(v=office.16).aspx
[sharepoint-reqs]: https://technet.microsoft.com/library/cc262485(v=office.16).aspx
[sharepoint-search]: https://technet.microsoft.com/library/dn342836.aspx
[sql-always-on]: /sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server
[sql-performance]: /virtual-machines/windows/sql/virtual-machines-windows-sql-performance
[sql-server-capacity-planning]: https://technet.microsoft.com/library/cc298801(v=office.16).aspx
[sql-quorum]: https://technet.microsoft.com/library/cc731739(v=ws.11).aspx
[sql-sharepoint-best-practices]: https://technet.microsoft.com/library/hh292622(v=office.16).aspx
[tempdb]: /sql/relational-databases/databases/tempdb-database
[virtual-networks-nsg]: /azure/virtual-network/virtual-networks-nsg
[visio-download]: https://archcenter.blob.core.windows.net/cdn/Sharepoint-2016.vsdx
[vm-sizes-general]: /azure/virtual-machines/windows/sizes-general
[vm-sizes-memory]: /azure/virtual-machines/windows/sizes-memory
[windows-n-tier]: ../virtual-machines-windows/n-tier.md
