---
title: 'Azure 仮想データセンター: ネットワークの観点'
description: Azure で仮想データセンターを構築する方法について説明します
author: tracsman
manager: rossort
tags: azure-resource-manager
ms.service: virtual-network
ms.date: 09/24/2018
ms.author: jonor
ms.openlocfilehash: b10930ac6d6458872d8b626825d21bd0bed2b807
ms.sourcegitcommit: 16bc6a91b6b9565ca3bcc72d6eb27c2c4ae935e4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2018
ms.locfileid: "52550463"
---
# <a name="azure-virtual-datacenter-a-network-perspective"></a><span data-ttu-id="a66ff-103">Azure 仮想データセンター: ネットワークの観点</span><span class="sxs-lookup"><span data-stu-id="a66ff-103">Azure virtual datacenter: A network perspective</span></span>

## <a name="overview"></a><span data-ttu-id="a66ff-104">概要</span><span class="sxs-lookup"><span data-stu-id="a66ff-104">Overview</span></span>
<span data-ttu-id="a66ff-105">オンプレミスのアプリケーションを Azure に移行すると、大きな変更がなくても、セキュリティで保護されたコスト効率の高いインフラストラクチャのメリットが組織にもたらされます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-105">Migrating on-premises applications to Azure, even without any significant changes, provides organizations the benefit of a secured and cost-efficient infrastructure.</span></span> <span data-ttu-id="a66ff-106">このアプローチは**リフト アンド シフト**と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-106">This approach is known as **lift and shift**.</span></span> <span data-ttu-id="a66ff-107">クラウド コンピューティングで俊敏性を最大限に活用するには、Azure の機能を利用するように企業のアーキテクチャを進化させる必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-107">To make the most of the agility possible with cloud computing, enterprises should evolve their architectures to take advantage of Azure capabilities.</span></span> <span data-ttu-id="a66ff-108">Microsoft Azure では、ハイパースケールのサービスとインフラストラクチャ、エンタープライズ レベルの機能と信頼性、ハイブリッド接続のための多くの選択肢が提供されています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-108">Microsoft Azure delivers hyperscale services and infrastructure, enterprise-grade capabilities and reliability, and many choices for hybrid connectivity.</span></span> 

<span data-ttu-id="a66ff-109">お客様は、これらのクラウド サービスにインターネット経由でアクセスするか、プライベート ネットワーク接続を提供する Azure ExpressRoute を使ってアクセスするかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-109">Customers can choose to access these cloud services either via the internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="a66ff-110">Microsoft Azure プラットフォームを使用すると、インフラストラクチャをクラウドにシームレスに拡張し、多層アーキテクチャを構築できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-110">With the Microsoft Azure platform, customers can seamlessly extend their infrastructure into the cloud and build multi-tier architectures.</span></span> <span data-ttu-id="a66ff-111">また、Microsoft のパートナーも、Azure で実行するために最適化されたセキュリティ サービスと仮想アプライアンスにより、強化された機能を提供しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-111">Microsoft partners also provide enhanced capabilities by offering security services and virtual appliances that are optimized to run in Azure.</span></span>

<span data-ttu-id="a66ff-112">この記事では、多くのお客様がクラウドへの一括移行を検討するときに直面する、アーキテクチャのスケール、パフォーマンス、セキュリティに関する問題を解決するパターンと設計の概要について説明します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-112">This article provides an overview of patterns and designs that solve the architectural scale, performance, and security concerns many customers face when they think about moving en masse to the cloud.</span></span> <span data-ttu-id="a66ff-113">組織のさまざまな IT ロールをシステムの管理とガバナンスに組み込む方法の概要についても説明します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-113">An overview of how to fit different organizational IT roles into the management and governance of the system is also discussed.</span></span> <span data-ttu-id="a66ff-114">セキュリティ要件とコストの最適化に注目します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-114">Emphasis is on security requirements and cost optimization.</span></span>

## <a name="what-is-a-virtual-datacenter"></a><span data-ttu-id="a66ff-115">仮想データセンターとは</span><span class="sxs-lookup"><span data-stu-id="a66ff-115">What is a virtual datacenter?</span></span>
<span data-ttu-id="a66ff-116">当初、クラウド ソリューションは、パブリック領域で単一の比較的独立したアプリケーションをホストするように設計されていました。</span><span class="sxs-lookup"><span data-stu-id="a66ff-116">Cloud solutions were first designed to host single, relatively isolated applications in the public spectrum.</span></span> <span data-ttu-id="a66ff-117">この方法は、数年間はうまくいっていました。</span><span class="sxs-lookup"><span data-stu-id="a66ff-117">This approach worked well for a few years.</span></span> <span data-ttu-id="a66ff-118">その後、クラウド ソリューションの利点が明らかになり、複数の大規模なワークロードがクラウドでホストされるようになりました。</span><span class="sxs-lookup"><span data-stu-id="a66ff-118">Then the benefits of cloud solutions became apparent, and multiple large-scale workloads were hosted on the cloud.</span></span> <span data-ttu-id="a66ff-119">クラウド サービスのライフ サイクル全体を通じて、1 つ以上のリージョンでのデプロイのセキュリティ、信頼性、パフォーマンス、コストの問題に対処することが不可欠になりました。</span><span class="sxs-lookup"><span data-stu-id="a66ff-119">Addressing security, reliability, performance, and cost concerns of deployments in one or more regions became vital throughout the life cycle of the cloud service.</span></span>

<span data-ttu-id="a66ff-120">次のクラウド配置ダイアグラムでは、**赤色のボックス**にセキュリティ ギャップの例を示しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-120">The following cloud deployment diagram shows an example of a security gap in the **red box**.</span></span> <span data-ttu-id="a66ff-121">**黄色のボックス**は、ワークロード間での最適化ネットワーク仮想アプライアンスの余地を示しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-121">The **yellow box** shows room for optimization network virtual appliances across workloads.</span></span>

<span data-ttu-id="a66ff-122">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="a66ff-122">[![0]][0]</span></span>

<span data-ttu-id="a66ff-123">仮想データセンター (VDC) は、エンタープライズ ワークロードをサポートするためのスケーリングの必要性から生まれました。</span><span class="sxs-lookup"><span data-stu-id="a66ff-123">Virtual datacenter (VDC) was born from the necessity to scale to support enterprise workloads.</span></span> <span data-ttu-id="a66ff-124">また、パブリック クラウドで大規模なアプリケーションをサポートするときに発生する問題にも対処します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-124">It also deals with the problems introduced when supporting large-scale applications in the public cloud.</span></span>

<span data-ttu-id="a66ff-125">VDC は、クラウドのアプリケーション ワークロードであるだけでありません。</span><span class="sxs-lookup"><span data-stu-id="a66ff-125">The VDC isn't just the application workloads in the cloud.</span></span> <span data-ttu-id="a66ff-126">ネットワーク、セキュリティ、管理、インフラストラクチャでもあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-126">It's also the network, security, management, and infrastructure.</span></span> <span data-ttu-id="a66ff-127">たとえば、DNS やディレクトリ サービスなどです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-127">Examples are DNS and directory services.</span></span> <span data-ttu-id="a66ff-128">通常は、オンプレミスのネットワークまたはデータセンターへのプライベート接続を提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-128">It usually provides a private connection back to an on-premises network or datacenter.</span></span> <span data-ttu-id="a66ff-129">Azure に移行するワークロードの増加に伴って、これらのワークロードが配置されるサポート インフラストラクチャおよびオブジェクトについて考えることが重要になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-129">As more and more workloads move to Azure, it's important to think about the supporting infrastructure and objects that these workloads are placed in.</span></span> <span data-ttu-id="a66ff-130">データ フロー、セキュリティ モデル、コンプライアンスに関する課題が異なり、個別に管理する必要がある多数の**ワークロード アイランド**の増殖を防ぐために、リソースの構成方法について慎重に考える必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-130">Think carefully about how resources are structured to avoid the proliferation of hundreds of **workload islands** that must be managed separately with independent data flow, security models, and compliance challenges.</span></span>

<span data-ttu-id="a66ff-131">仮想データセンターは、共通のサポート機能とインフラストラクチャを備えた、独立していながら関連性のあるエンティティの集まりです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-131">The virtual datacenter is a collection of separate but related entities with common supporting functions, features, and infrastructure.</span></span> <span data-ttu-id="a66ff-132">ワークロードを統合された VDC と見なすことで、コンポーネントとデータ フローの一元化によるスケール メリットと最適化されたセキュリティによってコストを削減できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-132">By viewing your workloads as an integrated VDC, you can reduce costs from economies of scale and optimized security through component and data flow centralization.</span></span> <span data-ttu-id="a66ff-133">また、運用、管理、コンプライアンス監査も容易になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-133">You also get easier operations, management, and compliance audits.</span></span>

> [!NOTE]  
> <span data-ttu-id="a66ff-134">VDC は独立した Azure 製品では**ない**ことを理解しておくことが重要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-134">It's important to understand that the VDC is **not** a discrete Azure product.</span></span> <span data-ttu-id="a66ff-135">厳しい要件を満たすためのさまざまな機能の組み合わせです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-135">It's the combination of various features and capabilities to  meet your exact requirements.</span></span> <span data-ttu-id="a66ff-136">VDC は、クラウドのリソースと能力を最大限にするための、ワークロードと Azure の使用方法についての考え方です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-136">The VDC is a way of thinking about your workloads and Azure usage to maximize your resources and abilities in the cloud.</span></span> <span data-ttu-id="a66ff-137">したがって、仮想データセンターでは、組織のロールと責任範囲を考慮した Azure での IT サービスの構築方法について、モジュール方式のアプローチが採用されています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-137">The virtual datacenter is therefore a modular approach on how to build up IT services in Azure, respecting organizational roles and responsibilities.</span></span>

<span data-ttu-id="a66ff-138">VDC は、企業が次のシナリオでワークロードとアプリケーションを Azure に移行する際に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-138">The VDC can help enterprises get workloads and applications into Azure for the following scenarios:</span></span>

-   <span data-ttu-id="a66ff-139">関連する複数のワークロードをホストする。</span><span class="sxs-lookup"><span data-stu-id="a66ff-139">Host multiple related workloads.</span></span>
-   <span data-ttu-id="a66ff-140">オンプレミス環境から Azure にワークロードを移行する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-140">Migrate workloads from an on-premises environment to Azure.</span></span>
-   <span data-ttu-id="a66ff-141">複数のワークロード間に、共有または一元化されたセキュリティとアクセスの要件を実装する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-141">Implement shared or centralized security and access requirements across workloads.</span></span>
-   <span data-ttu-id="a66ff-142">大企業向けに Azure DevOps と一元化された IT を適切に組み合わせる。</span><span class="sxs-lookup"><span data-stu-id="a66ff-142">Mix Azure DevOps and centralized IT appropriately for a large enterprise.</span></span>

<span data-ttu-id="a66ff-143">VDC の利点を実現する鍵となるのは、次のような Azure の機能を組み合わせた集中型トポロジ (ハブとスポーク) です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-143">The key to unlock the advantages of the VDC is a centralized topology, hub and spokes, with a mix of Azure features:</span></span> 

- <span data-ttu-id="a66ff-144">[Azure Virtual Network][VNet]</span><span class="sxs-lookup"><span data-stu-id="a66ff-144">[Azure Virtual Network][VNet].</span></span> 
- <span data-ttu-id="a66ff-145">[ネットワーク セキュリティ グループ (NSG)][NSG]</span><span class="sxs-lookup"><span data-stu-id="a66ff-145">[Network security groups (NSGs)][NSG].</span></span>
- <span data-ttu-id="a66ff-146">[仮想ネットワーク ピアリング][VNetPeering]</span><span class="sxs-lookup"><span data-stu-id="a66ff-146">[Virtual network peering][VNetPeering].</span></span> 
- <span data-ttu-id="a66ff-147">[ユーザー定義ルート (UDR)][UDR]</span><span class="sxs-lookup"><span data-stu-id="a66ff-147">[User-defined routes (UDRs)][UDR].</span></span>
- <span data-ttu-id="a66ff-148">[ロールベースのアクセス制御 (RBAC)][RBAC] を使用した Azure ID サービス</span><span class="sxs-lookup"><span data-stu-id="a66ff-148">Azure identity services with [role-based access control (RBAC)][RBAC].</span></span> 
- <span data-ttu-id="a66ff-149">(必要に応じて) [Azure Firewall][AzFW]、[Azure DNS][DNS]、[Azure Front Door][AFD]、[Azure Virtual WAN][vWAN]</span><span class="sxs-lookup"><span data-stu-id="a66ff-149">Optionally, [Azure Firewall][AzFW], [Azure DNS][DNS], [Azure Front Door][AFD], and [Azure Virtual WAN][vWAN].</span></span>

## <a name="who-should-implement-a-virtual-datacenter"></a><span data-ttu-id="a66ff-150">仮想データセンターを実装する必要があるお客様</span><span class="sxs-lookup"><span data-stu-id="a66ff-150">Who should implement a virtual datacenter?</span></span>
<span data-ttu-id="a66ff-151">多くのワークロードを Azure に移行する必要がある Azure のお客様は、共通リソースを使用することによってメリットが得られます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-151">Any Azure customer that needs to move more than a few workloads into Azure can benefit from using common resources.</span></span> <span data-ttu-id="a66ff-152">規模によっては、単一アプリケーションであっても、VDC の構築に使用されるパターンとコンポーネントを使用することでメリットが得られます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-152">Depending on the size, even single applications can benefit from using the patterns and components used to build the VDC.</span></span>

<span data-ttu-id="a66ff-153">組織に一元化された IT、ネットワーク、セキュリティ、またはコンプライアンスのチームや部門がある場合、VDC を使用することで、ポリシー ポイントと職務の分離を適用できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-153">If your organization has a centralized IT, network, security, or compliance team or department, the VDC can help enforce policy points and segregation of duty.</span></span> <span data-ttu-id="a66ff-154">また、基になる共通コンポーネントの統一性を確保しながら、要件に適した最大限の自由と制御をアプリケーション チームに提供できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-154">It also ensures uniformity of the underlying common components while giving application teams as much freedom and control as is appropriate for your requirements.</span></span>

<span data-ttu-id="a66ff-155">Azure DevOps を検討している組織では、VDC の概念を利用して、Azure リソースの承認済みのポケットを提供し、そのグループ内での完全な制御を確保できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-155">Organizations that look to Azure DevOps can utilize the VDC concepts to provide authorized pockets of Azure resources and to ensure they have total control within that group.</span></span> <span data-ttu-id="a66ff-156">グループは、サブスクリプション、または共通サブスクリプションのリソース グループです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-156">Groups are either subscriptions or resource groups in a common subscription.</span></span> <span data-ttu-id="a66ff-157">ネットワークとセキュリティの境界では、ハブの仮想ネットワークおよびリソース グループの一元化されたポリシーによる定義に従ってコンプライアンスが維持されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-157">But the network and security boundaries stay compliant as defined by a centralized policy in a hub virtual network and resource group.</span></span>

## <a name="considerations-when-you-implement-a-virtual-datacenter"></a><span data-ttu-id="a66ff-158">仮想データセンターの実装時の考慮事項</span><span class="sxs-lookup"><span data-stu-id="a66ff-158">Considerations when you implement a virtual datacenter</span></span>
<span data-ttu-id="a66ff-159">VDC を設計するときは、考慮すべき非常に重要な問題がいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-159">When you design your VDC, there are several pivotal issues to consider:</span></span>

-   <span data-ttu-id="a66ff-160">ID とディレクトリ サービス</span><span class="sxs-lookup"><span data-stu-id="a66ff-160">Identity and directory services.</span></span>
-   <span data-ttu-id="a66ff-161">セキュリティ インフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="a66ff-161">Security infrastructure.</span></span>
-   <span data-ttu-id="a66ff-162">クラウドへの接続</span><span class="sxs-lookup"><span data-stu-id="a66ff-162">Connectivity to the cloud.</span></span>
-   <span data-ttu-id="a66ff-163">クラウド内の接続</span><span class="sxs-lookup"><span data-stu-id="a66ff-163">Connectivity within the cloud.</span></span>

### <a name="identity-and-directory-services"></a><span data-ttu-id="a66ff-164">ID とディレクトリ サービス</span><span class="sxs-lookup"><span data-stu-id="a66ff-164">Identity and directory services</span></span>
<span data-ttu-id="a66ff-165">ID とディレクトリ サービスは、オンプレミスとクラウドの両方のすべてのデータセンターの重要な側面です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-165">Identity and directory services are a key aspect of all datacenters, both on-premises and in the cloud.</span></span> <span data-ttu-id="a66ff-166">ID は、VDC 内のサービスへのアクセスと承認のすべての側面に関連しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-166">Identity is related to all aspects of access and authorization to services within the VDC.</span></span> <span data-ttu-id="a66ff-167">承認されたユーザーとプロセスだけが Azure アカウントおよびリソースにアクセスできるようにするために、Azure では複数の種類の資格情報が認証に使用されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-167">To make sure that only authorized users and processes access your Azure account and resources, Azure uses several types of credentials for authentication.</span></span> <span data-ttu-id="a66ff-168">これには、Azure アカウントにアクセスするためのパスワード、暗号化キー、デジタル署名、証明書が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-168">These include passwords to access the Azure account, cryptographic keys, digital signatures, and certificates.</span></span> 

<span data-ttu-id="a66ff-169">[Azure Multi-Factor Authentication][MFA] は、Azure サービスにアクセスする際の追加のセキュリティ レイヤーです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-169">[Azure Multi-Factor Authentication][MFA] is an additional layer of security for accessing Azure services.</span></span> <span data-ttu-id="a66ff-170">簡単な検証オプションを使用して強力な認証が提供されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-170">It provides strong authentication with a range of easy verification options.</span></span> <span data-ttu-id="a66ff-171">お客様は好みの方法を選択できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-171">Customers can choose the method they prefer.</span></span> <span data-ttu-id="a66ff-172">オプションとして、電話、テキスト メッセージ、モバイル アプリの通知があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-172">Options include a phone call, text message, or mobile app notification.</span></span> 

<span data-ttu-id="a66ff-173">大企業では、VDC 内または VDC 間での個々の ID とその認証、承認、ロール、権限の管理について説明する ID 管理プロセスを定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-173">Any large enterprise needs to define an identity management process that describes the management of individual identities and their authentication, authorization, roles, and privileges within or across the VDC.</span></span> <span data-ttu-id="a66ff-174">このプロセスの目的は、コスト、ダウンタイム、繰り返し実行される手動タスクを削減し、セキュリティと生産性を向上させることです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-174">The goals of this process are to increase security and productivity while lowering cost, downtime, and repetitive manual tasks.</span></span>

<span data-ttu-id="a66ff-175">企業や組織では、さまざまな基幹業務向けのサービスの要求の厳しい組み合わせが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-175">Enterprises and organizations can require a demanding mix of services for different lines of business.</span></span> <span data-ttu-id="a66ff-176">また、多くの場合、従業員には、関与するプロジェクトごとに異なるロールが割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-176">And employees often have different roles when involved with different projects.</span></span> <span data-ttu-id="a66ff-177">VDC では、適切なガバナンスでシステムを実行するために、それぞれ特定のロール定義を使用するさまざまなチーム間の良好な協力が必要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-177">The VDC requires good cooperation between different teams, each with specific role definitions, to get systems running with good governance.</span></span> <span data-ttu-id="a66ff-178">責任、アクセス、権限のマトリックスは複雑になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-178">The matrix of responsibilities, access, and rights can be complex.</span></span> <span data-ttu-id="a66ff-179">VDC の ID 管理は、[Azure Active Directory (Azure AD)][AAD] とロールベースのアクセス制御 (RBAC) を使用して実装されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-179">Identity management in VDC is implemented through [Azure Active Directory (Azure AD)][AAD] and role-based access control (RBAC).</span></span>

<span data-ttu-id="a66ff-180">ディレクトリ サービスは、日常的な項目とネットワーク リソースを検索、管理、整理するための共有情報インフラストラクチャです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-180">A directory service is a shared information infrastructure that locates, manages, administers, and organizes everyday items and network resources.</span></span> <span data-ttu-id="a66ff-181">これらのリソースには、ボリューム、フォルダー、ファイル、プリンター、ユーザー、グループ、デバイス、その他のオブジェクトが含まれます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-181">These resources can include volumes, folders, files, printers, users, groups, devices, and other objects.</span></span> <span data-ttu-id="a66ff-182">ネットワーク上の各リソースは、ディレクトリ サーバーによってオブジェクトと見なされます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-182">Each resource on the network is considered an object by the directory server.</span></span> <span data-ttu-id="a66ff-183">リソースに関する情報は、そのリソースまたはオブジェクトに関連付けられた属性のコレクションとして格納されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-183">Information about a resource is stored as a collection of attributes associated with that resource or object.</span></span>

<span data-ttu-id="a66ff-184">すべての Microsoft オンライン ビジネス サービスは、サインインや他の ID のニーズに対応するために、Azure Active Directory (Azure AD) に依存しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-184">All Microsoft online business services rely on Azure Active Directory (Azure AD) for sign-in and other identity needs.</span></span> <span data-ttu-id="a66ff-185">Azure Active Directory は、統合的で可用性の高い ID とアクセス管理のクラウド ソリューションであり、コアのディレクトリ サービス、高度な ID ガバナンス、およびアプリケーション アクセス管理を組み合わせたものです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-185">Azure Active Directory is a comprehensive, highly available identity and access management cloud solution that combines core directory services, advanced identity governance, and application access management.</span></span> <span data-ttu-id="a66ff-186">Azure AD をオンプレミスの Active Directory と統合することで、クラウドベースのアプリケーションとローカルでホストされているオンプレミス アプリケーションのシングル サインオンを有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-186">Azure AD can integrate with on-premises Active Directory to enable single sign-on for all cloud-based and locally hosted on-premises applications.</span></span> <span data-ttu-id="a66ff-187">オンプレミスの Active Directory のユーザー属性は、Azure AD に自動的に同期できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-187">The user attributes of on-premises Active Directory can be automatically synchronized to Azure AD.</span></span>

<span data-ttu-id="a66ff-188">1 人のグローバル管理者が、VDC 実装のすべてのアクセス許可を割り当てる必要があるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="a66ff-188">A single global administrator isn't required to assign all permissions in a VDC implementation.</span></span> <span data-ttu-id="a66ff-189">代わりに、特定の各部門、またはディレクトリ サービス内のユーザーまたはサービスのグループが、VDC 内の各自のリソースを管理するために必要なアクセス許可を持つことができます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-189">Instead, each specific department or group of users or services in the directory service can have the permissions that are required to manage their own resources within the VDC.</span></span> <span data-ttu-id="a66ff-190">アクセス許可を構成するにはバランスが必要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-190">Structuring permissions requires balancing.</span></span> <span data-ttu-id="a66ff-191">アクセス許可が多すぎると、パフォーマンス効率が低下します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-191">Too many permissions impede performance efficiency.</span></span> <span data-ttu-id="a66ff-192">アクセス許可が少なすぎたり緩すぎたりすると、セキュリティ リスクが高まります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-192">Too few or loose permissions increase security risks.</span></span> <span data-ttu-id="a66ff-193">Azure のロールベースのアクセス制御 (RBAC) は、VDC リソースのきめ細かいアクセス管理を実現することで、この問題への対処を支援します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-193">Azure role-based access control (RBAC) helps address this problem by offering fine-grained access management for VDC resources.</span></span>

#### <a name="security-infrastructure"></a><span data-ttu-id="a66ff-194">セキュリティ インフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="a66ff-194">Security infrastructure</span></span>
<span data-ttu-id="a66ff-195">このセキュリティ インフラストラクチャは、VDC 固有の仮想ネットワーク セグメントでのトラフィックの分離と、VDC 全体にわたるイングレス/エグレス フローを制御する方法を指します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-195">This security infrastructure refers to traffic segregation in the VDC's specific virtual network segment and how to control ingress and egress flows throughout the VDC.</span></span> <span data-ttu-id="a66ff-196">Azure は、デプロイ間の許可されていない意図しないトラフィックを防ぐマルチテナント アーキテクチャに基づいています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-196">Azure is based on multi-tenant architecture that prevents unauthorized and unintentional traffic between deployments.</span></span> <span data-ttu-id="a66ff-197">Azure では、仮想ネットワークの分離、アクセス制御リスト (ACL)、ロード バランサー、IP フィルター、トラフィック フロー ポリシーが使用されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-197">It uses virtual network isolation, access control lists (ACLs), load balancers, IP filters, and traffic flow policies.</span></span> <span data-ttu-id="a66ff-198">ネットワーク アドレス変換 (NAT) は、内部ネットワーク トラフィックを外部トラフィックから分離します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-198">Network address translation (NAT) separates internal network traffic from external traffic.</span></span>

<span data-ttu-id="a66ff-199">Azure ファブリックは、テナントのワークロードにインフラストラクチャ リソースを割り当て、仮想マシン (VM) との間の通信を管理します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-199">The Azure fabric allocates infrastructure resources to tenant workloads and manages communications to and from virtual machines (VMs).</span></span> <span data-ttu-id="a66ff-200">Azure ハイパーバイザーは、VM 間のメモリおよびプロセスの分離を強制し、ネットワーク トラフィックをゲスト OS テナントに安全にルーティングします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-200">The Azure hypervisor enforces memory and process separation between VMs and securely routes network traffic to guest OS tenants.</span></span>

#### <a name="connectivity-to-the-cloud"></a><span data-ttu-id="a66ff-201">クラウドへの接続</span><span class="sxs-lookup"><span data-stu-id="a66ff-201">Connectivity to the cloud</span></span>
<span data-ttu-id="a66ff-202">VDC 実装には、顧客、パートナー、社内ユーザーにサービスを提供するために、外部ネットワークとの接続が必要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-202">A VDC implementation requires connectivity with external networks to offer services to customers, partners, and internal users.</span></span> <span data-ttu-id="a66ff-203">通常、インターネットへの接続だけでなく、オンプレミスのネットワークとデータセンターへの接続も必要になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-203">It usually needs connectivity not only to the internet but also to on-premises networks and datacenters.</span></span>

<span data-ttu-id="a66ff-204">[Azure Firewall][AzFW] または他の種類のネットワーク仮想アプライアンス (NVA)、[ユーザー定義ルート][UDR]を使用したカスタム ルーティング ポリシー、[ネットワーク セキュリティ グループ][NSG]を使用したネットワーク フィルタリングを使って、パブリック インターネットと双方向にアクセスできるサービスを制御できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-204">Customers control which services have access to and are accessible from the public internet by using [Azure Firewall][AzFW] or other types of virtual network appliances (NVAs), custom routing policies by using [user-defined routes][UDR], and network filtering by using [network security groups][NSG].</span></span> <span data-ttu-id="a66ff-205">インターネットに接続するすべてのリソースを、[Azure DDoS Protection Standard][DDOS] で保護することもお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-205">We recommend that all internet-facing resources also be protected by the [Azure DDoS Protection Standard][DDOS].</span></span>

<span data-ttu-id="a66ff-206">多くの場合、企業では VDC 実装をオンプレミスのデータセンターや他のリソースに接続する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-206">Enterprises often need to connect their VDC implementations to on-premises datacenters or other resources.</span></span> <span data-ttu-id="a66ff-207">そのため、Azure とオンプレミス ネットワーク間の接続は、効果的なアーキテクチャを設計するときに不可欠な要素となります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-207">So the connectivity between Azure and on-premises networks is a crucial aspect when designing an effective architecture.</span></span> <span data-ttu-id="a66ff-208">Azure で VDC 実装とオンプレミス間の相互接続を作成するには、インターネット経由とプライベート直接接続の 2 とおりの方法があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-208">Enterprises have two different ways to create interconnections between VDC implementations and on-premises in Azure: transit over the internet or private direct connections.</span></span>

<span data-ttu-id="a66ff-209">[Azure サイト間 VPN][VPN] では、パブリック インターネットを介して企業のオンプレミス ネットワークを VDC 実装に接続します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-209">An [Azure site-to-site VPN][VPN] connects an enterprise's on-premises network to their VDC implementation over the public internet.</span></span> <span data-ttu-id="a66ff-210">VPN 経由のトラフィックは、IPSec と IKE トンネリングを使用して暗号化されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-210">Traffic over the VPN is encrypted by using IPSec and IKE tunneling.</span></span> <span data-ttu-id="a66ff-211">Azure サイト間接続は柔軟性があり、すばやく作成できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-211">An Azure site-to-site connection is flexible and quick to create.</span></span> <span data-ttu-id="a66ff-212">この VPN では、すべての接続がインターネット経由で行われるため、追加の調達は不要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-212">This VPN doesn't require any further procurement as all connections connect over the internet.</span></span>

<span data-ttu-id="a66ff-213">多くの VPN 接続において、[Azure Virtual WAN][vWAN] は、Azure を介してブランチ間接続を最適化し、自動化するネットワーク サービスです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-213">For large numbers of VPN connections, [Azure Virtual WAN][vWAN] is a networking service that provides optimized and automated branch-to-branch connectivity through Azure.</span></span> <span data-ttu-id="a66ff-214">Virtual WAN を使用すると、ブランチ デバイスを接続および構成して Azure と通信できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-214">With Virtual WAN, you can connect and configure branch devices to communicate with Azure.</span></span> <span data-ttu-id="a66ff-215">この接続は、手動で行うことも、Virtual WAN パートナーを通じて推奨プロバイダー デバイスを使用して行うこともできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-215">This connection can be done either manually or by using preferred provider devices through a Virtual WAN partner.</span></span> <span data-ttu-id="a66ff-216">推奨プロバイダー デバイスは使いやすく、接続の簡素化と構成管理を実現できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-216">Preferred provider devices give you ease of use, simplification of connectivity, and configuration management.</span></span> <span data-ttu-id="a66ff-217">Azure WAN の組み込みダッシュボードでは、トラブルシューティングに必要な分析情報が即座に提供されるので時間を節約できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-217">The Azure WAN built-in dashboard provides instant troubleshooting insights that can save you time.</span></span> <span data-ttu-id="a66ff-218">また、ダッシュボードを使用して、大規模なサイト間接続を簡単に表示できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-218">And the dashboard gives you an easy way to view large-scale site-to-site connectivity.</span></span>

<span data-ttu-id="a66ff-219">Azure の接続サービスである [ExpressRoute][ExR] を使用すると、企業のオンプレミス ネットワークと VDC 実装間のプライベート接続が可能になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-219">[ExpressRoute][ExR], an Azure connectivity service, enables private connections between the enterprise's on-premises network and their VDC implementation.</span></span> <span data-ttu-id="a66ff-220">一貫した待機時間に加え、強固なセキュリティ、信頼性、最大 10 Gbps の速度が実現されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-220">It offers higher security, reliability, and higher speeds, up to 10 Gbps, along with consistent latency.</span></span> <span data-ttu-id="a66ff-221">ExpressRoute のお客様はプライベート接続に関連付けられたコンプライアンス ルールの利点が得られるので、ExpressRoute は VDC 実装に適しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-221">ExpressRoute is useful for VDC implementations as ExpressRoute customers get the benefits of compliance rules associated with private connections.</span></span> <span data-ttu-id="a66ff-222">より広い帯域幅が必要なお客様の場合、[ExpressRoute Direct][ExRD] を使用すると、100 Gbps の Microsoft ルーターに直接接続できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-222">[ExpressRoute Direct][ExRD] connects you directly to Microsoft routers at 100 Gbps for customers with larger bandwidth needs.</span></span>

<span data-ttu-id="a66ff-223">通常、ExpressRoute 接続のデプロイでは、ExpressRoute サービス プロバイダーと連携する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-223">Deploying ExpressRoute connections usually involves engaging with an ExpressRoute service provider.</span></span> <span data-ttu-id="a66ff-224">短時間で使い始める必要があるお客様の場合、最初にサイト間 VPN を使用して、VDC とオンプレミスのリソース間の接続を確立するのが一般的です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-224">For customers that need to start quickly, it's common to initially use a site-to-site VPN to establish connectivity between the VDC and on-premises resources.</span></span> <span data-ttu-id="a66ff-225">その後、サービス プロバイダーとの物理的な相互接続が完了したら、ExpressRoute 接続に移行します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-225">Then migrate to ExpressRoute connection when your physical interconnection with your service provider is finished.</span></span>

#### <a name="connectivity-within-the-cloud"></a><span data-ttu-id="a66ff-226">クラウド内の接続</span><span class="sxs-lookup"><span data-stu-id="a66ff-226">Connectivity within the cloud</span></span>
<span data-ttu-id="a66ff-227">[仮想ネットワーク][VNet]と[仮想ネットワーク ピアリング][VNetPeering]は、VDC 内の基本的なネットワーク接続サービスです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-227">[Virtual networks][VNet] and [virtual network peering][VNetPeering] are the basic networking connectivity services inside the VDC.</span></span> <span data-ttu-id="a66ff-228">仮想ネットワークでは、VDC リソースの自然な分離境界が保証されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-228">A virtual network guarantees a natural boundary of isolation for VDC resources.</span></span> <span data-ttu-id="a66ff-229">仮想ネットワーク ピアリングは、同じ Azure リージョン内またはリージョンをまたがるさまざまな仮想ネットワーク間の相互通信を可能にします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-229">And virtual network peering allows intercommunication between different virtual networks in the same Azure region or even across regions.</span></span> <span data-ttu-id="a66ff-230">仮想ネットワーク内および仮想ネットワーク間のトラフィック制御は、アクセス制御リストを使用して指定された一連のセキュリティ規則に適合する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-230">Traffic control inside a virtual network and between virtual networks needs to match a set of security rules specified through access control lists.</span></span> <span data-ttu-id="a66ff-231">[ネットワーク セキュリティ グループ][NSG]、[ネットワーク仮想アプライアンス (NVA)][NVA]、[ユーザー定義ルートのカスタム ルーティング テーブル][UDR]に関する情報をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a66ff-231">See information on [network security groups][NSG], [network virtual appliances (NVAs)][NVA], and [custom routing tables for user-defined routes][UDR].</span></span>

## <a name="virtual-datacenter-overview"></a><span data-ttu-id="a66ff-232">仮想データセンターの概要</span><span class="sxs-lookup"><span data-stu-id="a66ff-232">Virtual datacenter overview</span></span>

### <a name="topology"></a><span data-ttu-id="a66ff-233">トポロジ</span><span class="sxs-lookup"><span data-stu-id="a66ff-233">Topology</span></span>
<span data-ttu-id="a66ff-234">**ハブとスポーク**は、単一の Azure リージョン内の仮想データセンターを拡張するためのモデルです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-234">**Hub and spoke** is a model for extending a virtual datacenter within a single Azure region.</span></span>

<span data-ttu-id="a66ff-235">[![1]][1]</span><span class="sxs-lookup"><span data-stu-id="a66ff-235">[![1]][1]</span></span>

<span data-ttu-id="a66ff-236">ハブは、異なるゾーン (インターネット、オンプレミス、スポーク) 間のイングレスまたはエグレス トラフィックを制御および検査する中央ネットワーク ゾーンです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-236">A hub is the central network zone that controls and inspects ingress or egress traffic between different zones: internet, on-premises, and the spokes.</span></span> <span data-ttu-id="a66ff-237">ハブとスポークのトポロジでは、IT 部門は一元化された場所でセキュリティ ポリシーを効率的に適用できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-237">The hub and spoke topology gives the IT department an effective way to enforce security policies in a central location.</span></span> <span data-ttu-id="a66ff-238">また、構成の誤りや露出の可能性も低減されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-238">It also reduces the potential for misconfiguration and exposure.</span></span>

<span data-ttu-id="a66ff-239">ハブには、スポークによって消費される共通のサービス コンポーネントが含まれます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-239">The hub contains the common service components consumed by the spokes.</span></span> <span data-ttu-id="a66ff-240">共通の中央サービスの例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-240">The following examples are common central services:</span></span>

-   <span data-ttu-id="a66ff-241">信頼されていないネットワークからアクセスするサード パーティがスポーク内のワークロードにアクセスする前のユーザー認証に必要な Windows Active Directory インフラストラクチャ。</span><span class="sxs-lookup"><span data-stu-id="a66ff-241">The Windows Active Directory infrastructure, required for user authentication of third parties that access from untrusted networks before they get access to the workloads in the spoke.</span></span> <span data-ttu-id="a66ff-242">これには、関連する Active Directory フェデレーション サービス (AD FS) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-242">It includes the related Active Directory Federation Services (AD FS).</span></span>
-   <span data-ttu-id="a66ff-243">オンプレミスおよびインターネット上のリソースにアクセスするための、スポーク内のワークロードの名前付けを解決する DNS サービス ([Azure DNS][DNS] が使用されていない場合)。</span><span class="sxs-lookup"><span data-stu-id="a66ff-243">A DNS service to resolve naming for the workload in the spokes, to access resources on-premises and on the internet if [Azure DNS][DNS] isn't used.</span></span>
-   <span data-ttu-id="a66ff-244">ワークロードにシングル サインオンを実装するための公開キー基盤 (PKI)。</span><span class="sxs-lookup"><span data-stu-id="a66ff-244">A public key infrastructure (PKI), to implement single sign-on on workloads.</span></span>
-   <span data-ttu-id="a66ff-245">スポーク ネットワーク ゾーンとインターネット間の TCP/UDP トラフィックのフロー制御。</span><span class="sxs-lookup"><span data-stu-id="a66ff-245">Flow control of TCP and UDP traffic between the spoke network zones and the internet.</span></span>
-   <span data-ttu-id="a66ff-246">スポークとオンプレミス間のフロー制御。</span><span class="sxs-lookup"><span data-stu-id="a66ff-246">Flow control between the spokes and on-premises.</span></span>
-   <span data-ttu-id="a66ff-247">(必要に応じて) スポーク間のフロー制御。</span><span class="sxs-lookup"><span data-stu-id="a66ff-247">If needed, flow control between one spoke and another.</span></span>

<span data-ttu-id="a66ff-248">VDC では、複数のスポーク間で共有ハブ インフラストラクチャを使用することで、全体的なコストを削減します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-248">The VDC reduces overall cost by using the shared hub infrastructure between multiple spokes.</span></span>

<span data-ttu-id="a66ff-249">各スポークのロールは、異なる種類のワークロードをホストできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-249">The role of each spoke can be to host different types of workloads.</span></span> <span data-ttu-id="a66ff-250">スポークは、同じワークロードの反復可能なデプロイのためのモジュール方式のアプローチも提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-250">The spokes also provide a modular approach for repeatable deployments of the same workloads.</span></span> <span data-ttu-id="a66ff-251">例として、開発とテスト、ユーザー受け入れテスト、運用前環境、運用環境があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-251">Examples are dev and test, user acceptance testing, preproduction, and production.</span></span> <span data-ttu-id="a66ff-252">スポークでは、組織内のさまざまなグループを分離して有効にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-252">The spokes can also segregate and enable different groups within your organization.</span></span> <span data-ttu-id="a66ff-253">例として Azure DevOps グループがあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-253">An example is Azure DevOps groups.</span></span> <span data-ttu-id="a66ff-254">スポーク内には、基本的なワークロードや、階層間のトラフィック制御を伴う複雑な多層ワークロードをデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-254">Inside a spoke, it's possible to deploy a basic workload or complex multi-tier workloads with traffic control between the tiers.</span></span>

#### <a name="subscription-limits-and-multiple-hubs"></a><span data-ttu-id="a66ff-255">サブスクリプションの制限と複数のハブ</span><span class="sxs-lookup"><span data-stu-id="a66ff-255">Subscription limits and multiple hubs</span></span>
<span data-ttu-id="a66ff-256">Azure では、種類に関係なく、すべてのコンポーネントが Azure サブスクリプションにデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-256">In Azure, every component, whatever the type, is deployed in an Azure subscription.</span></span> <span data-ttu-id="a66ff-257">異なる Azure サブスクリプションに Azure コンポーネントを分離することで、さまざまな基幹業務の要件を満たすことができます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-257">The isolation of Azure components in different Azure subscriptions can satisfy the requirements of different lines of business.</span></span> <span data-ttu-id="a66ff-258">要件の例として、差別化されたレベルのアクセスと承認の設定があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-258">An example is setting up differentiated levels of access and authorization.</span></span>

<span data-ttu-id="a66ff-259">単一 VDC 実装で多数のスポークにスケールアップできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-259">A single VDC implementation can scale up to a large number of spokes.</span></span> <span data-ttu-id="a66ff-260">ただし、他の IT システムと同様に、プラットフォームの制限があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-260">But as with every IT system, there are platforms limits.</span></span> <span data-ttu-id="a66ff-261">ハブのデプロイは特定の Azure サブスクリプションにバインドされており、サブスクリプションには制約と制限があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-261">The hub deployment is bound to a specific Azure subscription, which has restrictions and limits.</span></span> <span data-ttu-id="a66ff-262">たとえば、仮想ネットワーク ピアリングの最大数が設定されています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-262">An example is a maximum number of virtual network peerings.</span></span> <span data-ttu-id="a66ff-263">詳細については、「[Azure サブスクリプションとサービスの制限、クォータ、制約][Limits]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a66ff-263">For details, see [Azure subscription and service limits, quotas, and constraints][Limits].</span></span> <span data-ttu-id="a66ff-264">制限が問題になる可能性がある場合は、アーキテクチャをさらにスケールアップできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-264">In cases where limits might be an issue, the architecture can scale up further.</span></span> <span data-ttu-id="a66ff-265">単一のハブ スポークからハブとスポークのクラスターにモデルを拡張します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-265">Extend the model from a single hub-spokes to a cluster of hub and spokes.</span></span> <span data-ttu-id="a66ff-266">仮想ネットワーク ピアリング、ExpressRoute、Virtual WAN、またはサイト間 VPN を使用して、1 つ以上の Azure リージョン内の複数のハブを相互接続します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-266">Interconnect multiple hubs in one or more Azure regions by using virtual network peering, ExpressRoute, Virtual WAN, or a site-to-site VPN.</span></span>

<span data-ttu-id="a66ff-267">[![2]][2]</span><span class="sxs-lookup"><span data-stu-id="a66ff-267">[![2]][2]</span></span>

<span data-ttu-id="a66ff-268">複数のハブを導入すると、システムのコストと管理作業が増加します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-268">The introduction of multiple hubs increases the cost and management effort of the system.</span></span> <span data-ttu-id="a66ff-269">複数のハブの導入が妥当なのは、スケーラビリティ (システムの制限や冗長性など) とリージョン レプリケーション (エンドユーザーのパフォーマンスやディザスター リカバリーなど) が必要な場合だけです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-269">It would only be justified by scalability like system limits or redundancy and regional replication like end-user performance or disaster recovery.</span></span> <span data-ttu-id="a66ff-270">複数のハブが必要なシナリオでは、運用を容易にするため、すべてのハブで同じサービスのセットを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-270">In scenarios requiring multiple hubs, all the hubs should strive to offer the same set of services for operational ease.</span></span>

#### <a name="interconnection-between-spokes"></a><span data-ttu-id="a66ff-271">スポーク間の相互接続</span><span class="sxs-lookup"><span data-stu-id="a66ff-271">Interconnection between spokes</span></span>
<span data-ttu-id="a66ff-272">1 つのスポーク内に、複雑な多層ワークロードを実装できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-272">Inside a single spoke, it's possible to implement complex multi-tier workloads.</span></span> <span data-ttu-id="a66ff-273">多層構成は、同じ仮想ネットワークのサブネットを階層ごとに 1 つ使用することで実装できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-273">You can implement multi-tier configurations by using one subnet for every tier in the same virtual network.</span></span> <span data-ttu-id="a66ff-274">NSG を使用してフローをフィルター処理します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-274">Filter the flows by using NSGs.</span></span>

<span data-ttu-id="a66ff-275">アーキテクトは、複数の仮想ネットワークに多層ワークロードをデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-275">An architect might want to deploy a multi-tier workload across multiple virtual networks.</span></span> <span data-ttu-id="a66ff-276">仮想ネットワーク ピアリングにより、スポークは同じハブまたは異なるハブの他のスポークに接続できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-276">With virtual network peering, spokes can connect to other spokes in the same hub or different hubs.</span></span> <span data-ttu-id="a66ff-277">このシナリオの一般的な例は、アプリケーション処理サーバーが 1 つのスポーク (仮想ネットワーク) にあるケースです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-277">A typical example of this scenario is the case where application processing servers are in one spoke, or virtual network.</span></span> <span data-ttu-id="a66ff-278">データベースは別のスポーク (仮想ネットワーク) にデプロイされています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-278">The database deploys in a different spoke, or virtual network.</span></span> <span data-ttu-id="a66ff-279">この場合、仮想ネットワーク ピアリングでスポークを相互接続することによって、ハブの通過を簡単に回避できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-279">In this case, it's easy to interconnect the spokes with virtual network peering and thereby avoid transiting through the hub.</span></span> <span data-ttu-id="a66ff-280">ハブをバイパスすることで、ハブにしか存在しない重要なセキュリティ ポイントや監査ポイントがバイパスされることがないように、アーキテクチャとセキュリティを慎重に見直す必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-280">A careful architecture and security review should be performed to ensure that bypassing the hub doesn’t bypass important security or auditing points that might exist only in the hub.</span></span>

<span data-ttu-id="a66ff-281">[![3]][3]</span><span class="sxs-lookup"><span data-stu-id="a66ff-281">[![3]][3]</span></span>

<span data-ttu-id="a66ff-282">スポークは、ハブとして機能するスポークに相互接続することもできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-282">Spokes can also be interconnected to a spoke that acts as a hub.</span></span> <span data-ttu-id="a66ff-283">この方法では 2 レベルの階層が作成されます。上位レベル (レベル 0) のスポークが、階層の下位レベル (レベル 1) のスポークのハブになります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-283">This approach creates a two-level hierarchy: the spokes in the higher level, level 0, become the hub of lower spokes, level 1, of the hierarchy.</span></span> <span data-ttu-id="a66ff-284">VDC 実装のスポークは、オンプレミス ネットワークまたはインターネットに到達するために、中央のハブにトラフィックを転送する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-284">The spokes of a VDC implementation are required to forward the traffic to the central hub to reach out either to the on-premises network or internet.</span></span> <span data-ttu-id="a66ff-285">2 レベルのハブのアーキテクチャでは複雑なルーティングが導入され、単純なハブ スポーク関係のメリットが失われます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-285">An architecture with two levels of hub introduces complex routing that removes the benefits of a simple hub-spoke relationship.</span></span>

<span data-ttu-id="a66ff-286">Azure では複雑なトポロジを構成できますが、VDC の概念の中核となる原則の 1 つは再現性と単純さです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-286">Although Azure allows complex topologies, one of the core principles of the VDC concept is repeatability and simplicity.</span></span> <span data-ttu-id="a66ff-287">管理作業を最小限に抑えるために、単純なハブ スポーク設計が、推奨される VDC 参照アーキテクチャです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-287">To minimize management effort, the simple hub-spoke design is the VDC reference architecture that we recommend.</span></span>

### <a name="components"></a><span data-ttu-id="a66ff-288">コンポーネント</span><span class="sxs-lookup"><span data-stu-id="a66ff-288">Components</span></span>
<span data-ttu-id="a66ff-289">仮想データセンター実装は、**インフラストラクチャ**、**境界ネットワーク**、**ワークロード**、**監視** の 4 つの基本的なコンポーネントの種類で構成されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-289">A virtual datacenter implementation is made up of four basic component types: **Infrastructure**, **Perimeter Networks**, **Workloads**, and **Monitoring**.</span></span>

<span data-ttu-id="a66ff-290">各コンポーネントの種類は、さまざまな Azure の機能とリソースで構成されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-290">Each component type consists of various Azure features and resources.</span></span> <span data-ttu-id="a66ff-291">企業の VDC 実装は、複数のコンポーネントの種類のインスタンスと、同じコンポーネントの種類の複数のバリエーションで構成されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-291">An enterprise's VDC implementation is made up of instances of multiple component types and multiple variations of the same component type.</span></span> <span data-ttu-id="a66ff-292">たとえば、異なるアプリケーションを表す、論理的に分離された多数の異なるワークロード インスタンスを使用できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-292">For instance, you might have many different, logically separated workload instances that represent different applications.</span></span> <span data-ttu-id="a66ff-293">これらのさまざまなコンポーネントの種類とインスタンスを使って、最終的に VDC を構築します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-293">You use these different component types and instances to ultimately build the VDC.</span></span>

<span data-ttu-id="a66ff-294">[![4]][4]</span><span class="sxs-lookup"><span data-stu-id="a66ff-294">[![4]][4]</span></span>

<span data-ttu-id="a66ff-295">VDC 実装の上記のおおまかなアーキテクチャは、ハブ スポーク トポロジのさまざまなゾーンで使用されるさまざまなコンポーネントの種類を示しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-295">The preceding high-level architecture of a VDC implementation shows different component types used in different zones of the hub-spokes topology.</span></span> <span data-ttu-id="a66ff-296">図では、アーキテクチャのさまざまな部分にインフラストラクチャ コンポーネントが示されています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-296">The diagram shows infrastructure components in various parts of the architecture.</span></span>

<span data-ttu-id="a66ff-297">オンプレミスのデータセンターまたは VDC 実装では、アクセス権と権限をグループ ベースにすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-297">As a good practice for an on-premises datacenter or a VDC implementation, access rights and privileges should be group based.</span></span> <span data-ttu-id="a66ff-298">個々のユーザーではなくグループとして扱うことで、チーム間でアクセス ポリシーを一貫して管理し、構成エラーを最小限に抑えることができます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-298">Deal with groups instead of individual users to maintain access policies consistently across teams and minimize configuration errors.</span></span> <span data-ttu-id="a66ff-299">適切なグループにユーザーを割り当てたり、グループからユーザーを削除したりすることで、特定のユーザーの権限を最新の状態に保ちます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-299">Assign and remove users to and from appropriate groups to keep the privileges of a specific user up to date.</span></span>

<span data-ttu-id="a66ff-300">各ロール グループの名前には、一意のプレフィックスが必要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-300">Each role group should have a unique prefix on their names.</span></span> <span data-ttu-id="a66ff-301">このプレフィックスにより、グループとワークロードの関連付けを識別しやすくなります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-301">This prefix makes it easy to identify which group is associated with which workload.</span></span> <span data-ttu-id="a66ff-302">たとえば、認証サービスをホストしているワークロードでは、グループに **AuthServiceNetOps**、**AuthServiceSecOps**、**AuthServiceDevOps**、**AuthServiceInfraOps** という名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-302">For example, a workload hosting an authentication service might have groups named **AuthServiceNetOps**, **AuthServiceSecOps**, **AuthServiceDevOps**, and **AuthServiceInfraOps**.</span></span> <span data-ttu-id="a66ff-303">一元化されたロール (特定のサービスに関係しないロール) には、**Corp** というプレフィックスを付けます (例: **CorpNetOps**)。</span><span class="sxs-lookup"><span data-stu-id="a66ff-303">Centralized roles, or roles not related to a specific service, might be prefaced with **Corp**. An example is **CorpNetOps**.</span></span>

<span data-ttu-id="a66ff-304">多くの組織では、次のグループのバリエーションを使って、ロールが大きく分類されています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-304">Many organizations use a variation of the following groups to provide a major breakdown of roles:</span></span>

-   <span data-ttu-id="a66ff-305">中央 IT グループ (**Corp**) は、インフラストラクチャ コンポーネントを制御するための所有者権限を持ちます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-305">The central IT group, **Corp,** has the ownership rights to control infrastructure components.</span></span> <span data-ttu-id="a66ff-306">コンポーネントの例として、ネットワークとセキュリティがあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-306">Examples are networking and security.</span></span> <span data-ttu-id="a66ff-307">このグループには、サブスクリプションの共同作業者のロールとスポークのネットワーク共同作成者権限が必要であり、ハブを制御できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-307">The group needs to have the role of contributor on the subscription, control of the hub, and network contributor rights in the spokes.</span></span> <span data-ttu-id="a66ff-308">多くの場合、大規模な組織では、これらの管理責任を複数のチームが分担します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-308">Large organizations frequently split up these management responsibilities between multiple teams.</span></span> <span data-ttu-id="a66ff-309">たとえば、ネットワーク運用 (**CorpNetOps**) グループはネットワークだけを担当し、セキュリティ運用 (**CorpSecOps**) グループはファイアウォールとセキュリティ ポリシーを担当します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-309">Examples are a network operations **CorpNetOps** group with exclusive focus on networking and a security operations **CorpSecOps** group responsible for the firewall and security policy.</span></span> <span data-ttu-id="a66ff-310">この場合、カスタム ロールの割り当て用に 2 つの異なるグループを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-310">In this specific case, two different groups need to be created for assignment of these custom roles.</span></span>
-   <span data-ttu-id="a66ff-311">開発とテスト (**AppDevOps**) グループは、アプリまたはサービス ワークロードをデプロイする役割を担います。</span><span class="sxs-lookup"><span data-stu-id="a66ff-311">The dev-test group, **AppDevOps,** has the responsibility to deploy app or service workloads.</span></span> <span data-ttu-id="a66ff-312">このグループには、IaaS デプロイの仮想マシン共同作成者のロール、または 1 つ以上の PaaS 共同作成者のロールが割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-312">This group takes the role of virtual machine contributor for IaaS deployments or one or more PaaS contributor’s roles.</span></span> <span data-ttu-id="a66ff-313">「[Azure リソースの組み込みロール][Roles]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a66ff-313">See [Built-in roles for Azure resources][Roles].</span></span> <span data-ttu-id="a66ff-314">場合によっては、開発とテスト チームは、ハブまたは特定のスポーク内のセキュリティ ポリシー、NSG、ルーティング ポリシー、UDR を表示できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-314">Optionally, the dev-test team might need visibility on security policies, NSGs, and routing policies, UDRs, inside the hub or a specific spoke.</span></span> <span data-ttu-id="a66ff-315">その場合、このグループには、ワークロードの共同作成者のロールに加え、ネットワーク閲覧者のロールも必要になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-315">In addition to the role of contributor for workloads, this group would also need the role of network reader.</span></span>
-   <span data-ttu-id="a66ff-316">運用とメンテナンス グループ (**CorpInfraOps** または **AppInfraOps**) は、運用環境のワークロードを管理する役割を担います。</span><span class="sxs-lookup"><span data-stu-id="a66ff-316">The operation and maintenance group, **CorpInfraOps** or **AppInfraOps,** has the responsibility of managing workloads in production.</span></span> <span data-ttu-id="a66ff-317">このグループは、運用サブスクリプションのワークロードのサブスクリプション共同作成者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-317">This group needs to be a subscription contributor on workloads in any production subscriptions.</span></span> <span data-ttu-id="a66ff-318">一部の組織では、運用環境のサブスクリプション共同作成者のロールと中央ハブ サブスクリプションを持つ、追加のエスカレーション サポート チーム グループが必要かどうかを評価することもあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-318">Some organizations might also evaluate if they need an additional escalation support team group with the role of subscription contributor in production and the central hub subscription.</span></span> <span data-ttu-id="a66ff-319">この追加のグループは、運用環境における潜在的な構成の問題を修正します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-319">The additional group fixes potential configuration issues in the production environment.</span></span>

<span data-ttu-id="a66ff-320">VDC は、ハブを管理する中央 IT グループ用に作成されたグループが、対応するグループをワークロード レベルで持つように構成されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-320">The VDC is structured so that groups created for the central IT groups that manage the hub have corresponding groups at the workload level.</span></span> <span data-ttu-id="a66ff-321">ハブ リソースの管理に加え、中央 IT グループだけが、サブスクリプションでの外部アクセスと最上位レベルのアクセス許可を制御できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-321">In addition to managing hub resources, only the central IT groups would control external access and top-level permissions on the subscription.</span></span> <span data-ttu-id="a66ff-322">ただし、ワークロード グループは、それぞれの仮想ネットワークのリソースとアクセス許可を中央 IT から独立して制御できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-322">However, workload groups would control resources and permissions of their virtual network independently on the central IT.</span></span>

<span data-ttu-id="a66ff-323">さまざまな基幹業務の複数のプロジェクトを安全にホストできるように、VDC をパーティション分割します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-323">Partition the VDC to securely host multiple projects across different lines of business.</span></span> <span data-ttu-id="a66ff-324">すべてのプロジェクトに異なる分離環境 (開発、UAT、運用など) が必要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-324">All projects require different isolated environments, such as dev, UAT, and production.</span></span> <span data-ttu-id="a66ff-325">これらの環境ごとに Azure サブスクリプションを分けると、自然な分離が提供されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-325">Separate Azure subscriptions for each of these environments provide natural isolation.</span></span>

<span data-ttu-id="a66ff-326">[![5]][5]</span><span class="sxs-lookup"><span data-stu-id="a66ff-326">[![5]][5]</span></span>

<span data-ttu-id="a66ff-327">上記の図は、組織のプロジェクト、ユーザー、グループ間の関係と、Azure のコンポーネントがデプロイされている環境を示しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-327">The preceding diagram shows the relationship between an organization's projects, users, and groups and the environments where the Azure components are deployed.</span></span>

<span data-ttu-id="a66ff-328">通常、IT の環境または階層は、複数のアプリケーションがデプロイされて実行されるシステムです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-328">Typically in IT, an environment or tier is a system in which multiple applications are deployed and run.</span></span> <span data-ttu-id="a66ff-329">大企業では、変更を行ってテストするための開発環境と、エンド ユーザーが使用する運用環境を使用しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-329">Large enterprises use a development environment to make and test changes and a production environment that end users use.</span></span> <span data-ttu-id="a66ff-330">これらの環境は分離されており、多くの場合、その間に複数のステージング環境があります。これにより、段階的なデプロイ (ロールアウト)、テスト、問題が発生した場合のロールバックが可能になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-330">Those environments are separated, often with several staging environments in between them to allow phased deployment (rollout), testing, and rollback if there are problems.</span></span> <span data-ttu-id="a66ff-331">デプロイ アーキテクチャは大きく異なりますが、通常、開発 (**DEV**) から始まり、運用 (**PROD**) で終わる基本的なプロセスに従います。</span><span class="sxs-lookup"><span data-stu-id="a66ff-331">Deployment architectures vary significantly but usually still follow the basic process that starts at development, **DEV**, and ends at production, **PROD**.</span></span>

<span data-ttu-id="a66ff-332">この種の多層環境の一般的なアーキテクチャは、開発およびテスト用の Azure DevOps、ステージング用の UAT、運用環境で構成されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-332">A common architecture for these types of multi-tier environments consists of Azure DevOps for development and testing, UAT for staging, and production environments.</span></span> <span data-ttu-id="a66ff-333">組織では、1 つまたは複数の Azure AD テナントを利用して、これらの環境に対するアクセスと権限を定義できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-333">Organizations can leverage single or multiple Azure AD tenants to define access and rights to these environments.</span></span> <span data-ttu-id="a66ff-334">前の図は、Azure DevOps および UAT 用と運用専用の 2 つの異なる Azure AD テナントが使用されているケースを示しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-334">The previous diagram shows a case where two different Azure AD tenants are used: one for Azure DevOps and UAT, and the other exclusively for production.</span></span>

<span data-ttu-id="a66ff-335">異なる Azure AD テナントが存在すると、必然的に環境間が分離されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-335">The presence of different Azure AD tenants enforces the separation between environments.</span></span> <span data-ttu-id="a66ff-336">同じユーザー グループ (中央 IT など) が、プロジェクトの Azure DevOps または運用環境のロールやアクセス許可を変更するために Azure AD テナントにアクセスするときは、テナントごとに異なる URI を使用して認証する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-336">The same group of users, such as the central IT, needs to authenticate by using a different URI to access a different Azure AD tenant to modify the roles or permissions of either the Azure DevOps or production environments of a project.</span></span> <span data-ttu-id="a66ff-337">環境にアクセスするときに、環境ごとに異なるユーザー認証が存在すると、人的エラーが原因で発生する可能性のある停止や他の問題が減少します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-337">The presence of different user authentications to access different environments reduces possible outages and other issues caused by human errors.</span></span>

#### <a name="component-type-infrastructure"></a><span data-ttu-id="a66ff-338">コンポーネントの種類: インフラストラクチャ</span><span class="sxs-lookup"><span data-stu-id="a66ff-338">Component type: Infrastructure</span></span>
<span data-ttu-id="a66ff-339">このコンポーネントの種類には、ほとんどのサポート インフラストラクチャが存在します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-339">This component type is where most of the supporting infrastructure resides.</span></span> <span data-ttu-id="a66ff-340">また、一元化された IT、セキュリティ、コンプライアンスのチームが時間の大半を費やす部分でもあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-340">It's also where your centralized IT, security, and compliance teams spend most of their time.</span></span>

<span data-ttu-id="a66ff-341">[![6]][6]</span><span class="sxs-lookup"><span data-stu-id="a66ff-341">[![6]][6]</span></span>

<span data-ttu-id="a66ff-342">インフラストラクチャ コンポーネントは、VDC のさまざまなコンポーネント間の相互接続を提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-342">Infrastructure components provide an interconnection between the different components of the VDC.</span></span> <span data-ttu-id="a66ff-343">これらはハブとスポークの両方に存在します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-343">They're present in both the hub and the spokes.</span></span> <span data-ttu-id="a66ff-344">インフラストラクチャ コンポーネントの管理と保守の責任は、通常、中央 IT またはセキュリティ チームに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-344">The responsibility for managing and maintaining the infrastructure components is typically assigned to the central IT or security team.</span></span>

<span data-ttu-id="a66ff-345">IT インフラストラクチャ チームの主要なタスクの 1 つは、企業全体にわたって一貫した IP アドレス スキーマを保証することです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-345">One of the primary tasks of the IT infrastructure team is to guarantee the consistency of IP address schemas across the enterprise.</span></span> <span data-ttu-id="a66ff-346">VDC に割り当てられたプライベート IP アドレス空間には一貫性が必要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-346">The private IP address space assigned to the VDC needs to be consistent.</span></span> <span data-ttu-id="a66ff-347">オンプレミス ネットワークで割り当てられたプライベート IP アドレスと重複してはいけません。</span><span class="sxs-lookup"><span data-stu-id="a66ff-347">It can't overlap with private IP addresses assigned on your on-premises networks.</span></span>

<span data-ttu-id="a66ff-348">オンプレミスのエッジ ルーター上または Azure 環境内での NAT により、IP アドレスの競合を回避できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-348">NAT on the on-premises edge routers or in Azure environments can avoid IP address conflicts.</span></span> <span data-ttu-id="a66ff-349">ただし、インフラストラクチャ コンポーネントが複雑になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-349">But it adds complications to your infrastructure components.</span></span> <span data-ttu-id="a66ff-350">管理の簡単さが VDC の主な目標の 1 つです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-350">Simplicity of management is one of the key goals of the VDC.</span></span> <span data-ttu-id="a66ff-351">そのため、NAT を使用した IP の問題への対処は推奨されるソリューションではありません。</span><span class="sxs-lookup"><span data-stu-id="a66ff-351">So using NAT to handle IP concerns isn't a solution that we recommend.</span></span>

<span data-ttu-id="a66ff-352">インフラストラクチャ コンポーネントは次の機能を備えています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-352">Infrastructure components have the following functionality:</span></span>

-   <span data-ttu-id="a66ff-353">[**ID とディレクトリ サービス**][AAD]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-353">[**Identity and directory services**][AAD].</span></span> <span data-ttu-id="a66ff-354">Azure のすべてのリソース種類へのアクセスは、ディレクトリ サービスに格納された ID によって制御されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-354">Access to every resource type in Azure is controlled by an identity stored in a directory service.</span></span> <span data-ttu-id="a66ff-355">ディレクトリ サービスには、ユーザー リストと、特定の Azure サブスクリプションのリソースへのアクセス権が格納されています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-355">The directory service stores the users list and the access rights to resources in a specific Azure subscription.</span></span> <span data-ttu-id="a66ff-356">これらのサービスは、クラウドにのみ存在できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-356">These services can exist in the cloud only.</span></span> <span data-ttu-id="a66ff-357">または、Azure Active Directory に格納されたオンプレミスの ID と同期することができます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-357">Or they can be synchronized with an on-premises identity stored in Azure Active Directory.</span></span>
-   <span data-ttu-id="a66ff-358">[**仮想ネットワーク**][VPN]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-358">[**Virtual network**][VPN].</span></span> <span data-ttu-id="a66ff-359">仮想ネットワークは、VDC の主要コンポーネントの 1 つです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-359">Virtual networks are one of main components of the VDC.</span></span> <span data-ttu-id="a66ff-360">仮想ネットワークを使用して、Azure プラットフォーム上にトラフィックの分離境界を作成できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-360">By using virtual networks, you can create a traffic isolation boundary on the Azure platform.</span></span> <span data-ttu-id="a66ff-361">仮想ネットワークは、1 つまたは複数の仮想ネットワーク セグメントで構成されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-361">A virtual network is composed of single or multiple virtual network segments.</span></span> <span data-ttu-id="a66ff-362">それぞれが特定の IP ネットワーク プレフィックス (サブネット) を持ちます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-362">Each has a specific IP network prefix, a subnet.</span></span> <span data-ttu-id="a66ff-363">仮想ネットワークにより、IaaS 仮想マシンと PaaS サービスがプライベート通信を確立できる内部境界領域が定義されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-363">The virtual network defines an internal perimeter area where IaaS virtual machines and PaaS services can establish private communications.</span></span> <span data-ttu-id="a66ff-364">仮想ネットワーク内の VM と PaaS サービスは、別の仮想ネットワーク内の VM および PaaS サービスと直接通信することはできません。</span><span class="sxs-lookup"><span data-stu-id="a66ff-364">VMs and PaaS services in one virtual network can't communicate directly to VMs and PaaS services in a different virtual network.</span></span> <span data-ttu-id="a66ff-365">この分離は、両方の仮想ネットワークが同じお客様によって同じサブスクリプションで作成されている場合でも行われます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-365">This isolation occurs even if the same customer creates both virtual networks under the same subscription.</span></span> <span data-ttu-id="a66ff-366">分離は、仮想ネットワーク内でお客様の VM と通信のプライバシーを確保するための重要な特性です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-366">Isolation is a critical property that ensures customer VMs and communication stay private within a virtual network.</span></span>
-   <span data-ttu-id="a66ff-367">[**UDR**][UDR]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-367">[**UDR**][UDR].</span></span> <span data-ttu-id="a66ff-368">仮想ネットワーク内のトラフィックは、システム ルーティング テーブルに基づいて既定でルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-368">Traffic in a virtual network is routed by default based on the system routing table.</span></span> <span data-ttu-id="a66ff-369">ユーザー定義ルートは、ネットワーク管理者が 1 つ以上のサブネットに関連付けることができるカスタム ルーティング テーブルです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-369">A user-defined route is a custom routing table that network administrators can associate to one or more subnets.</span></span> <span data-ttu-id="a66ff-370">この関連付けにより、システム ルーティング テーブルの動作が上書きされ、仮想ネットワーク内の通信パスが定義されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-370">This association overwrites the behavior of the system routing table and defines a communication path within a virtual network.</span></span> <span data-ttu-id="a66ff-371">UDR が存在すると、スポークからのエグレス トラフィックが、特定のカスタム VM、またはハブとスポークに存在するネットワーク仮想アプライアンスとロード バランサーを通過することが保証されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-371">The presence of UDRs guarantees that egress traffic from the spoke transits through specific custom VMs or network virtual appliances and load balancers present in the hub and in the spokes.</span></span>
-   <span data-ttu-id="a66ff-372">[**NSG**][NSG]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-372">[**NSG**][NSG].</span></span> <span data-ttu-id="a66ff-373">ネットワーク セキュリティ グループは、IP 送信元、IP 送信先、プロトコル、IP 送信元ポート、IP 送信先ポートのトラフィック フィルターとして機能するセキュリティ規則のリストです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-373">A network security group is a list of security rules that acts as traffic filtering on IP sources, IP destinations, protocols, IP source ports, and IP destination ports.</span></span> <span data-ttu-id="a66ff-374">NSG は、サブネットと、Azure VM に関連付けられた仮想 NIC カードのどちらか一方または両方に適用できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-374">The NSG can apply to a subnet, a virtual NIC card associated with an Azure VM, or both.</span></span> <span data-ttu-id="a66ff-375">NSG は、ハブとスポークに正しいフロー制御を実装するうえで不可欠です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-375">NSGs are essential to implement a correct flow control in the hub and in the spokes.</span></span> <span data-ttu-id="a66ff-376">NSG によって提供されるセキュリティのレベルは、どのポートをどのような目的で開くのかによって決まります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-376">The level of security afforded by the NSG is a function of which ports you open and for what purpose.</span></span> <span data-ttu-id="a66ff-377">IPtables や Windows ファイアウォールなどのホストベースのファイアウォールを使用して、VM ごとの追加フィルターを適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-377">Customers should apply additional per VM filters with host-based firewalls such as IPtables or the Windows Firewall.</span></span>
-   <span data-ttu-id="a66ff-378">[**DNS**][DNS]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-378">[**DNS**][DNS].</span></span> <span data-ttu-id="a66ff-379">VDC の仮想ネットワーク内のリソースの名前解決は、DNS によって提供されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-379">The name resolution of resources in the virtual networks of the VDC is provided through the DNS.</span></span> <span data-ttu-id="a66ff-380">Azure は、[パブリック][DNS]と[プライベート][PrivateDNS]の両方の名前解決に DNS サービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-380">Azure provides DNS services for both [public][DNS] and [private][PrivateDNS] name resolution.</span></span> <span data-ttu-id="a66ff-381">プライベート ゾーンは、仮想ネットワーク内での名前解決と仮想ネットワーク間での名前解決を両方提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-381">Private zones provide name resolution both within a virtual network and across virtual networks.</span></span> <span data-ttu-id="a66ff-382">プライベート ゾーンは、同じリージョン内の複数の仮想ネットワークをまたぐだけでなく、複数のリージョンおよびサブスクリプションをまたぐことができます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-382">You can have private zones that span across virtual networks in the same region and also across regions and subscriptions.</span></span> <span data-ttu-id="a66ff-383">パブリック解決の場合、Azure DNS は DNS ドメインのホスティング サービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-383">For public resolution, Azure DNS provides a hosting service for DNS domains.</span></span> <span data-ttu-id="a66ff-384">それは Microsoft Azure インフラストラクチャを使用した名前解決を提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-384">It provides name resolution by using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="a66ff-385">Azure でドメインをホストすることで、その他の Azure サービスと同じ資格情報、API、ツール、課金情報を使用して DNS レコードを管理できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-385">By hosting your domains in Azure, you can manage your DNS records by using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>
-   <span data-ttu-id="a66ff-386">[**サブスクリプション**][SubMgmt]と[**リソース グループ管理**][RGMgmt]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-386">[**Subscription**][SubMgmt] and [**resource group management**][RGMgmt].</span></span> <span data-ttu-id="a66ff-387">サブスクリプションでは、Azure にリソースの複数のグループを作成する自然な境界が定義されています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-387">A subscription defines a natural boundary to create multiple groups of resources in Azure.</span></span> <span data-ttu-id="a66ff-388">サブスクリプションのリソースは、**リソース グループ**と呼ばれる論理コンテナーにまとめられています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-388">Resources in a subscription are assembled together in logical containers named **resource groups**.</span></span> <span data-ttu-id="a66ff-389">リソース グループは、VDC のリソースを整理するための論理グループを表します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-389">The resource group represents a logical group to organize the resources of the VDC.</span></span>
-   <span data-ttu-id="a66ff-390">[**RBAC**][RBAC]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-390">[**RBAC**][RBAC].</span></span> <span data-ttu-id="a66ff-391">RBAC を使用すると、特定の Azure リソースにアクセスするための権限と共に組織のロールをマップできるので、ユーザーをアクションの特定のサブセットだけに制限することが可能になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-391">Through RBAC, it's possible to map organizational roles along with rights to access specific Azure resources, which allows you to restrict users to only a certain subset of actions.</span></span> <span data-ttu-id="a66ff-392">RBAC では、関連するスコープ内のユーザー、グループ、アプリケーションに適切なロールを割り当てることで、アクセス権を付与できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-392">With RBAC, you can grant access by assigning the appropriate role to users, groups, and applications within the relevant scope.</span></span> <span data-ttu-id="a66ff-393">ロール割り当てのスコープには、Azure サブスクリプション、リソース グループ、または単独のリソースを指定できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-393">The scope of a role assignment can be an Azure subscription, a resource group, or a single resource.</span></span> <span data-ttu-id="a66ff-394">RBAC では、アクセス許可を継承できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-394">RBAC allows inheritance of permissions.</span></span> <span data-ttu-id="a66ff-395">親スコープでロールが割り当てられると、その親に含まれる子にもアクセス権が付与されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-395">A role assigned at a parent scope also grants access to the children within it.</span></span> <span data-ttu-id="a66ff-396">RBAC を使用して、職務を分離し、職務に必要なアクセス権のみをユーザーに付与できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-396">With RBAC, you can segregate duties and grant only the amount of access to users that they need to do their jobs.</span></span> <span data-ttu-id="a66ff-397">たとえば、RBAC を使用して、ある従業員がサブスクリプション内の仮想マシンを管理できるようにします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-397">For example, use RBAC so one employee can manage virtual machines in a subscription.</span></span> <span data-ttu-id="a66ff-398">別の従業員は、同じサブスクリプション内の SQL データベースを管理できるようにします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-398">Another can manage SQL databases within the same subscription.</span></span>
-   <span data-ttu-id="a66ff-399">[**仮想ネットワーク ピアリング**][VNetPeering]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-399">[**Virtual network peering**][VNetPeering].</span></span> <span data-ttu-id="a66ff-400">VDC のインフラストラクチャの作成に使用される基本的な機能が仮想ネットワーク ピアリングです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-400">The fundamental feature used to create the infrastructure of the VDC is virtual network peering.</span></span> <span data-ttu-id="a66ff-401">これは、Azure データセンターのネットワークを介して、またはリージョンをまたがる Azure の世界規模のバックボーンを使用して、同じリージョンの 2 つの仮想ネットワークを接続するメカニズムです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-401">It's a mechanism that connects two virtual networks in the same region through the Azure datacenter network or by using the Azure worldwide backbone across regions.</span></span>

#### <a name="component-type-perimeter-networks"></a><span data-ttu-id="a66ff-402">コンポーネントの種類: 境界ネットワーク</span><span class="sxs-lookup"><span data-stu-id="a66ff-402">Component type: Perimeter networks</span></span>
<span data-ttu-id="a66ff-403">[境界ネットワーク][DMZ] コンポーネント (DMZ ネットワーク) を使用すると、インターネットとの間の双方向の接続に加え、オンプレミス ネットワークまたは物理データセンター ネットワークとのネットワーク接続を提供できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-403">With [perimeter network][DMZ] components, or a DMZ network, you can provide network connectivity with your on-premises or physical datacenter networks, along with any connectivity to and from the internet.</span></span> <span data-ttu-id="a66ff-404">このコンポーネントは、ネットワークおよびセキュリティ チームが最も多くの時間を費やす場所でもあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-404">It's also where your network and security teams likely spend most of their time.</span></span>

<span data-ttu-id="a66ff-405">受信パケットは、スポーク内のバックエンド サーバーに到達する前に、ハブのセキュリティ アプライアンスを通過する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-405">Incoming packets should flow through the security appliances in the hub before reaching the back-end servers in the spokes.</span></span> <span data-ttu-id="a66ff-406">セキュリティ アプライアンスの例として、ファイアウォール、IDS、IPS があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-406">Examples are the firewall, IDS, and IPS.</span></span> <span data-ttu-id="a66ff-407">ワークロードからインターネットへのパケットも、ネットワークから送信される前に、境界ネットワーク内のセキュリティ アプライアンスを通過する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-407">Before they leave the network, internet-bound packets from the workloads should also flow through the security appliances in the perimeter network.</span></span> <span data-ttu-id="a66ff-408">このフローは、ポリシーの適用、検査、監査を目的としています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-408">The purposes of this flow are policy enforcement, inspection, and auditing.</span></span>

<span data-ttu-id="a66ff-409">境界ネットワーク コンポーネントは、次の機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-409">Perimeter network components provide the following features:</span></span>

-   <span data-ttu-id="a66ff-410">[仮想ネットワーク][VNet]、[UDR][UDR]、[NSG][NSG]</span><span class="sxs-lookup"><span data-stu-id="a66ff-410">[Virtual networks][VNet], [UDRs][UDR], and [NSGs][NSG]</span></span>
-   <span data-ttu-id="a66ff-411">[ネットワーク仮想アプライアンス][NVA]</span><span class="sxs-lookup"><span data-stu-id="a66ff-411">[Network virtual appliances][NVA]</span></span>
-   <span data-ttu-id="a66ff-412">[Azure Load Balancer][ALB]</span><span class="sxs-lookup"><span data-stu-id="a66ff-412">[Azure Load Balancer][ALB]</span></span>
-   <span data-ttu-id="a66ff-413">[Azure Application Gateway][AppGW] と [Web アプリケーション ファイアウォール (WAF)][WAF]</span><span class="sxs-lookup"><span data-stu-id="a66ff-413">[Azure Application Gateway][AppGW] and [web application firewall (WAF)][WAF]</span></span>
-   <span data-ttu-id="a66ff-414">[パブリック IP][PIP]</span><span class="sxs-lookup"><span data-stu-id="a66ff-414">[Public IPs][PIP]</span></span>
-   <span data-ttu-id="a66ff-415">[Azure Front Door][AFD]</span><span class="sxs-lookup"><span data-stu-id="a66ff-415">[Azure Front Door][AFD]</span></span>
-   <span data-ttu-id="a66ff-416">[Azure Firewall][AzFW]</span><span class="sxs-lookup"><span data-stu-id="a66ff-416">[Azure Firewall][AzFW]</span></span>

<span data-ttu-id="a66ff-417">通常、中央 IT チームとセキュリティ チームは、境界ネットワークの要件の定義と運用を担当します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-417">Usually, the central IT and security teams have responsibility for requirement definition and operation of the perimeter networks.</span></span>

<span data-ttu-id="a66ff-418">[![7]][7]</span><span class="sxs-lookup"><span data-stu-id="a66ff-418">[![7]][7]</span></span>

<span data-ttu-id="a66ff-419">上記の図は、インターネットとオンプレミス ネットワークにアクセスする 2 つの境界の適用を示しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-419">The preceding diagram shows the enforcement of two perimeters with access to the internet and an on-premises network.</span></span> <span data-ttu-id="a66ff-420">どちらも DMZ ハブと vWAN ハブ内に存在します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-420">Both are resident in the DMZ and vWAN hubs.</span></span> <span data-ttu-id="a66ff-421">DMZ ハブでは、多数の基幹業務をサポートするために、Web アプリケーション ファイアウォール (WAF) の複数のファームまたは Azure Firewall インスタンスを使用して、インターネットへの境界ネットワークをスケールアップできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-421">In the DMZ hub, the perimeter network to the internet can scale up to support large numbers of lines of business by using multiple farms of web application firewall (WAF) or Azure Firewall instances.</span></span> <span data-ttu-id="a66ff-422">vWAN ハブでは、ブランチ間およびブランチから Azure への非常にスケーラブルな接続が、必要に応じて VPN または ExpressRoute 経由で実行されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-422">In the vWAN hub, highly scalable branch-to-branch and branch-to-Azure connectivity is accomplished via a VPN or ExpressRoute as needed.</span></span>

<span data-ttu-id="a66ff-423">[**仮想ネットワーク**][VNet]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-423">[**Virtual networks**][VNet].</span></span> <span data-ttu-id="a66ff-424">通常、ハブは複数のサブネットを含む仮想ネットワーク上に構築され、NVA、WAF、Azure Application Gateway インスタンスを介してインターネットとの間でやり取りされるトラフィックをフィルター処理および検査するさまざまな種類のサービスをホストします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-424">The hub is typically built on a virtual network with multiple subnets to host the different types of services that filter and inspect traffic to or from the internet via NVAs, WAF, and Azure Application Gateway instances.</span></span>

<span data-ttu-id="a66ff-425">[**UDR**][UDR]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-425">[**UDRs**][UDR].</span></span> <span data-ttu-id="a66ff-426">UDR を使用して、ファイアウォール、IDS または IPS、その他の仮想アプライアンスをデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-426">With UDRs, customers can deploy firewalls, IDSs or IPSs, and other virtual appliances.</span></span> <span data-ttu-id="a66ff-427">これらのセキュリティ アプライアンスを経由してネットワーク トラフィックをルーティングすることで、セキュリティ境界ポリシーの適用、監査、検査が可能になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-427">They can route network traffic through these security appliances for security boundary policy enforcement, auditing, and inspection.</span></span> <span data-ttu-id="a66ff-428">UDR は、ハブとスポークのどちらにも作成できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-428">You can create UDRs in both the hub and the spokes.</span></span> <span data-ttu-id="a66ff-429">これにより、VDC で使用される特定のカスタム VM、ネットワーク仮想アプライアンス、ロード バランサーをトラフィックが通過することが保証されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-429">They guarantee that traffic transits through the specific custom VMs, network virtual appliances, and load balancers used by the VDC.</span></span> <span data-ttu-id="a66ff-430">スポーク内に存在する VM から生成されたトラフィックが正しい仮想アプライアンスに確実に転送されるようにするには、スポークのサブネットに UDR を設定します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-430">To make sure that traffic generated from VMs resident in the spoke transits to the correct virtual appliances, set a UDR in the subnets of the spoke.</span></span> <span data-ttu-id="a66ff-431">次ホップとして、内部ロード バランサーのフロントエンド IP アドレスを設定します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-431">Set the front-end IP address of the internal load balancer as the next hop.</span></span> <span data-ttu-id="a66ff-432">内部ロード バランサーは、内部トラフィックを仮想アプライアンス (ロード バランサーのバックエンド プール) に分散させます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-432">The internal load balancer distributes the internal traffic to the virtual appliances, or load balancer back-end pool.</span></span>

<span data-ttu-id="a66ff-433">[**Azure Firewall**][AzFW] は、Azure Virtual Network リソースを保護するクラウドベースのマネージド ネットワーク セキュリティ サービスです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-433">[**Azure Firewall**][AzFW] is a managed, cloud-based network security service that protects your Azure Virtual Network resources.</span></span> <span data-ttu-id="a66ff-434">組み込みの高可用性とクラウドの無制限のスケーラビリティを備えた、完全にステートフルなサービスとしてのファイアウォールです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-434">It's a fully stateful firewall as a service with built-in high availability and unrestricted cloud scalability.</span></span> <span data-ttu-id="a66ff-435">サブスクリプションと仮想ネットワークをまたいでアプリケーションとネットワークの接続ポリシーを一元的に作成、適用、記録できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-435">You can centrally create, enforce, and log application and network connectivity policies across subscriptions and virtual networks.</span></span> <span data-ttu-id="a66ff-436">Azure Firewall では、仮想ネットワーク リソースに静的パブリック IP アドレスが使用されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-436">Azure Firewall uses a static public IP address for your virtual network resources.</span></span> <span data-ttu-id="a66ff-437">これにより、仮想ネットワークから送信されるトラフィックを外部のファイアウォールで識別できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-437">It allows outside firewalls to identify traffic that originates from your virtual network.</span></span> <span data-ttu-id="a66ff-438">サービスはログ記録と分析を行うために Azure Monitor と完全に統合されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-438">The service is fully integrated with Azure Monitor for logging and analytics.</span></span>

<span data-ttu-id="a66ff-439">[**ネットワーク仮想アプライアンス**][NVA]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-439">[**Network virtual appliances**][NVA].</span></span> <span data-ttu-id="a66ff-440">ハブでは、インターネットにアクセスする境界ネットワークは、通常、Azure Firewall インスタンスあるいはファイアウォールまたは Web アプリケーション ファイアウォール (WAF) のファームによって管理されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-440">In the hub, the perimeter network with access to the internet is normally managed through an Azure Firewall instance or a farm of firewalls or web application firewall (WAF).</span></span>

<span data-ttu-id="a66ff-441">一般に、さまざまな LOB で多くの Web アプリケーションが使用されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-441">Different LOBs commonly use many web applications.</span></span> <span data-ttu-id="a66ff-442">これらのアプリケーションは、さまざまな脆弱性や潜在的な悪用の影響を受ける傾向があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-442">These applications tend to suffer from various vulnerabilities and potential exploits.</span></span> <span data-ttu-id="a66ff-443">Web アプリケーション ファイアウォールは、Web アプリケーション (HTTP/HTTPS) に対する攻撃を汎用ファイアウォールよりも詳細に検出するために使用される特殊な種類の製品です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-443">Web application firewalls are a special type of product used to detect attacks against web applications, HTTP/HTTPS, in more depth than a generic firewall.</span></span> <span data-ttu-id="a66ff-444">従来のファイアウォール テクノロジと比較すると、WAF は脅威から内部 Web サーバーを保護するための特定の機能セットを備えています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-444">Compared with tradition firewall technology, WAFs have a set of specific features to protect internal web servers from threats.</span></span>

<span data-ttu-id="a66ff-445">ただし、サブスクリプションの要件により、リージョンをまたがることができないため、単一 VDC 実装は単一リージョン内でホストする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-445">However, a single VDC implementation is required to be hosted within a single region because the subscription requirements don't allow spanning of regions.</span></span> <span data-ttu-id="a66ff-446">この要件により、単一 VDC 実装はリージョンの障害に対して脆弱になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-446">This requirement makes a single VDC implementation vulnerable to regional outages.</span></span>

<span data-ttu-id="a66ff-447">Azure Firewall インスタンスまたは NVA ファイアウォール ファームでは、共通の管理プレーンを使用します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-447">An Azure Firewall instance or NVA firewall farms use a common administration plane.</span></span> <span data-ttu-id="a66ff-448">一連のセキュリティ規則により、スポーク内でホストされているワークロードが保護され、オンプレミス ネットワークへのアクセスが制御されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-448">A set of security rules protects the workloads that are hosted in the spokes and controls access to on-premises networks.</span></span> <span data-ttu-id="a66ff-449">Azure Firewall にはスケーラビリティが組み込まれているのに対し、NVA ファイアウォールはロード バランサーの背後で手動でスケーリングできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-449">Azure Firewall has scalability built in, whereas NVA firewalls can be manually scaled behind a load balancer.</span></span> <span data-ttu-id="a66ff-450">一般に、ファイアウォール ファームには WAF ほど特化したソフトウェアはありません。</span><span class="sxs-lookup"><span data-stu-id="a66ff-450">Generally, a firewall farm has less specialized software compared to WAF.</span></span> <span data-ttu-id="a66ff-451">ただし、エグレスおよびイングレスのあらゆる種類のトラフィックのフィルター処理と検査を行う、より広範なアプリケーション スコープを備えています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-451">But it has a broader application scope to filter and inspect any type of traffic in egress and ingress.</span></span> <span data-ttu-id="a66ff-452">NVA アプローチを使用している場合は、Azure Marketplace で入手してデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-452">If an NVA approach is used, they can be found and deployed from the Azure Marketplace.</span></span>

<span data-ttu-id="a66ff-453">インターネットから送信されるトラフィックには、Azure Firewall インスタンスまたは NVA の特定のセットを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-453">We recommend that you use one set of Azure Firewall instances, or NVAs, for traffic originating on the internet.</span></span> <span data-ttu-id="a66ff-454">オンプレミスから送信されるトラフィックには、別のセットを使用します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-454">Use another for traffic originating on-premises.</span></span> <span data-ttu-id="a66ff-455">両方にファイアウォールの同じセットを使用すると、2 つのネットワーク トラフィック セットの間にセキュリティ境界が提供されないため、セキュリティ リスクになります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-455">Using only one set of firewalls for both is a security risk as it provides no security perimeter between the two sets of network traffic.</span></span> <span data-ttu-id="a66ff-456">個別のファイアウォール レイヤーを使用すると、セキュリティ規則のチェックの複雑さが軽減され、規則と受信ネットワーク要求の対応が明確になります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-456">Using separate firewall layers reduces the complexity of checking security rules and makes it clear which rules correspond to which incoming network request.</span></span>

<span data-ttu-id="a66ff-457">ほとんどの大企業は、複数のドメインを管理しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-457">Most large enterprises manage multiple domains.</span></span> <span data-ttu-id="a66ff-458">[Azure DNS][DNS] を使用して、特定のドメインの DNS レコードをホストできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-458">[Azure DNS][DNS] can be used to host the DNS records for a particular domain.</span></span> <span data-ttu-id="a66ff-459">たとえば、Azure 外部ロード バランサーまたは WAF の仮想 IP (VIP) アドレスを、Azure DNS レコードの **A** レコードに登録できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-459">For example, the virtual IP (VIP) address of the Azure external load balancer, or WAF, can be registered in the **A** record of an Azure DNS record.</span></span> <span data-ttu-id="a66ff-460">[**プライベート DNS**][PrivateDNS] を使用して、仮想ネットワーク内のプライベート アドレス空間を管理することもできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-460">[**Private DNSs**][PrivateDNS] are also available for managing the private address spaces inside virtual networks.</span></span>

<span data-ttu-id="a66ff-461">[**Azure Load Balancer**][ALB] は、高可用性レイヤー 4 (TCP または UDP) サービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-461">[**Azure Load Balancer**][ALB] offers a high-availability Layer 4, TCP or UDP, service.</span></span> <span data-ttu-id="a66ff-462">負荷分散セットで定義されているサービス インスタンス間に受信トラフィックを分散できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-462">It can distribute incoming traffic among service instances defined in a load-balanced set.</span></span> <span data-ttu-id="a66ff-463">フロントエンド エンドポイント (パブリックまたはプライベート IP) からロード バランサーに送信されたトラフィックは、アドレス変換を行っても行わなくても、一連のバックエンド IP アドレス プールに再分散できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-463">Traffic sent to the load balancer from front-end endpoints, public or private IP, can be redistributed with or without address translation to a set of back-end IP address pools.</span></span> <span data-ttu-id="a66ff-464">たとえば、ネットワーク仮想アプライアンスや VM に再分散できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-464">Examples are network virtual appliances or VMs.</span></span>

<span data-ttu-id="a66ff-465">Azure Load Balancer では、さまざまなサーバー インスタンスの正常性をプローブすることもできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-465">Azure Load Balancer can probe the health of the various server instances as well.</span></span> <span data-ttu-id="a66ff-466">プローブが応答しない場合、Load Balancer は異常なインスタンスへのトラフィックの送信を停止します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-466">When a probe fails to respond, the load balancer stops sending traffic to the unhealthy instance.</span></span> <span data-ttu-id="a66ff-467">VDC では、ハブ内の外部ロード バランサーは、たとえば NVA へのトラフィックを分散します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-467">In the VDC, an external load balancer in the hub balances the traffic to NVAs, for example.</span></span> <span data-ttu-id="a66ff-468">スポークでは、多層アプリケーションのさまざまな VM 間へのトラフィックの分散などのタスクを実行します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-468">In the spokes, it does tasks like balancing traffic between different VMs of a multi-tier application.</span></span>

<span data-ttu-id="a66ff-469">[**Azure Front Door**][AFD] は、Microsoft のスケーラブルな高可用性 Web アプリケーション アクセラレーション プラットフォーム、グローバル HTTP ロード バランサー、アプリケーション保護、コンテンツ配信ネットワークです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-469">[**Azure Front Door**][AFD] is Microsoft's highly available and scalable web application acceleration platform, global HTTP load balancer, application protection, and content delivery network.</span></span> <span data-ttu-id="a66ff-470">Front Door は、Microsoft のグローバル ネットワークのエッジの 100 箇所以上で稼働しています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-470">Front Door runs in more than 100 locations at the edge of Microsoft's global network.</span></span> <span data-ttu-id="a66ff-471">Front Door を使用して、動的 Web アプリケーションと静的コンテンツを構築、運用、スケールアウトできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-471">By using Front Door, you can build, operate, and scale out your dynamic web applications and static content.</span></span> <span data-ttu-id="a66ff-472">Front Door は、アプリケーションに次の利点をもたらします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-472">Front Door provides your application the following benefits:</span></span> 
* <span data-ttu-id="a66ff-473">世界水準のエンドユーザー パフォーマンス</span><span class="sxs-lookup"><span data-stu-id="a66ff-473">World-class end-user performance.</span></span>
* <span data-ttu-id="a66ff-474">統一されたリージョンまたはスタンプのメンテナンスの自動化</span><span class="sxs-lookup"><span data-stu-id="a66ff-474">Unified regional or stamp maintenance automation.</span></span>
* <span data-ttu-id="a66ff-475">BCDR の自動化</span><span class="sxs-lookup"><span data-stu-id="a66ff-475">BCDR automation.</span></span>
* <span data-ttu-id="a66ff-476">クライアントまたはユーザー情報の統合</span><span class="sxs-lookup"><span data-stu-id="a66ff-476">Unified client or user information.</span></span> 
* <span data-ttu-id="a66ff-477">キャッシュ</span><span class="sxs-lookup"><span data-stu-id="a66ff-477">Caching.</span></span> 
* <span data-ttu-id="a66ff-478">サービスの分析情報</span><span class="sxs-lookup"><span data-stu-id="a66ff-478">Service insights.</span></span> <span data-ttu-id="a66ff-479">このプラットフォームは、パフォーマンス、信頼性、およびサポートの SLA、コンプライアンスの認定、Azure でネイティブに開発、運用、サポートされている監査可能なセキュリティ対策を提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-479">The platform offers performance, reliability and support SLAs, compliance certifications, and auditable security practices that are developed, operated, and supported natively by Azure.</span></span>

<span data-ttu-id="a66ff-480">[**Application Gateway**][AppGW] は、アプリケーション デリバリー コントローラー (ADC) をサービスとして提供する専用仮想アプライアンスであり、さまざまなレイヤー 7 負荷分散機能をアプリケーションで利用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-480">[**Application Gateway**][AppGW] is a dedicated virtual appliance that provides application delivery controller (ADC) as a service, offering various layer 7 load-balancing capabilities for your application.</span></span> <span data-ttu-id="a66ff-481">CPU を集中的に使用する SSL 終了を Application Gateway インスタンスにオフロードして、Web ファームの生産性を最適化できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-481">You can optimize web farm productivity by offloading CPU-intensive SSL termination to the Application Gateway instance.</span></span> <span data-ttu-id="a66ff-482">また、次の例のような他のレイヤー 7 ルーティング機能も提供されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-482">It also provides other layer 7 routing capabilities that include the following examples:</span></span> 
* <span data-ttu-id="a66ff-483">受信トラフィックのラウンド ロビン分散。</span><span class="sxs-lookup"><span data-stu-id="a66ff-483">Round robin distribution of incoming traffic.</span></span> 
* <span data-ttu-id="a66ff-484">Cookie ベースのセッション アフィニティ。</span><span class="sxs-lookup"><span data-stu-id="a66ff-484">Cookie-based session affinity.</span></span> 
* <span data-ttu-id="a66ff-485">URL パス ベースのルーティング。</span><span class="sxs-lookup"><span data-stu-id="a66ff-485">URL path-based routing.</span></span> 
* <span data-ttu-id="a66ff-486">1 つの Application Gateway インスタンスの背後で複数の Web サイトをホストする機能。</span><span class="sxs-lookup"><span data-stu-id="a66ff-486">The ability to host multiple websites behind a single Application Gateway instance.</span></span> <span data-ttu-id="a66ff-487">Application Gateway WAF SKU の一部として、Web アプリケーション ファイアウォール (WAF) も提供されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-487">Web application firewall (WAF) is also provided as part of the Application Gateway WAF SKU.</span></span> <span data-ttu-id="a66ff-488">この SKU は、一般的な Web の脆弱性や悪用から Web アプリケーションを保護します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-488">This SKU provides protection to web applications from common web vulnerabilities and exploits.</span></span> <span data-ttu-id="a66ff-489">Application Gateway は、インターネット接続ゲートウェイ、内部専用ゲートウェイ、またはこの両方の組み合わせとして構成できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-489">Application Gateway can be configured as an internet-facing gateway, an internal-only gateway, or a combination of both.</span></span> 

<span data-ttu-id="a66ff-490">[**パブリック IP**][PIP]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-490">[**Public IPs**][PIP].</span></span> <span data-ttu-id="a66ff-491">Azure の一部の機能を使用すると、サービス エンドポイントをパブリック IP アドレスに関連付けることができるので、インターネットからリソースにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-491">With some Azure features, you can associate service endpoints to a public IP address, so that your resource can be accessed from the internet.</span></span> <span data-ttu-id="a66ff-492">このエンドポイントでは、ネットワーク アドレス変換 (NAT) を使用して、Azure 仮想ネットワーク上の内部アドレスとポートにトラフィックをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-492">This endpoint uses network address translation (NAT) to route traffic to the internal address and port on the Azure virtual network.</span></span> <span data-ttu-id="a66ff-493">これは、外部トラフィックが仮想ネットワークに到達するための主な経路です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-493">This path is the primary way for external traffic to pass into the virtual network.</span></span> <span data-ttu-id="a66ff-494">パブリック IP アドレスを構成することで、仮想ネットワークに渡されるトラフィックと、そのトラフィックが仮想ネットワークのどこでどのように変換されるのかを決定することができます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-494">You can configure public IP addresses to determine which traffic is passed in and how and where it's translated onto the virtual network.</span></span>

<span data-ttu-id="a66ff-495">[**Azure DDoS Protection Standard**][DDOS] は、[Basic サービス][DDOS] レベルに加えて、特に Azure Virtual Network リソースに対してチューニングされた追加の軽減機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-495">[**Azure DDoS Protection Standard**][DDOS] provides additional mitigation capabilities over the [Basic service][DDOS] tier that are tuned specifically to Azure Virtual Network resources.</span></span> <span data-ttu-id="a66ff-496">DDoS Protection Standard の有効化は簡単であり、アプリケーションの変更は不要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-496">DDoS Protection Standard is simple to enable and requires no application changes.</span></span> <span data-ttu-id="a66ff-497">保護ポリシーは、専用のトラフィック監視および機械学習アルゴリズムによってチューニングされます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-497">Protection policies are tuned through dedicated traffic monitoring and machine learning algorithms.</span></span> <span data-ttu-id="a66ff-498">ポリシーは、仮想ネットワークにデプロイされたリソースに関連付けられているパブリック IP アドレスに適用されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-498">Policies are applied to public IP addresses associated to resources deployed in virtual networks.</span></span> <span data-ttu-id="a66ff-499">リソースの例として、Azure Load Balancer、Azure Application Gateway、Azure Service Fabric のインスタンスがあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-499">Examples are Azure Load Balancer, Azure Application Gateway, and Azure Service Fabric instances.</span></span> <span data-ttu-id="a66ff-500">攻撃中および履歴の表示のために、Azure Monitor ビューからリアルタイムのテレメトリを使用できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-500">Real-time telemetry is available through Azure Monitor views during an attack and for history.</span></span> <span data-ttu-id="a66ff-501">アプリケーション レイヤー保護は、Azure Application Gateway Web アプリケーション ファイアウォールによって追加できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-501">Application layer protection can be added through the Azure Application Gateway web application firewall.</span></span> <span data-ttu-id="a66ff-502">IPv4 の Azure パブリック IP アドレスに対して保護が提供されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-502">Protection is provided for IPv4 Azure public IP addresses.</span></span>

#### <a name="component-type-monitoring"></a><span data-ttu-id="a66ff-503">コンポーネントの種類: 監視</span><span class="sxs-lookup"><span data-stu-id="a66ff-503">Component type: Monitoring</span></span>
<span data-ttu-id="a66ff-504">監視コンポーネントは、他のすべてのコンポーネントの種類からの可視性とアラートを提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-504">Monitoring components provide visibility and alerting from all the other components types.</span></span> <span data-ttu-id="a66ff-505">すべてのチームは、アクセスできるコンポーネントとサービスに対する監視にアクセスできる必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-505">All teams should have access to monitoring for the components and services they have access to.</span></span> <span data-ttu-id="a66ff-506">一元化されたヘルプ デスク チームまたは運用チームには、これらのコンポーネントによって提供されるデータへの統合アクセスが必要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-506">If you have a centralized help desk or operation teams, they need to have integrated access to the data provided by these components.</span></span>

<span data-ttu-id="a66ff-507">Azure では、Azure がホストするリソースの動作を追跡するために、さまざまな種類のログ サービスと監視サービスが提供されています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-507">Azure offers different types of logging and monitoring services to track the behavior of Azure-hosted resources.</span></span> <span data-ttu-id="a66ff-508">Azure でのワークロードのガバナンスと制御は、ログ データの収集だけでなく、報告された特定のイベントに基づいてアクションをトリガーする機能にも基づいています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-508">Governance and control of workloads in Azure is based not just on collecting log data but also on the ability to trigger actions based on specific reported events.</span></span>

<span data-ttu-id="a66ff-509">[**Azure Monitor**][Monitor]。</span><span class="sxs-lookup"><span data-stu-id="a66ff-509">[**Azure Monitor**][Monitor].</span></span> <span data-ttu-id="a66ff-510">Azure には、監視領域において特定の役割やタスクを個別に実行するサービスが複数用意されています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-510">Azure includes multiple services that individually perform a specific role or task in the monitoring space.</span></span> <span data-ttu-id="a66ff-511">また、これらのサービスが組み合わされた包括的なソリューションを使用すれば、アプリケーションやそれらのサービスを支える Azure リソースからテレメトリを収集、分析し、それに基づいて対処できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-511">Together, these services deliver a comprehensive solution for collecting, analyzing, and acting on telemetry from your application and the Azure resources that support them.</span></span> <span data-ttu-id="a66ff-512">また、オンプレミスの重要なリソースを監視して、ハイブリッド監視環境を構築することもできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-512">They can also work to monitor critical on-premises resources in order to provide a hybrid monitoring environment.</span></span> <span data-ttu-id="a66ff-513">アプリケーションの包括的な監視戦略を策定するための最初のステップは、利用可能なツールとデータの把握です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-513">Understanding the tools and data that are available is the first step in developing a complete monitoring strategy for your application.</span></span>

<span data-ttu-id="a66ff-514">Azure の主要なログの種類は次の 2 つです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-514">There are two major types of logs in Azure:</span></span>

-   <span data-ttu-id="a66ff-515">[Azure アクティビティ ログ][ActLog] (以前の名称は**操作ログ**) では、Azure サブスクリプションのリソースに対して実行された操作を把握できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-515">The [Azure Activity Log][ActLog], previously called **Operational Logs**, provides insight into the operations that were performed on resources in the Azure subscription.</span></span> <span data-ttu-id="a66ff-516">これらのログは、サブスクリプションのコントロールプレーン イベントを報告します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-516">These logs report the control-plane events for your subscriptions.</span></span> <span data-ttu-id="a66ff-517">すべての Azure リソースで監査ログが生成されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-517">Every Azure resource produces audit logs.</span></span>

-   <span data-ttu-id="a66ff-518">[Azure Monitor 診断ログ][DiagLog]は、リソースによって生成されるログであり、そのリソースの操作に関する豊富なデータを提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-518">[Azure Monitor diagnostic logs][DiagLog] are logs generated by a resource that provides rich, frequent data about the operation of that resource.</span></span> <span data-ttu-id="a66ff-519">これらのログの内容は、リソースの種類によって異なります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-519">The content of these logs varies by resource type.</span></span>

<span data-ttu-id="a66ff-520">[![9]][9]</span><span class="sxs-lookup"><span data-stu-id="a66ff-520">[![9]][9]</span></span>

<span data-ttu-id="a66ff-521">VDC では、NSG ログの特に次の情報を追跡することが重要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-521">In the VDC, it's important to track the NSG logs, particularly this information:</span></span>

-   <span data-ttu-id="a66ff-522">[イベント ログ][NSGLog]: MAC アドレスに基づいて VM とインスタンス ロールに適用される NSG ルールに関する情報が提供されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-522">[Event logs][NSGLog] provide information on what NSG rules are applied to VMs and instance roles based on MAC address.</span></span>
-   <span data-ttu-id="a66ff-523">[カウンター ログ][NSGLog]: トラフィックを拒否または許可するために各 NSG ルールが実行された回数を追跡します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-523">[Counter logs][NSGLog] track how many times each NSG rule was run to deny or allow traffic.</span></span>

<span data-ttu-id="a66ff-524">監査、スタティック分析、またはバックアップのために、すべてのログを Azure ストレージ アカウントに保存できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-524">All logs can be stored in Azure storage accounts for audit, static analysis, or backup purposes.</span></span> <span data-ttu-id="a66ff-525">Azure ストレージ アカウントにログを保存すると、さまざまな種類のフレームワークを使用してこのデータを取得、準備、分析、視覚化し、クラウド リソースの状態と正常性を報告できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-525">When you store the logs in an Azure storage account, customers can use different types of frameworks to retrieve, prep, analyze, and visualize this data to report the status and health of cloud resources.</span></span> 

<span data-ttu-id="a66ff-526">大企業では、オンプレミス システムの監視用に標準的なフレームワークを既に利用していると考えられます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-526">Large enterprises should already have acquired a standard framework for monitoring on-premises systems.</span></span> <span data-ttu-id="a66ff-527">そのフレームワークを拡張して、クラウド デプロイによって生成されたログを統合できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-527">They can extend that framework to integrate logs generated by cloud deployments.</span></span> <span data-ttu-id="a66ff-528">組織では、[Azure Log Analytics][https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-queries] を使用して、すべてのログをクラウドに保持できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-528">By using [Azure Log Analytics][https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-queries], organizations can keep all the logging in the cloud.</span></span> <span data-ttu-id="a66ff-529">Log Analytics は、クラウドベースのサービスとして実装されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-529">Log Analytics is implemented as a cloud-based service.</span></span> <span data-ttu-id="a66ff-530">そのため、インフラストラクチャ サービスへの投資を最小限に抑えて、このサービスをすぐに稼働させることができます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-530">So you have it up and running quickly with minimal investment in infrastructure services.</span></span> <span data-ttu-id="a66ff-531">Log Analytics は、System Center Operations Manager などの System Center のコンポーネントと統合して、管理のための既存の投資をクラウドに拡張することもできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-531">Log Analytics also integrate with System Center components like System Center Operations Manager to extend your existing management investments into the cloud.</span></span> 

<span data-ttu-id="a66ff-532">Log Analytics は、オペレーティング システム、アプリケーション、インフラストラクチャ クラウド コンポーネントによって生成されたログおよびパフォーマンス データを収集、関連付け、検索、操作するための、Azure のサービスです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-532">Log Analytics is a service in Azure that helps collect, correlate, search, and act on log and performance data generated by operating systems, applications, and infrastructure cloud components.</span></span> <span data-ttu-id="a66ff-533">統合された検索およびカスタム ダッシュボードを使用して、VDC のすべてのワークロードのすべてのレコードを分析することで、リアルタイムの運用分析情報が提供されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-533">It gives customers real-time operational insights by using integrated search and custom dashboards to analyze all the records across all your workloads in the VDC.</span></span>

<span data-ttu-id="a66ff-534">[Azure Network Watcher][NetWatch] は、Azure 仮想ネットワーク内のリソースの監視、診断、メトリックの表示、ログの有効化/無効化を行うツールを提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-534">[Azure Network Watcher][NetWatch] provides tools to monitor, diagnose, and view metrics and enable or disable logs for resources in an Azure virtual network.</span></span> <span data-ttu-id="a66ff-535">これは、次のような機能を提供する多面的なサービスです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-535">It's a multifaceted service that allows the following functionalities and more:</span></span>
-    <span data-ttu-id="a66ff-536">仮想マシンとエンドポイント間の通信を監視する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-536">Monitor communication between a virtual machine and an endpoint.</span></span>
-    <span data-ttu-id="a66ff-537">仮想ネットワーク内のリソースとそれらの関係を表示する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-537">View resources in a virtual network and their relationships.</span></span>
-    <span data-ttu-id="a66ff-538">VM との間で発生するネットワーク トラフィック フィルターの問題を診断する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-538">Diagnose network traffic filtering problems to or from a VM.</span></span>
-    <span data-ttu-id="a66ff-539">VM からのネットワーク ルーティングの問題を診断する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-539">Diagnose network routing problems from a VM.</span></span>
-    <span data-ttu-id="a66ff-540">VM からの送信接続を診断する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-540">Diagnose outbound connections from a VM.</span></span>
-    <span data-ttu-id="a66ff-541">VM との間のパケットをキャプチャする。</span><span class="sxs-lookup"><span data-stu-id="a66ff-541">Capture packets to and from a VM.</span></span>
-    <span data-ttu-id="a66ff-542">Azure 仮想ネットワーク ゲートウェイと接続に関する問題を診断する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-542">Diagnose problems with an Azure virtual network gateway and connections.</span></span>
-    <span data-ttu-id="a66ff-543">Azure リージョンとインターネット サービス プロバイダー間の相対待ち時間を確認する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-543">Determine relative latencies between Azure regions and internet service providers.</span></span>
-    <span data-ttu-id="a66ff-544">ネットワーク インターフェイスのセキュリティ規則を表示する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-544">View security rules for a network interface.</span></span>
-    <span data-ttu-id="a66ff-545">ネットワーク メトリックを表示する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-545">View network metrics.</span></span>
-    <span data-ttu-id="a66ff-546">ネットワーク セキュリティ グループとの間のトラフィックを分析する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-546">Analyze traffic to or from a network security group.</span></span>
-    <span data-ttu-id="a66ff-547">ネットワーク リソースの診断ログを表示する。</span><span class="sxs-lookup"><span data-stu-id="a66ff-547">View diagnostic logs for network resources.</span></span>

<span data-ttu-id="a66ff-548">Operations Management Suite 内の [Network Performance Monitor][NPM] ソリューションは、ネットワークの詳細情報をエンド ツー エンドで提供できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-548">The [Network Performance Monitor][NPM] solution inside Operations Management Suite can provide detailed network information end to end.</span></span> <span data-ttu-id="a66ff-549">この情報には、Azure ネットワークとオンプレミス ネットワークの単一ビューが含まれます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-549">This information includes a single view of your Azure networks and on-premises networks.</span></span> <span data-ttu-id="a66ff-550">このソリューションには、ExpressRoute とパブリック サービスの固有のモニターがあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-550">The solution has specific monitors for ExpressRoute and public services.</span></span>

#### <a name="component-type-workloads"></a><span data-ttu-id="a66ff-551">コンポーネントの種類: ワークロード</span><span class="sxs-lookup"><span data-stu-id="a66ff-551">Component type: Workloads</span></span>
<span data-ttu-id="a66ff-552">ワークロード コンポーネントは、実際のアプリケーションとサービスが存在する場所です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-552">Workload components are where your actual applications and services reside.</span></span> <span data-ttu-id="a66ff-553">また、アプリケーション開発チームが時間の大半を費やす部分でもあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-553">They're also where your application development teams spend most of their time.</span></span>

<span data-ttu-id="a66ff-554">ワークロードの可能性は無限です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-554">The workload possibilities are endless.</span></span> <span data-ttu-id="a66ff-555">次に示すのは可能なワークロードの種類のほんの一部です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-555">The following are just a few of the possible workload types:</span></span>

<span data-ttu-id="a66ff-556">**内部基幹業務アプリケーション**は、企業の継続的な運営に不可欠なコンピューター アプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-556">**Internal line-of-business applications** are computer applications critical to the ongoing operation of an enterprise.</span></span> <span data-ttu-id="a66ff-557">基幹業務アプリケーションには、次のような共通の特性があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-557">Line of business applications have some common characteristics:</span></span>

-   <span data-ttu-id="a66ff-558">**本質的に対話型** - </span><span class="sxs-lookup"><span data-stu-id="a66ff-558">**Interactive** by nature.</span></span> <span data-ttu-id="a66ff-559">データを入力すると、結果またはレポートが返されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-559">Data is entered, and results or reports are returned.</span></span>
-   <span data-ttu-id="a66ff-560">**データ ドリブン** - データベースや他のストレージに頻繁にアクセスするデータ集約型です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-560">**Data driven**&mdash;data intensive with frequent access to databases or other storage.</span></span>
-   <span data-ttu-id="a66ff-561">**統合型** - 組織の内外の他のシステムと統合されます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-561">**Integrated**&mdash;offer integration with other systems within or outside the organization.</span></span>

<span data-ttu-id="a66ff-562">**顧客向け Web サイト (インターネットまたは内部接続)**。</span><span class="sxs-lookup"><span data-stu-id="a66ff-562">**Customer-facing websites (internet or internal facing)**.</span></span> <span data-ttu-id="a66ff-563">インターネットと対話するほとんどのアプリケーションは Web サイトです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-563">Most applications that interact with the internet are websites.</span></span> <span data-ttu-id="a66ff-564">Azure では、IaaS VM 上または [Microsoft Azure App Service サイト (PaaS) の Web Apps 機能][WebApps]から Web サイトを実行できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-564">Azure offers the ability to run a website on an IaaS VM or from a [Web Apps feature of Microsoft Azure App Service][WebApps] site (PaaS).</span></span> <span data-ttu-id="a66ff-565">Web Apps では仮想ネットワークとの統合がサポートされており、VDC のスポークに Web Apps をデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-565">Web Apps supports integration with virtual networks that allow the deployment of Web Apps in the spoke of the VDC.</span></span> <span data-ttu-id="a66ff-566">社内向け Web サイトの場合、仮想ネットワーク統合では、アプリケーション用にインターネット エンドポイントを公開する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a66ff-566">When looking at internal-facing websites, with virtual network integration, you don't need to expose an internet endpoint for your applications.</span></span> <span data-ttu-id="a66ff-567">代わりに、プライベート仮想ネットワークから、インターネットでルーティングできないプライベート アドレス経由でリソースを使用できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-567">But you can use the resources via private non-internet routable addresses from your private virtual network instead.</span></span>

<span data-ttu-id="a66ff-568">**ビッグ データと分析**。</span><span class="sxs-lookup"><span data-stu-id="a66ff-568">**Big data and analytics**.</span></span> <span data-ttu-id="a66ff-569">データを膨大な量に拡張する必要があるときに、データベースが適切にスケールアップされない場合があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-569">When data needs to scale up to a large volume, databases might not scale up properly.</span></span> <span data-ttu-id="a66ff-570">Apache Hadoop テクノロジは、多数のノードで分散クエリを並列実行するシステムを提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-570">Apache Hadoop technology offers a system to run distributed queries in parallel on a large number of nodes.</span></span> <span data-ttu-id="a66ff-571">データ ワークロードは、IaaS VM または PaaS ([Azure HDInsight][HDI]) で実行できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-571">Customers can run data workloads in IaaS VMs or PaaS, [Azure HDInsight][HDI].</span></span> <span data-ttu-id="a66ff-572">HDInsight では、場所ベースの仮想ネットワークへのデプロイがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-572">HDInsight supports deploying into a location-based virtual network.</span></span> <span data-ttu-id="a66ff-573">VDC のスポーク内のクラスターにデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-573">It can be deployed to a cluster in a spoke of the VDC.</span></span>

<span data-ttu-id="a66ff-574">**イベントとメッセージング**。</span><span class="sxs-lookup"><span data-stu-id="a66ff-574">**Events and messaging**.</span></span> <span data-ttu-id="a66ff-575">[Azure Event Hubs][EventHubs] は、数百万のイベントを収集、変換、保存する、ハイパースケールのテレメトリ インジェスト サービスです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-575">[Azure Event Hubs][EventHubs] is a hyperscale telemetry-ingestion service that collects, transforms, and stores millions of events.</span></span> <span data-ttu-id="a66ff-576">分散型ストリーミング プラットフォームとして、遅延時間が短く、保持時間を構成できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-576">As a distributed streaming platform, it offers low latency and configurable time retention.</span></span> <span data-ttu-id="a66ff-577">そのため、膨大な量のテレメトリを Azure に取り込み、そのデータを複数のアプリケーションから読み取ることができます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-577">So you can ingest massive amounts of telemetry into Azure and read that data from multiple applications.</span></span> <span data-ttu-id="a66ff-578">Event Hubs では、1 つのストリームでリアルタイム パイプラインとバッチ ベースのパイプラインの両方をサポートできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-578">With Event Hubs, a single stream can support both real-time and batch-based pipelines.</span></span>

<span data-ttu-id="a66ff-579">[Azure Service Bus][ServiceBus] により、アプリケーションとサービス間に信頼性の高いクラウド メッセージング サービスを実装できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-579">You can implement a highly reliable cloud messaging service between applications and services through [Azure Service Bus][ServiceBus].</span></span> <span data-ttu-id="a66ff-580">Azure Service Bus は、クライアントとサーバー間の非同期のブローカー メッセージング、構造化された先入れ先出し (FIFO) メッセージング、および発行機能とサブスクライブ機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-580">It offers asynchronous brokered messaging between client and server, structured first-in-first-out (FIFO) messaging, and publish and subscribe capabilities.</span></span>

<span data-ttu-id="a66ff-581">[![10]][10]</span><span class="sxs-lookup"><span data-stu-id="a66ff-581">[![10]][10]</span></span>

### <a name="multiple-vdc-implementations"></a><span data-ttu-id="a66ff-582">複数の VDC 実装</span><span class="sxs-lookup"><span data-stu-id="a66ff-582">Multiple VDC implementations</span></span>


<span data-ttu-id="a66ff-583">単一 VDC は単一リージョン内でホストされます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-583">However, a single VDC is hosted within a single region.</span></span> <span data-ttu-id="a66ff-584">そのため、そのリージョン全体に影響を及ぼす可能性のある大規模な停止に対して脆弱です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-584">It's vulnerable to a major outage that might affect that entire region.</span></span> <span data-ttu-id="a66ff-585">高い SLA の実現を望むお客様は、異なるリージョンに配置された 2 つ以上の VDC 実装に同じプロジェクトをデプロイして、サービスを保護する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-585">Customers that want to achieve high SLAs need to protect their services through deployments of the same project in two or more VDC implementations, placed in different regions.</span></span>

<span data-ttu-id="a66ff-586">SLA の問題に加え、複数の VDC 実装をデプロイすることに意味がある一般的なシナリオがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-586">In addition to SLA concerns, there are several common scenarios where deploying multiple VDC implementations makes sense:</span></span>

-   <span data-ttu-id="a66ff-587">リージョンまたはグローバル プレゼンス</span><span class="sxs-lookup"><span data-stu-id="a66ff-587">Regional or global presence.</span></span>
-   <span data-ttu-id="a66ff-588">ディザスター リカバリー</span><span class="sxs-lookup"><span data-stu-id="a66ff-588">Disaster recovery.</span></span>
-   <span data-ttu-id="a66ff-589">データセンター間でトラフィックを転送するメカニズム</span><span class="sxs-lookup"><span data-stu-id="a66ff-589">A mechanism to divert traffic between datacenters.</span></span>

#### <a name="regional-and-global-presence"></a><span data-ttu-id="a66ff-590">リージョンおよびグローバル プレゼンス</span><span class="sxs-lookup"><span data-stu-id="a66ff-590">Regional and global presence</span></span>
<span data-ttu-id="a66ff-591">Azure データセンターは世界中の多数のリージョンに存在します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-591">Azure datacenters are present in many regions worldwide.</span></span> <span data-ttu-id="a66ff-592">複数の Azure データセンターを選択するときは、地理的な距離と待機時間の 2 つの関連要素を考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-592">When they select multiple Azure datacenters, customers need to consider two related factors: geographical distances and latency.</span></span> <span data-ttu-id="a66ff-593">最良のユーザー エクスペリエンスを提供するには、VDC 実装間の地理的な距離と、VDC 実装とエンド ユーザー間の距離を評価する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-593">To offer the best user experience, customers need to evaluate the geographical distance between the VDC implementations and the distance between the VDC implementations and the end users.</span></span>

<span data-ttu-id="a66ff-594">また、VDC 実装がホストされている Azure リージョンは、組織が運営されている法的管轄によって定められた規制要件に準拠している必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-594">The Azure region where VDC implementations are hosted also needs to conform with regulatory requirements established by any legal jurisdiction under which your organization operates.</span></span>

#### <a name="disaster-recovery"></a><span data-ttu-id="a66ff-595">障害復旧</span><span class="sxs-lookup"><span data-stu-id="a66ff-595">Disaster recovery</span></span>
<span data-ttu-id="a66ff-596">ディザスター リカバリー計画の実装は、関連するワークロードの種類と、さまざまな VDC 実装間でワークロードの状態を同期する機能に関係します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-596">The implementation of a disaster recovery plan is related to the type of workload concerned and the ability to synchronize the workload state between different VDC implementations.</span></span> <span data-ttu-id="a66ff-597">ほとんどのお客様は、2 つの異なる VDC 実装で実行されるデプロイ間でアプリケーション データを同期して、高速フェールオーバー メカニズムを実装することを望んでいます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-597">Ideally, most customers want to synchronize application data between deployments that run in two different VDC implementations to implement a fast fail-over mechanism.</span></span> <span data-ttu-id="a66ff-598">ほとんどのアプリケーションは待機時間の影響を受けやすく、データ同期がタイムアウトしたり遅延する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-598">Most applications are sensitive to latency, and that can cause potential timeout and delay in data synchronization.</span></span>

<span data-ttu-id="a66ff-599">異なる VDC 実装内のアプリケーションの同期またはハートビート監視には、VDC 実装間の通信が必要です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-599">Synchronization or heartbeat monitoring of applications in different VDC implementations requires communication between them.</span></span> <span data-ttu-id="a66ff-600">異なるリージョンの 2 つの VDC 実装は、次の方法で接続できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-600">Two VDC implementations in different regions can be connected as follows:</span></span>

-   <span data-ttu-id="a66ff-601">仮想ネットワーク ピアリングでは、リージョンをまたいでハブを接続できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-601">Virtual network peering can connect hubs across regions.</span></span>
-   <span data-ttu-id="a66ff-602">ExpressRoute のプライベート ピアリング (VDC ハブが同じ ExpressRoute 回線に接続されている場合)。</span><span class="sxs-lookup"><span data-stu-id="a66ff-602">ExpressRoute private peering when the VDC hubs are connected to the same ExpressRoute circuit.</span></span>
-   <span data-ttu-id="a66ff-603">企業バックボーン経由で接続されている複数の ExpressRoute 回線と、ExpressRoute 回線に接続された VDC メッシュ。</span><span class="sxs-lookup"><span data-stu-id="a66ff-603">Multiple ExpressRoute circuits connected via your corporate backbone and your VDC mesh connected to the ExpressRoute circuits.</span></span>
-   <span data-ttu-id="a66ff-604">各 Azure リージョンの VDC ハブ間のサイト間 VPN 接続。</span><span class="sxs-lookup"><span data-stu-id="a66ff-604">Site-to-site VPN connections between your VDC hubs in each Azure region.</span></span>

<span data-ttu-id="a66ff-605">Microsoft バックボーンを通過する場合、帯域幅が広く、待機時間が一貫しているため、通常は仮想ネットワーク ピアリングまたは ExpressRoute 接続が推奨されるメカニズムです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-605">Usually, virtual network peering or ExpressRoute connections are the preferred mechanism because of higher bandwidth and consistent latency when transiting through the Microsoft backbone.</span></span>

<span data-ttu-id="a66ff-606">異なるリージョンに配置された 2 つ以上の異なる VDC 実装に分散されたアプリケーションを簡単に検証する方法はありません。</span><span class="sxs-lookup"><span data-stu-id="a66ff-606">There's no magic recipe to validate an application distributed between two or more different VDC implementations located in different regions.</span></span> <span data-ttu-id="a66ff-607">ネットワーク認定テストを実行して、接続の待機時間と帯域幅を検証する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-607">Customers should run network qualification tests to verify the latency and bandwidth of the connections.</span></span> <span data-ttu-id="a66ff-608">その後、同期または非同期のどちらのデータ レプリケーションが適切かを判断し、ワークロードに最適な目標復旧時間 (RTO) を決定します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-608">Then target whether synchronous or asynchronous data replication is appropriate and what the optimal recovery time objective (RTO) can be for your workloads.</span></span>

#### <a name="mechanism-to-divert-traffic-between-datacenters"></a><span data-ttu-id="a66ff-609">データセンター間でトラフィックを転送するメカニズム</span><span class="sxs-lookup"><span data-stu-id="a66ff-609">Mechanism to divert traffic between datacenters</span></span>
<span data-ttu-id="a66ff-610">データセンターで受信したトラフィックを別のデータセンターに転送する効果的な方法の 1 つは、ドメイン ネーム システム (DNS) に基づいています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-610">One effective technique to divert the traffic incoming in one datacenter to another is based on the Domain Name System (DNS).</span></span> <span data-ttu-id="a66ff-611">[Azure Traffic Manager][TM] では、DNS メカニズムを使用して、エンドユーザー トラフィックを特定の VDC 内の最適なパブリック エンドポイントに転送します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-611">[Azure Traffic Manager][TM] uses the DNS mechanism to direct end-user traffic to the most appropriate public endpoint in a specific VDC.</span></span> <span data-ttu-id="a66ff-612">Traffic Manager では、プローブを使用して、さまざまな VDC 実装内のパブリック エンドポイントのサービスの正常性を定期的に確認します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-612">Through probes, Traffic Manager periodically checks the service health of public endpoints in different VDC implementations.</span></span> <span data-ttu-id="a66ff-613">それらのエンドポイントで障害が発生した場合は、セカンダリ VDC に自動的にルーティングします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-613">If those endpoints fail, it routes automatically to the secondary VDC.</span></span>

<span data-ttu-id="a66ff-614">Traffic Manager は、Azure パブリック エンドポイントで動作します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-614">Traffic Manager works on Azure public endpoints.</span></span> <span data-ttu-id="a66ff-615">たとえば、トラフィックを制御したり、適切な VDC 内の Azure VM と Web Apps にトラフィックを転送したりできます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-615">For example, it can control or divert traffic to Azure VMs and Web Apps in the appropriate VDC.</span></span> <span data-ttu-id="a66ff-616">Traffic Manager は、Azure リージョン全体の障害が発生しても回復性があります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-616">Traffic Manager is resilient even in the face of an entire Azure region failing.</span></span> <span data-ttu-id="a66ff-617">複数の条件に基づいて、異なる VDC 実装内のサービス エンドポイントに対するユーザー トラフィックの分散を制御できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-617">It can control the distribution of user traffic for service endpoints in different VDC implementations based on several criteria.</span></span> <span data-ttu-id="a66ff-618">条件の例として、特定の VDC でのサービスの障害や、クライアントのネットワーク待機時間が最も短い VDC の選択などがあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-618">Examples are service failure in a specific VDC or selecting the VDC with the lowest network latency for the client.</span></span>

### <a name="conclusion"></a><span data-ttu-id="a66ff-619">まとめ</span><span class="sxs-lookup"><span data-stu-id="a66ff-619">Conclusion</span></span>
<span data-ttu-id="a66ff-620">仮想データセンターは、データセンターをクラウドに移行するためのアプローチであり、Azure でスケーラブルなアーキテクチャを作成する機能の組み合わせを使用します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-620">The virtual datacenter is an approach to datacenter migration into the cloud that uses a combination of features and capabilities to create a scalable architecture in Azure.</span></span> <span data-ttu-id="a66ff-621">これにより、クラウド リソースの最大限の活用、コストの削減、システム ガバナンスの簡素化が実現します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-621">It maximizes cloud resource use, reduces costs, and simplifies system governance.</span></span> <span data-ttu-id="a66ff-622">VDC の概念は、ハブで共通の共有サービスを提供するハブ スポーク トポロジに基づいています。</span><span class="sxs-lookup"><span data-stu-id="a66ff-622">The VDC concept is based on a hub-spokes topology that provides common shared services in the hub.</span></span> <span data-ttu-id="a66ff-623">スポークで特定のアプリケーションやワークロードを実行できます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-623">It allows specific applications or workloads in the spokes.</span></span> <span data-ttu-id="a66ff-624">VDC は、さまざまな部門 が協力する、会社のロールの構造に対応します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-624">The VDC matches the structure of company roles, where different departments work together.</span></span> <span data-ttu-id="a66ff-625">たとえば、中央 IT、Azure DevOps、運用、メンテナンスなどです。</span><span class="sxs-lookup"><span data-stu-id="a66ff-625">Examples are the central IT, Azure DevOps, and operations and maintenance.</span></span> <span data-ttu-id="a66ff-626">各部門には、ロールと職務の明確なリストがあります。</span><span class="sxs-lookup"><span data-stu-id="a66ff-626">Each department has a specific list of roles and duties.</span></span> <span data-ttu-id="a66ff-627">VDC の概念は、**リフト アンド シフト**移行の要件を満たします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-627">The VDC concept satisfies the requirements for a **lift and shift** migration.</span></span> <span data-ttu-id="a66ff-628">ただし、ネイティブなクラウド デプロイにも多くの利点をもたらします。</span><span class="sxs-lookup"><span data-stu-id="a66ff-628">But it also provides many advantages to native cloud deployments.</span></span>

## <a name="references"></a><span data-ttu-id="a66ff-629">参照</span><span class="sxs-lookup"><span data-stu-id="a66ff-629">References</span></span>
<span data-ttu-id="a66ff-630">この記事で説明した次の機能の詳細をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a66ff-630">Learn more about the following features discussed in this article:</span></span>

| | | |
|-|-|-|
|<span data-ttu-id="a66ff-631">ネットワーク機能</span><span class="sxs-lookup"><span data-stu-id="a66ff-631">Network features</span></span>|<span data-ttu-id="a66ff-632">負荷分散</span><span class="sxs-lookup"><span data-stu-id="a66ff-632">Load balancing</span></span>|<span data-ttu-id="a66ff-633">接続</span><span class="sxs-lookup"><span data-stu-id="a66ff-633">Connectivity</span></span>|
|<span data-ttu-id="a66ff-634">[Azure Virtual Network][VNet]</span><span class="sxs-lookup"><span data-stu-id="a66ff-634">[Azure Virtual Network][VNet]</span></span></br><span data-ttu-id="a66ff-635">[ネットワーク セキュリティ グループ][NSG]</span><span class="sxs-lookup"><span data-stu-id="a66ff-635">[Network security groups][NSG]</span></span></br><span data-ttu-id="a66ff-636">[NSG ログ][NSGLog]</span><span class="sxs-lookup"><span data-stu-id="a66ff-636">[NSG logs][NSGLog]</span></span></br><span data-ttu-id="a66ff-637">[ユーザー定義ルート][UDR]</span><span class="sxs-lookup"><span data-stu-id="a66ff-637">[User-defined routes][UDR]</span></span></br><span data-ttu-id="a66ff-638">[ネットワーク仮想アプライアンス][NVA]</span><span class="sxs-lookup"><span data-stu-id="a66ff-638">[Network virtual appliances][NVA]</span></span></br><span data-ttu-id="a66ff-639">[パブリック IP アドレス][PIP]</span><span class="sxs-lookup"><span data-stu-id="a66ff-639">[Public IP addresses][PIP]</span></span></br><span data-ttu-id="a66ff-640">[Azure DDoS Protection][DDOS]</span><span class="sxs-lookup"><span data-stu-id="a66ff-640">[Azure DDoS Protection][DDOS]</span></span></br><span data-ttu-id="a66ff-641">[Azure Firewall][AzFW]</span><span class="sxs-lookup"><span data-stu-id="a66ff-641">[Azure Firewall][AzFW]</span></span></br><span data-ttu-id="a66ff-642">[Azure DNS][DNS]</span><span class="sxs-lookup"><span data-stu-id="a66ff-642">[Azure DNS][DNS]</span></span>|<span data-ttu-id="a66ff-643">[Azure Front Door][AFD]</span><span class="sxs-lookup"><span data-stu-id="a66ff-643">[Azure Front Door][AFD]</span></span></br><span data-ttu-id="a66ff-644">[Azure Load Balancer (L3)][ALB]</span><span class="sxs-lookup"><span data-stu-id="a66ff-644">[Azure Load Balancer (L3)][ALB]</span></span></br><span data-ttu-id="a66ff-645">[Application Gateway (L7)][AppGW]</span><span class="sxs-lookup"><span data-stu-id="a66ff-645">[Application Gateway (L7)][AppGW]</span></span></br><span data-ttu-id="a66ff-646">[Web アプリケーション ファイアウォール][WAF]</span><span class="sxs-lookup"><span data-stu-id="a66ff-646">[Web application firewall][WAF]</span></span></br><span data-ttu-id="a66ff-647">[Azure Traffic Manager][TM]</span><span class="sxs-lookup"><span data-stu-id="a66ff-647">[Azure Traffic Manager][TM]</span></span></br></br></br></br></br> |<span data-ttu-id="a66ff-648">[仮想ネットワーク ピアリング][VNetPeering]</span><span class="sxs-lookup"><span data-stu-id="a66ff-648">[Virtual network peering][VNetPeering]</span></span></br><span data-ttu-id="a66ff-649">[仮想プライベート ネットワーク][VPN]</span><span class="sxs-lookup"><span data-stu-id="a66ff-649">[Virtual private network][VPN]</span></span></br><span data-ttu-id="a66ff-650">[Virtual WAN][vWAN]</span><span class="sxs-lookup"><span data-stu-id="a66ff-650">[Virtual WAN][vWAN]</span></span></br><span data-ttu-id="a66ff-651">[ExpressRoute][ExR]</span><span class="sxs-lookup"><span data-stu-id="a66ff-651">[ExpressRoute][ExR]</span></span></br><span data-ttu-id="a66ff-652">[ExpressRoute Direct][ExRD]</span><span class="sxs-lookup"><span data-stu-id="a66ff-652">[ExpressRoute Direct][ExRD]</span></span></br></br></br></br></br>
|<span data-ttu-id="a66ff-653">ID</span><span class="sxs-lookup"><span data-stu-id="a66ff-653">Identity</span></span></br>|<span data-ttu-id="a66ff-654">監視</span><span class="sxs-lookup"><span data-stu-id="a66ff-654">Monitoring</span></span></br>|<span data-ttu-id="a66ff-655">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="a66ff-655">Best practices</span></span></br>|
|<span data-ttu-id="a66ff-656">[Azure Active Directory][AAD]</span><span class="sxs-lookup"><span data-stu-id="a66ff-656">[Azure Active Directory][AAD]</span></span></br><span data-ttu-id="a66ff-657">[Multi-Factor Authentication][MFA]</span><span class="sxs-lookup"><span data-stu-id="a66ff-657">[Multi-Factor Authentication][MFA]</span></span></br><span data-ttu-id="a66ff-658">[ロールベースのアクセス制御][RBAC]</span><span class="sxs-lookup"><span data-stu-id="a66ff-658">[Role-based access control][RBAC]</span></span></br><span data-ttu-id="a66ff-659">[既定の Azure AD ロール][Roles]</span><span class="sxs-lookup"><span data-stu-id="a66ff-659">[Default Azure AD roles][Roles]</span></span></br></br></br> |<span data-ttu-id="a66ff-660">[Network Watcher][NetWatch]</span><span class="sxs-lookup"><span data-stu-id="a66ff-660">[Network Watcher][NetWatch]</span></span></br><span data-ttu-id="a66ff-661">[Azure Monitor][Monitor]</span><span class="sxs-lookup"><span data-stu-id="a66ff-661">[Azure Monitor][Monitor]</span></span></br><span data-ttu-id="a66ff-662">[アクティビティ ログ][ActLog]</span><span class="sxs-lookup"><span data-stu-id="a66ff-662">[Activity Log][ActLog]</span></span></br><span data-ttu-id="a66ff-663">[診断ログの監視][DiagLog]</span><span class="sxs-lookup"><span data-stu-id="a66ff-663">[Monitor diagnostic logs][DiagLog]</span></span></br><span data-ttu-id="a66ff-664">[Microsoft Operations Management Suite][OMS]</span><span class="sxs-lookup"><span data-stu-id="a66ff-664">[Microsoft Operations Management Suite][OMS]</span></span></br><span data-ttu-id="a66ff-665">[Network Performance Monitor][NPM]</span><span class="sxs-lookup"><span data-stu-id="a66ff-665">[Network Performance Monitor][NPM]</span></span>|<span data-ttu-id="a66ff-666">[境界ネットワークのベスト プラクティス][DMZ]</span><span class="sxs-lookup"><span data-stu-id="a66ff-666">[Perimeter network best practices][DMZ]</span></span></br><span data-ttu-id="a66ff-667">[サブスクリプション管理][SubMgmt]</span><span class="sxs-lookup"><span data-stu-id="a66ff-667">[Subscription management][SubMgmt]</span></span></br><span data-ttu-id="a66ff-668">[リソース グループ管理][RGMgmt]</span><span class="sxs-lookup"><span data-stu-id="a66ff-668">[Resource group management][RGMgmt]</span></span></br><span data-ttu-id="a66ff-669">[Azure サブスクリプションの制限][Limits]</span><span class="sxs-lookup"><span data-stu-id="a66ff-669">[Azure subscription limits][Limits]</span></span> </br></br></br>|
|<span data-ttu-id="a66ff-670">他の Azure サービス</span><span class="sxs-lookup"><span data-stu-id="a66ff-670">Other Azure services</span></span>|
|<span data-ttu-id="a66ff-671">[Web Apps][WebApps]</span><span class="sxs-lookup"><span data-stu-id="a66ff-671">[Web Apps][WebApps]</span></span></br><span data-ttu-id="a66ff-672">[HDInsight (Hadoop)][HDI]</span><span class="sxs-lookup"><span data-stu-id="a66ff-672">[HDInsight (Hadoop)][HDI]</span></span></br><span data-ttu-id="a66ff-673">[Event Hubs][EventHubs]</span><span class="sxs-lookup"><span data-stu-id="a66ff-673">[Event Hubs][EventHubs]</span></span></br><span data-ttu-id="a66ff-674">[Service Bus][ServiceBus]</span><span class="sxs-lookup"><span data-stu-id="a66ff-674">[Service Bus][ServiceBus]</span></span>|

## <a name="next-steps"></a><span data-ttu-id="a66ff-675">次の手順</span><span class="sxs-lookup"><span data-stu-id="a66ff-675">Next steps</span></span>
 - <span data-ttu-id="a66ff-676">VDC のハブとスポークの設計の基礎となるテクノロジである[仮想ネットワーク ピアリング][VNetPeering]の詳細を確認します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-676">Explore [virtual network peering][VNetPeering], the underpinning technology for VDC hub and spoke designs.</span></span>
 - <span data-ttu-id="a66ff-677">[Azure AD][AAD] を実装して [RBAC][RBAC] の調査を始めます。</span><span class="sxs-lookup"><span data-stu-id="a66ff-677">Implement [Azure AD][AAD] to get started with [RBAC][RBAC] exploration.</span></span>
 - <span data-ttu-id="a66ff-678">組織の構造、要件、ポリシーに対応する、サブスクリプションおよびリソース管理モデルと RBAC モデルを開発します。</span><span class="sxs-lookup"><span data-stu-id="a66ff-678">Develop a subscription and resource management model and an RBAC model to meet the structure, requirements, and policies of your organization.</span></span> <span data-ttu-id="a66ff-679">最も重要なアクティビティは計画です。</span><span class="sxs-lookup"><span data-stu-id="a66ff-679">The most important activity is planning.</span></span> <span data-ttu-id="a66ff-680">再編成、合併、新しい製品ライン、その他の可能性について、できるだけ実用的な計画を立ててください。</span><span class="sxs-lookup"><span data-stu-id="a66ff-680">As much as practical, plan for reorganizations, mergers, new product lines, and other possibilities.</span></span>

<!--Image References-->
[0]: ./images/networking-redundant-equipment.png "コンポーネントのオーバーラップの例" 
[1]: ./images/networking-vdc-high-level.png "ハブとスポークの VDC の高度な例"
[2]: ./images/networking-hub-spokes-cluster.png "ハブとスポークのクラスター"
[3]: ./images/networking-spoke-to-spoke.png "スポーク間"
[4]: ./images/networking-vdc-block-level-diagram.png "VDC のブロック レベルの図"
[5]: ./images/networking-users-groups-subsciptions.png "ユーザー、グループ、サブスクリプション、プロジェクト"
[6]: ./images/networking-infrastructure-high-level.png "インフラストラクチャの概要図"
[7]: ./images/networking-highlevel-perimeter-networks.png "インフラストラクチャの概要図"
[8]: ./images/networking-vnet-peering-perimeter-neworks.png "VNet ピアリングと境界ネットワーク"
[9]: ./images/networking-high-level-diagram-monitoring.png "監視の概要図"
[10]: ./images/networking-high-level-workloads.png "ワークロードの概要図"

<!--Link References-->
[Limits]: /azure/azure-subscription-service-limits
[Roles]: /azure/role-based-access-control/built-in-roles
[VNet]: /azure/virtual-network/virtual-networks-overview
[NSG]: /azure/virtual-network/virtual-networks-nsg
[DNS]: /azure/dns/dns-overview
[PrivateDNS]: /azure/dns/private-dns-overview
[VNetPeering]: /azure/virtual-network/virtual-network-peering-overview 
[UDR]: /azure/virtual-network/virtual-networks-udr-overview 
[RBAC]: /azure/role-based-access-control/overview
[MFA]: /azure/multi-factor-authentication/multi-factor-authentication
[AAD]: /azure/active-directory/active-directory-whatis
[VPN]: /azure/vpn-gateway/vpn-gateway-about-vpngateways 
[ExR]: /azure/expressroute/expressroute-introduction
[ExRD]: https://docs.microsoft.com/en-us/azure/expressroute/expressroute-erdirect-about
[vWAN]: /azure/virtual-wan/virtual-wan-about
[NVA]: /azure/architecture/reference-architectures/dmz/nva-ha
[AzFW]: /azure/firewall/overview
[SubMgmt]: /azure/architecture/cloud-adoption/appendix/azure-scaffold 
[RGMgmt]: /azure/azure-resource-manager/resource-group-overview
[DMZ]: /azure/best-practices-network-security
[ALB]: /azure/load-balancer/load-balancer-overview
[DDOS]: /azure/virtual-network/ddos-protection-overview
[PIP]: /azure/virtual-network/resource-groups-networking#public-ip-address
[AFD]: https://docs.microsoft.com/en-us/azure/frontdoor/front-door-overview
[AppGW]: /azure/application-gateway/application-gateway-introduction
[WAF]: /azure/application-gateway/application-gateway-web-application-firewall-overview
[Monitor]: /azure/monitoring-and-diagnostics/
[ActLog]: /azure/monitoring-and-diagnostics/monitoring-overview-activity-logs 
[DiagLog]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs
[NSGLog]: /azure/virtual-network/virtual-network-nsg-manage-log
[OMS]: /azure/operations-management-suite/operations-management-suite-overview
[NPM]: /azure/log-analytics/log-analytics-network-performance-monitor
[NetWatch]: /azure/network-watcher/network-watcher-monitoring-overview
[WebApps]: /azure/app-service/
[HDI]: /azure/hdinsight/hdinsight-hadoop-introduction
[EventHubs]: /azure/event-hubs/event-hubs-what-is-event-hubs 
[ServiceBus]: /azure/service-bus-messaging/service-bus-messaging-overview
[TM]: /azure/traffic-manager/traffic-manager-overview

